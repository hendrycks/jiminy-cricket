	.TIME
	.INSERT "deadline/deadline_freq"
	.INSERT "deadline/deadline_data"

	.FUNCT DEMON,RTN,TICK,CINT
	CALL INT,RTN,1 >CINT
	PUT CINT,C-TICK,TICK
	RETURN CINT

	.FUNCT QUEUE,RTN,TICK,CINT
	CALL INT,RTN >CINT
	PUT CINT,C-TICK,TICK
	RETURN CINT

	.FUNCT INT,RTN,DEMON?1=0,E,C,INT?1
	ADD C-TABLE,C-TABLELEN >E
	ADD C-TABLE,C-INTS >C
?L1:	EQUAL? C,E \?L3
	SUB C-INTS,C-INTLEN >C-INTS
	ZERO? DEMON?1 /?L5
	SUB C-DEMONS,C-INTLEN >C-DEMONS
?L5:	ADD C-TABLE,C-INTS >INT?1
	PUT INT?1,C-RTN,RTN
	RETURN INT?1
?L3:	GET C,C-RTN >STACK
	EQUAL? STACK,RTN \?L7
	RETURN C
?L7:	ADD C,C-INTLEN >C
	JUMP ?L1

	.FUNCT CLOCKER,C,E,TICK,FLG=0
	ZERO? CLOCK-WAIT /?L1
	SET 'CLOCK-WAIT,0
	RFALSE
?L1:	IGRTR? 'PRESENT-TIME,1199 \?L4
	PRINTI "Chief Inspector Klutz walks up to you, seemingly from out of nowhere. ""I'm sorry, Inspector, but your time is up here. I'm sorry that you didn't have any more time to investigate the case. Maybe next time..."" He escorts you to a waiting police car, in which  you go off into the sunset."
	CRLF
	QUIT
?L4:	IGRTR? 'MOVES,59 \?L11
	SET 'MOVES,0
	IGRTR? 'SCORE,23 \?L11
	SET 'SCORE,0
?L11:	ZERO? P-WON /?L15
	PUSH C-INTS
	JUMP ?L17
?L15:	PUSH C-DEMONS
?L17:	ADD C-TABLE,STACK >C
	ADD C-TABLE,C-TABLELEN >E
?L18:	EQUAL? C,E \?L20
	RETURN FLG
?L20:	GET C,C-ENABLED? >STACK
	ZERO? STACK /?L26
	GET C,C-TICK >TICK
	ZERO? TICK /?L26
	SUB TICK,1 >STACK
	PUT C,C-TICK,STACK
	GRTR? TICK,1 /?L26
	GET C,C-RTN >STACK
	CALL STACK >STACK
	ZERO? STACK /?L26
	SET 'FLG,1
?L26:	ADD C,C-INTLEN >C
	JUMP ?L18

	.FUNCT ZPROB,BASE
	RANDOM 100 >STACK
	GRTR? BASE,STACK \FALSE
	RTRUE

	.FUNCT PICK-ONE,FROB
	GET FROB,0 >STACK
	RANDOM STACK >STACK
	GET FROB,STACK >STACK
	RSTACK

	.FUNCT GO
START::
?L0:	PUTB P-LEXV,0,59
	SET 'LIT,1
	SET 'SCORE,8
	SET 'WINNER,PLAYER
	SET 'HERE,SOUTH-LAWN
	SET 'P-IT-LOC,HERE
	SET 'P-IT-OBJECT,0
	SET 'P-HIM-HER,MRS-ROBNER
	SET 'P-HIM-HER-LOC,FOYER
	FSET? HERE,TOUCHBIT /?L1
	CALL QUEUE,I-START-INTERRUPTS,1 >STACK
	PUT STACK,0,1
	CALL START-MOVEMENT
	CALL V-VERSION
	CRLF
?L1:	MOVE WINNER,HERE
	CALL V-LOOK
	CALL MAIN-LOOP
	JUMP ?L0

	.FUNCT I-START-INTERRUPTS
	RANDOM 40 >STACK
	ADD 175,STACK >STACK
	CALL QUEUE,I-NEWSPAPER,STACK >STACK
	PUT STACK,0,1
	RANDOM 60 >STACK
	ADD 70,STACK >STACK
	CALL QUEUE,I-MAIL,STACK >STACK
	PUT STACK,0,1
	RANDOM 10 >STACK
	ADD 60,STACK >STACK
	CALL QUEUE,I-CALL,STACK >STACK
	PUT STACK,0,1
	CALL QUEUE,I-BAXTER-ARRIVE,115 >STACK
	PUT STACK,0,1
	RANDOM 5 >STACK
	ADD 230,STACK >STACK
	CALL QUEUE,I-COATES-ARRIVE,STACK >STACK
	PUT STACK,0,1
	RFALSE

	.FUNCT MAIN-LOOP,ICNT,OCNT,NUM,CNT,OBJ,TBL,V,PTBL,OBJ1,TMP
?L1:	SET 'CNT,0
	SET 'OBJ,0
	SET 'PTBL,1
	CALL PARSER >P-WON
	ZERO? P-WON /?L3
	GET P-PRSI,P-MATCHLEN >ICNT
	GET P-PRSO,P-MATCHLEN >OCNT
	ZERO? OCNT \?L5
	SET 'NUM,OCNT
	JUMP ?L12
?L5:	GRTR? OCNT,1 \?L7
	SET 'TBL,P-PRSO
	ZERO? ICNT \?L8
	SET 'OBJ,0
	JUMP ?L10
?L8:	GET P-PRSI,1 >OBJ
?L10:	SET 'NUM,OCNT
	JUMP ?L12
?L7:	GRTR? ICNT,1 \?L11
	SET 'PTBL,0
	SET 'TBL,P-PRSI
	GET P-PRSO,1 >OBJ
	SET 'NUM,ICNT
	JUMP ?L12
?L11:	SET 'NUM,1
?L12:	EQUAL? QCONTEXT-ROOM,HERE /?L13
	SET 'QCONTEXT,0
?L13:	ZERO? OBJ \?L16
	EQUAL? ICNT,1 \?L16
	GET P-PRSI,1 >OBJ
?L16:	EQUAL? PRSA,V?WALK \?L19
	CALL PERFORM,PRSA,PRSO >V
	JUMP ?L35
?L19:	ZERO? NUM \?L21
	GETB P-SYNTAX,P-SBITS >STACK
	BAND STACK,P-SONUMS >STACK
	ZERO? STACK \?L22
	CALL PERFORM,PRSA >V
	SET 'PRSO,0
	JUMP ?L35
?L22:	PRINTI "There isn't anything to "
	GET P-ITBL,P-VERBN >TMP
	ZERO? P-OFLAG /?L27
	GET TMP,0 >STACK
	PRINTB STACK
	JUMP ?L29
?L27:	GETB TMP,3 >STACK
	GETB TMP,2 >STACK
	CALL WORD-PRINT,STACK,STACK
?L29:	PRINTI "!"
	CRLF
	SET 'V,0
	JUMP ?L35
?L21:	ZERO? PTBL /?L32
	EQUAL? NUM,2 \?L32
	EQUAL? PRSA,V?ARREST \?L32
	CALL PERFORM,PRSA,OBJECT-PAIR >V
	JUMP ?L35
?L32:	IGRTR? 'CNT,NUM /?L35
	ZERO? PTBL /?L39
	GET P-PRSO,CNT >OBJ1
	JUMP ?L41
?L39:	GET P-PRSI,CNT >OBJ1
?L41:	GRTR? NUM,1 \?L42
	EQUAL? OBJ1,PLAYER /?L32
	FSET? OBJ1,DUPLICATE /?L32
	PRINTD OBJ1
	PRINTI ": "
?L42:	ZERO? PTBL /?L51
	PUSH OBJ1
	JUMP ?L53
?L51:	PUSH OBJ
?L53:	CALL QCONTEXT-CHECK,STACK >V
	ZERO? PTBL /?L54
	PUSH OBJ
	JUMP ?L56
?L54:	PUSH OBJ1
?L56:	ZERO? PTBL /?L57
	PUSH OBJ1
	JUMP ?L59
?L57:	PUSH OBJ
?L59:	CALL PERFORM,PRSA,STACK,STACK >V
	EQUAL? V,M-FATAL \?L32
?L35:	EQUAL? V,M-FATAL \?L66
	SET 'P-CONT,0
	JUMP ?L66
?L3:	SET 'P-CONT,0
?L66:	ZERO? P-WON /?L1
	EQUAL? PRSA,V?RESTORE,V?UNSCRIPT,V?SCRIPT /?L1
	EQUAL? PRSA,V?SCORE,V?RESTART,V?QUIT /?L1
	EQUAL? PRSA,V?VERSION,V?UNSPACE,V?SPACE /?L1
	EQUAL? PRSA,V?SAVE,V?TIME,V?VERBOSE /?L1
	EQUAL? PRSA,V?SUPER-BRIEF,V?BRIEF,V?TELL /?L1
	CALL CLOCKER >V
	JUMP ?L1

	.FUNCT QCONTEXT-CHECK,PRSO?1
	ZERO? QCONTEXT /FALSE
	IN? QCONTEXT,HERE \FALSE
	EQUAL? QCONTEXT-ROOM,HERE \FALSE
	EQUAL? WINNER,PLAYER \FALSE
	EQUAL? PRSA,V?WHAT,V?FIND /?L5
	EQUAL? PRSA,V?TELL-ME \?L6
	EQUAL? PRSO?1,PLAYER /?L5
?L6:	EQUAL? PRSA,V?SHOW \FALSE
	EQUAL? PRSO?1,PLAYER \FALSE
?L5:	SET 'WINNER,QCONTEXT
	PRINTI "(said to "
	PRINTD QCONTEXT
	PRINTR ")"

	.FUNCT PERFORM,A,O=0,I=0,V,OA,OO,OI
	SET 'OA,PRSA
	SET 'OO,PRSO
	SET 'OI,PRSI
	SET 'PRSA,A
	EQUAL? IT,I,O \?L1
	EQUAL? P-IT-LOC,HERE /?L1
	PRINTI "I don't see what you are referring to."
	CRLF
	RETURN 2
?L1:	EQUAL? HIM-HER,I,O \?L10
	EQUAL? P-HIM-HER-LOC,HERE /?L10
	GETP P-HIM-HER,P?CHARACTER >STACK
	GET GLOBAL-CHARACTER-TABLE,STACK >V
	EQUAL? HIM-HER,O \?L8
	SET 'O,V
	JUMP ?L10
?L8:	EQUAL? HIM-HER,I \?L10
	SET 'I,V
?L10:	EQUAL? O,IT \?L13
	SET 'O,P-IT-OBJECT
	JUMP ?L15
?L13:	EQUAL? O,HIM-HER \?L15
	SET 'O,P-HIM-HER
?L15:	EQUAL? I,IT \?L17
	SET 'I,P-IT-OBJECT
	JUMP ?L19
?L17:	EQUAL? I,HIM-HER \?L19
	SET 'I,P-HIM-HER
?L19:	SET 'PRSO,O
	ZERO? PRSO /?L25
	EQUAL? PRSA,V?WALK /?L25
	FSET? PRSO,PERSON \?L23
	SET 'P-HIM-HER,PRSO
	SET 'P-HIM-HER-LOC,HERE
	JUMP ?L25
?L23:	SET 'P-IT-OBJECT,PRSO
	SET 'P-IT-LOC,HERE
?L25:	SET 'PRSI,I
	EQUAL? A,V?AGAIN /?L27
	SET 'L-PRSA,A
	EQUAL? A,V?WALK \?L29
	SET 'L-PRSO,0
	JUMP ?L31
?L29:	SET 'L-PRSO,O
?L31:	SET 'L-PRSI,I
?L27:	GETP WINNER,P?ACTION >STACK
	CALL STACK >V
	ZERO? V \?L39
	LOC WINNER >STACK
	GETP STACK,P?ACTION >STACK
	CALL STACK,M-BEG >V
	ZERO? V \?L39
	GET PREACTIONS,A >STACK
	CALL STACK >V
	ZERO? V \?L39
	ZERO? I /?L37
	GETP I,P?ACTION >STACK
	CALL STACK >V
	ZERO? V \?L39
?L37:	ZERO? O /?L38
	EQUAL? A,V?WALK /?L38
	GETP O,P?ACTION >STACK
	CALL STACK >V
	ZERO? V \?L39
?L38:	GET ACTIONS,A >STACK
	CALL STACK >V
	ZERO? V /?L39
?L39:	EQUAL? V,M-FATAL /?L41
	LOC WINNER >STACK
	GETP STACK,P?ACTION >STACK
	CALL STACK,M-END >V
?L41:	SET 'PRSA,OA
	SET 'PRSO,OO
	SET 'PRSI,OI
	RETURN V

	.FUNCT PARSER,PTR=P-LEXSTART,WORD,VAL=0,VERB=0,LEN,DIR=0,NW=0,LW=0,NUM,SCNT,CNT=-1
?L1:	IGRTR? 'CNT,P-ITBLLEN /?L2
	PUT P-ITBL,CNT,0
	JUMP ?L1
?L2:	SET 'P-ADVERB,0
	SET 'P-MERGED,0
	PUT P-PRSO,P-MATCHLEN,0
	PUT P-PRSI,P-MATCHLEN,0
	PUT P-BUTS,P-MATCHLEN,0
	ZERO? QUOTE-FLAG \?L8
	EQUAL? WINNER,PLAYER /?L8
	SET 'WINNER,PLAYER
	LOC WINNER >STACK
	FSET? STACK,VEHBIT /?L8
	LOC WINNER >HERE
?L8:	ZERO? P-CONT /?L12
	SET 'PTR,P-CONT
	SET 'P-CONT,0
	EQUAL? PRSA,V?TELL /?L17
	CRLF
	JUMP ?L17
?L12:	SET 'WINNER,PLAYER
	SET 'QUOTE-FLAG,0
	LOC WINNER >STACK
	FSET? STACK,VEHBIT /?L18
	LOC WINNER >HERE
?L18:	SET 'SCNT,P-SPACE
?L21:	DLESS? 'SCNT,0 /?L22
	CRLF
	JUMP ?L21
?L22:	PRINTI ">"
	READ P-INBUF,P-LEXV
?L17:	GETB P-LEXV,P-LEXWORDS >P-LEN
	ZERO? P-LEN \?L28
	PRINTI "What?"
	CRLF
	RFALSE
?L28:	GET P-LEXV,PTR >WORD
	EQUAL? WORD,W?WHY,W?HOW,W?WHEN /?L33
	EQUAL? WORD,W?IS,W?DID,W?ARE \?L32
?L33:	PRINTI "Detectives are expected to know how to conduct an interrogation; please re-read your casebook for remedial instruction. Remember that the documentary evidence enclosed contains the answers to all of the important questions which cannot be asked directly."
	CRLF
	RFALSE
?L32:	SET 'LEN,P-LEN
	SET 'P-DIR,0
	SET 'P-NCN,0
	SET 'P-GETFLAGS,0
?L37:	DLESS? 'P-LEN,0 \?L39
	SET 'QUOTE-FLAG,0
	JUMP ?L38
?L39:	GET P-LEXV,PTR >WORD
	ZERO? WORD \?L42
	CALL NUMBER?,PTR >WORD
	ZERO? WORD /?L41
?L42:	EQUAL? WORD,W?TO \?L43
	EQUAL? VERB,ACT?TELL,ACT?ASK \?L43
	SET 'WORD,W?$QUOTE
	JUMP ?L45
?L43:	EQUAL? WORD,W?THEN \?L45
	ZERO? VERB \?L45
	PUT P-ITBL,P-VERB,ACT?TELL
	PUT P-ITBL,P-VERBN,0
	SET 'WORD,W?$QUOTE
?L45:	EQUAL? WORD,W?$PERIOD \?L47
	EQUAL? LW,W?MRS,W?MR,W?MS \?L47
	SET 'LW,0
	JUMP ?L96
?L47:	EQUAL? WORD,W?THEN,W?$PERIOD /?L50
	EQUAL? WORD,W?$QUOTE \?L49
?L50:	EQUAL? WORD,W?$QUOTE \?L55
	ZERO? QUOTE-FLAG /?L53
	SET 'QUOTE-FLAG,0
	JUMP ?L55
?L53:	SET 'QUOTE-FLAG,1
?L55:	ZERO? P-LEN /?L57
	ADD PTR,P-LEXELEN >P-CONT
?L57:	PUTB P-LEXV,P-LEXWORDS,P-LEN
	JUMP ?L38
?L49:	CALL WT?,WORD,PS?DIRECTION,P1?DIRECTION >VAL
	ZERO? VAL /?L59
	EQUAL? LEN,1 /?L60
	EQUAL? LEN,2 \?L61
	EQUAL? VERB,ACT?WALK /?L60
?L61:	ADD PTR,P-LEXELEN >STACK
	GET P-LEXV,STACK >NW
	EQUAL? NW,W?THEN,W?$QUOTE \?L62
	GRTR? LEN,2 /?L60
?L62:	EQUAL? NW,W?$PERIOD \?L63
	GRTR? LEN,1 /?L60
?L63:	ZERO? QUOTE-FLAG /?L64
	EQUAL? LEN,2 \?L64
	EQUAL? NW,W?$QUOTE /?L60
?L64:	GRTR? LEN,2 \?L59
	EQUAL? NW,W?$COMMA,W?AND \?L59
?L60:	SET 'DIR,VAL
	EQUAL? NW,W?$COMMA,W?AND \?L65
	ADD PTR,P-LEXELEN >STACK
	PUT P-LEXV,STACK,W?THEN
?L65:	GRTR? LEN,2 /?L96
	SET 'QUOTE-FLAG,0
	JUMP ?L38
?L59:	CALL WT?,WORD,PS?VERB,P1?VERB >VAL
	ZERO? VAL /?L71
	ZERO? VERB /?L72
	EQUAL? VERB,ACT?WHAT \?L71
?L72:	SET 'VERB,VAL
	PUT P-ITBL,P-VERB,VAL
	PUT P-ITBL,P-VERBN,P-VTBL
	PUT P-VTBL,0,WORD
	MUL PTR,2 >STACK
	ADD STACK,2 >NUM
	GETB P-LEXV,NUM >STACK
	PUTB P-VTBL,2,STACK
	ADD NUM,1 >STACK
	GETB P-LEXV,STACK >STACK
	PUTB P-VTBL,3,STACK
	JUMP ?L96
?L71:	CALL WT?,WORD,PS?PREPOSITION,0 >VAL
	ZERO? VAL \?L74
	EQUAL? WORD,W?ALL,W?ONE,W?A /?L75
	CALL WT?,WORD,PS?ADJECTIVE >STACK
	ZERO? STACK \?L75
	CALL WT?,WORD,PS?OBJECT >STACK
	ZERO? STACK /?L73
?L75:	SET 'VAL,0
?L74:	GRTR? P-LEN,0 \?L76
	ADD PTR,P-LEXELEN >STACK
	GET P-LEXV,STACK >STACK
	EQUAL? STACK,W?OF \?L76
	EQUAL? VERB,ACT?ACCUSE /?L76
	ZERO? VAL \?L109
	EQUAL? WORD,W?ALL,W?ONE,W?A \?L96
?L76:	ZERO? VAL /?L78
?L109:	ZERO? P-LEN /?L79
	ADD PTR,2 >STACK
	GET P-LEXV,STACK >STACK
	EQUAL? STACK,W?THEN,W?$PERIOD \?L78
?L79:	LESS? P-NCN,2 \?L96
	PUT P-ITBL,P-PREP1,VAL
	PUT P-ITBL,P-PREP1N,WORD
	JUMP ?L96
?L78:	EQUAL? P-NCN,2 \?L83
	PRINTI "There were more than two nouns in that sentence."
	CRLF
	RFALSE
?L83:	INC 'P-NCN
	CALL CLAUSE,PTR,VAL,WORD >PTR
	ZERO? PTR /FALSE
	LESS? PTR,0 \?L96
	SET 'QUOTE-FLAG,0
	JUMP ?L38
?L73:	EQUAL? WORD,W?CAREFULLY,W?QUIETLY /?L93
	EQUAL? WORD,W?SLOWLY,W?QUICKLY,W?BRIEFLY \?L92
?L93:	SET 'P-ADVERB,WORD
	JUMP ?L96
?L92:	CALL WT?,WORD,PS?BUZZ-WORD >STACK
	ZERO? STACK \?L96
	CALL CANT-USE,PTR
	RFALSE
?L41:	CALL UNKNOWN-WORD,PTR
	RFALSE
?L96:	SET 'LW,WORD
	ADD PTR,P-LEXELEN >PTR
	JUMP ?L37
?L38:	ZERO? DIR /?L97
	SET 'PRSA,V?WALK
	SET 'PRSO,DIR
	RTRUE
?L97:	ZERO? P-OFLAG /?L100
	CALL ORPHAN-MERGE
?L100:	GET P-ITBL,P-VERB >STACK
	ZERO? STACK \?L103
	PUT P-ITBL,P-VERB,ACT?CALL
?L103:	CALL SYNTAX-CHECK >STACK
	ZERO? STACK /FALSE
	CALL SNARF-OBJECTS >STACK
	ZERO? STACK /FALSE
	CALL TAKE-CHECK >STACK
	ZERO? STACK /FALSE
	CALL MANY-CHECK >STACK
	ZERO? STACK \TRUE
	RFALSE

	.FUNCT WT?,PTR,BIT,B1=5,OFFSET=P-P1OFF,TYP
	GETB PTR,P-PSOFF >TYP
	BTST TYP,BIT \FALSE
	GRTR? B1,4 /TRUE
	BAND TYP,P-P1BITS >TYP
	EQUAL? TYP,B1 /?L6
	INC 'OFFSET
?L6:	GETB PTR,OFFSET >STACK
	RSTACK

	.FUNCT CLAUSE,PTR,VAL,WORD,OFF,NUM,ANDFLG=0,FIRST??=1,NW,LW=0
	SUB P-NCN,1 >STACK
	MUL STACK,2 >OFF
	ZERO? VAL /?L1
	ADD P-PREP1,OFF >NUM
	PUT P-ITBL,NUM,VAL
	ADD NUM,1 >STACK
	PUT P-ITBL,STACK,WORD
	ADD PTR,P-LEXELEN >PTR
	JUMP ?L3
?L1:	INC 'P-LEN
?L3:	ZERO? P-LEN \?L4
	DEC 'P-NCN
	RETURN -1
?L4:	ADD P-NC1,OFF >NUM
	MUL PTR,2 >STACK
	ADD P-LEXV,STACK >STACK
	PUT P-ITBL,NUM,STACK
	GET P-LEXV,PTR >STACK
	EQUAL? STACK,W?THE,W?A,W?AN \?L7
	GET P-ITBL,NUM >STACK
	ADD STACK,4 >STACK
	PUT P-ITBL,NUM,STACK
?L7:	DLESS? 'P-LEN,0 \?L12
	MUL PTR,2 >STACK
	ADD P-LEXV,STACK >STACK
	ADD NUM,1 >STACK
	PUT P-ITBL,STACK,STACK
	RETURN -1
?L12:	GET P-LEXV,PTR >WORD
	ZERO? WORD \?L17
	CALL NUMBER?,PTR >WORD
	ZERO? WORD /?L15
?L17:	ZERO? P-LEN \?L18
	SET 'NW,0
	JUMP ?L20
?L18:	ADD PTR,P-LEXELEN >STACK
	GET P-LEXV,STACK >NW
?L20:	EQUAL? WORD,W?OF \?L21
	GET P-ITBL,P-VERB >STACK
	EQUAL? STACK,ACT?ACCUSE \?L21
	PUT P-LEXV,PTR,W?WITH
	SET 'WORD,W?WITH
?L21:	EQUAL? WORD,W?$PERIOD \?L24
	EQUAL? LW,W?MRS,W?MR,W?MS \?L24
	SET 'LW,0
	JUMP ?L44
?L24:	EQUAL? WORD,W?AND,W?$COMMA \?L26
	SET 'ANDFLG,1
	JUMP ?L44
?L26:	EQUAL? WORD,W?ALL,W?ONE \?L27
	EQUAL? NW,W?OF \?L44
	DEC 'P-LEN
	ADD PTR,P-LEXELEN >PTR
	JUMP ?L44
?L27:	EQUAL? WORD,W?THEN,W?$PERIOD /?L32
	CALL WT?,WORD,PS?PREPOSITION >STACK
	ZERO? STACK /?L31
	ZERO? FIRST?? \?L31
?L32:	INC 'P-LEN
	MUL PTR,2 >STACK
	ADD P-LEXV,STACK >STACK
	ADD NUM,1 >STACK
	PUT P-ITBL,STACK,STACK
	SUB PTR,P-LEXELEN >STACK
	RSTACK
?L31:	CALL WT?,WORD,PS?OBJECT >STACK
	ZERO? STACK /?L33
	CALL WT?,WORD,PS?ADJECTIVE,P1?ADJECTIVE >STACK
	ZERO? STACK /?L34
	ZERO? NW /?L34
	CALL WT?,NW,PS?OBJECT >STACK
	ZERO? STACK \?L44
?L34:	ZERO? ANDFLG \?L36
	EQUAL? NW,W?BUT,W?EXCEPT,W?AND /?L36
	EQUAL? NW,W?$COMMA /?L36
	ADD PTR,2 >STACK
	MUL STACK,2 >STACK
	ADD P-LEXV,STACK >STACK
	ADD NUM,1 >STACK
	PUT P-ITBL,STACK,STACK
	RETURN PTR
?L36:	SET 'ANDFLG,0
	JUMP ?L44
?L33:	CALL WT?,WORD,PS?ADJECTIVE >STACK
	ZERO? STACK \?L44
	CALL WT?,WORD,PS?BUZZ-WORD >STACK
	ZERO? STACK \?L44
	ZERO? ANDFLG /?L40
	CALL WT?,WORD,PS?DIRECTION >STACK
	ZERO? STACK \?L41
	CALL WT?,WORD,PS?VERB >STACK
	ZERO? STACK /?L40
?L41:	SUB PTR,4 >PTR
	ADD PTR,2 >STACK
	PUT P-LEXV,STACK,W?THEN
	ADD P-LEN,2 >P-LEN
	JUMP ?L44
?L40:	CALL WT?,WORD,PS?PREPOSITION >STACK
	ZERO? STACK \?L44
	CALL CANT-USE,PTR
	RFALSE
?L15:	CALL UNKNOWN-WORD,PTR
	RFALSE
?L44:	SET 'LW,WORD
	SET 'FIRST??,0
	ADD PTR,P-LEXELEN >PTR
	JUMP ?L7

	.FUNCT NUMBER?,PTR,CNT,BPTR,CHR,SUM=0,TIM=0
	MUL PTR,2 >STACK
	ADD P-LEXV,STACK >STACK
	GETB STACK,2 >CNT
	MUL PTR,2 >STACK
	ADD P-LEXV,STACK >STACK
	GETB STACK,3 >BPTR
?L1:	DLESS? 'CNT,0 /?L2
	GETB P-INBUF,BPTR >CHR
	EQUAL? CHR,58 \?L6
	SET 'TIM,SUM
	SET 'SUM,0
	JUMP ?L10
?L6:	GRTR? SUM,10000 /FALSE
	LESS? CHR,58 \FALSE
	GRTR? CHR,47 \FALSE
	SUB CHR,48 >STACK
	MUL SUM,10 >STACK
	ADD STACK,STACK >SUM
?L10:	INC 'BPTR
	JUMP ?L1
?L2:	PUT P-LEXV,PTR,W?INTNUM
	GRTR? SUM,1000 /FALSE
	ZERO? TIM /?L13
	LESS? TIM,8 \?L14
	ADD TIM,12 >TIM
	JUMP ?L16
?L14:	GRTR? TIM,23 /FALSE
?L16:	MUL TIM,60 >STACK
	ADD SUM,STACK >SUM
?L13:	SET 'P-NUMBER,SUM
	RETURN W?INTNUM

	.FUNCT ORPHAN-MERGE,CNT=-1,TEMP,VERB,BEG,END,ADJ=0,WRD
	SET 'P-OFLAG,0
	GET P-ITBL,P-VERB >VERB
	ZERO? VERB /?L1
	GET P-OTBL,P-VERB >STACK
	EQUAL? VERB,STACK \FALSE
?L1:	EQUAL? P-NCN,2 /FALSE
	GET P-OTBL,P-NC1 >STACK
	EQUAL? STACK,1 \?L4
	GET P-ITBL,P-PREP1 >TEMP
	GET P-OTBL,P-PREP1 >STACK
	EQUAL? TEMP,STACK /?L7
	ZERO? TEMP \FALSE
?L7:	GET P-ITBL,P-NC1 >STACK
	PUT P-OTBL,P-NC1,STACK
	GET P-ITBL,P-NC1L >STACK
	PUT P-OTBL,P-NC1L,STACK
	JUMP ?L19
?L4:	GET P-OTBL,P-NC2 >STACK
	EQUAL? STACK,1 \?L9
	GET P-ITBL,P-PREP1 >TEMP
	GET P-OTBL,P-PREP2 >STACK
	EQUAL? TEMP,STACK /?L12
	ZERO? TEMP \FALSE
?L12:	GET P-ITBL,P-NC1 >STACK
	PUT P-OTBL,P-NC2,STACK
	GET P-ITBL,P-NC1L >STACK
	PUT P-OTBL,P-NC2L,STACK
	SET 'P-NCN,2
	JUMP ?L19
?L9:	ZERO? P-ACLAUSE /?L19
	EQUAL? P-NCN,1 /?L15
	SET 'P-ACLAUSE,0
	RFALSE
?L15:	GET P-ITBL,P-NC1 >BEG
	GET P-ITBL,P-NC1L >END
?L18:	EQUAL? BEG,END \?L20
	ZERO? ADJ /?L22
	CALL ACLAUSE-WIN,ADJ
	JUMP ?L19
?L22:	SET 'P-ACLAUSE,0
	RFALSE
?L20:	ZERO? ADJ \?L25
	GET BEG,0 >WRD
	GETB WRD,P-PSOFF >STACK
	BTST STACK,PS?ADJECTIVE \?L25
	SET 'ADJ,WRD
	JUMP ?L30
?L25:	GETB WRD,P-PSOFF >STACK
	BTST STACK,PS?OBJECT /?L27
	EQUAL? WRD,W?ONE \?L30
?L27:	EQUAL? WRD,P-ANAM,W?ONE \FALSE
	CALL ACLAUSE-WIN,ADJ
	JUMP ?L19
?L30:	ADD BEG,P-WORDLEN >BEG
	JUMP ?L18
?L19:	IGRTR? 'CNT,P-ITBLLEN \?L35
	SET 'P-MERGED,1
	RTRUE
?L35:	GET P-OTBL,CNT >STACK
	PUT P-ITBL,CNT,STACK
	JUMP ?L19

	.FUNCT ACLAUSE-WIN,ADJ
	SET 'P-CCSRC,P-OTBL
	ADD P-ACLAUSE,1 >STACK
	CALL CLAUSE-COPY,P-ACLAUSE,STACK,ADJ
	GET P-OTBL,P-NC2 >STACK
	ZERO? STACK /?L1
	SET 'P-NCN,2
?L1:	SET 'P-ACLAUSE,0
	RTRUE

	.FUNCT WORD-PRINT,CNT,BUF
?L1:	DLESS? 'CNT,0 /TRUE
	GETB P-INBUF,BUF >STACK
	PRINTC STACK
	INC 'BUF
	JUMP ?L1

	.FUNCT UNKNOWN-WORD,PTR,BUF,?TMP
	PRINTI "The word '"
	MUL PTR,2 >BUF
	ADD P-LEXV,BUF >STACK
	GETB STACK,2 >?TMP
	ADD P-LEXV,BUF >STACK
	GETB STACK,3 >STACK
	CALL WORD-PRINT,?TMP,STACK
	PRINTI "' isn't in your vocabulary."
	CRLF
	SET 'QUOTE-FLAG,0
	SET 'P-OFLAG,0
	RETURN P-OFLAG

	.FUNCT CANT-USE,PTR,BUF,?TMP
	PRINTI "The word '"
	MUL PTR,2 >BUF
	ADD P-LEXV,BUF >STACK
	GETB STACK,2 >?TMP
	ADD P-LEXV,BUF >STACK
	GETB STACK,3 >STACK
	CALL WORD-PRINT,?TMP,STACK
	PRINTI "' can't be used in that sense."
	CRLF
	SET 'QUOTE-FLAG,0
	SET 'P-OFLAG,0
	RETURN P-OFLAG

	.FUNCT SYNTAX-CHECK,SYN,LEN,NUM,OBJ,DRIVE1=0,DRIVE2=0,PREP,VERB,TMP
	GET P-ITBL,P-VERB >VERB
	ZERO? VERB \?L1
	PRINTI "There's no verb in that sentence!"
	CRLF
	RFALSE
?L1:	SUB 255,VERB >STACK
	GET VERBS,STACK >SYN
	GETB SYN,0 >LEN
	INC 'SYN
?L6:	GETB SYN,P-SBITS >STACK
	BAND STACK,P-SONUMS >NUM
	LESS? NUM,1 /?L8
	ZERO? P-NCN \?L8
	GET P-ITBL,P-PREP1 >PREP
	ZERO? PREP /?L10
	GETB SYN,P-SPREP1 >STACK
	EQUAL? PREP,STACK \?L8
?L10:	SET 'DRIVE1,SYN
	JUMP ?L14
?L8:	GET P-ITBL,P-PREP1 >STACK
	GETB SYN,P-SPREP1 >STACK
	EQUAL? STACK,STACK \?L14
	EQUAL? NUM,2 \?L12
	EQUAL? P-NCN,1 \?L12
	SET 'DRIVE2,SYN
	JUMP ?L14
?L12:	GET P-ITBL,P-PREP2 >STACK
	GETB SYN,P-SPREP2 >STACK
	EQUAL? STACK,STACK \?L14
	CALL SYNTAX-FOUND,SYN
	RTRUE
?L14:	DLESS? 'LEN,1 \?L17
	ZERO? DRIVE1 \?L49
	ZERO? DRIVE2 \?L7
	PRINTI "That last sentence didn't make sense."
	CRLF
	RFALSE
?L17:	ADD SYN,P-SYNLEN >SYN
	JUMP ?L6
?L7:	ZERO? DRIVE1 /?L26
?L49:	GETB DRIVE1,P-SPREP1 >STACK
	GETB DRIVE1,P-SLOC1 >STACK
	GETB DRIVE1,P-SFWIM1 >STACK
	CALL GWIM,STACK,STACK,STACK >OBJ
	ZERO? OBJ /?L26
	PUT P-PRSO,P-MATCHLEN,1
	PUT P-PRSO,1,OBJ
	CALL SYNTAX-FOUND,DRIVE1 >STACK
	RSTACK
?L26:	ZERO? DRIVE2 /?L28
	GETB DRIVE2,P-SPREP2 >STACK
	GETB DRIVE2,P-SLOC2 >STACK
	GETB DRIVE2,P-SFWIM2 >STACK
	CALL GWIM,STACK,STACK,STACK >OBJ
	ZERO? OBJ /?L28
	PUT P-PRSI,P-MATCHLEN,1
	PUT P-PRSI,1,OBJ
	CALL SYNTAX-FOUND,DRIVE2 >STACK
	RSTACK
?L28:	EQUAL? VERB,ACT?FIND,ACT?WHAT \?L29
	PRINTI "That question cannot be answered."
	CRLF
	RFALSE
?L29:	CALL ORPHAN,DRIVE1,DRIVE2
	PRINTI "What do you want to "
	GET P-OTBL,P-VERBN >TMP
	ZERO? TMP \?L35
	PRINTI "tell"
	JUMP ?L40
?L35:	GETB P-VTBL,2 >STACK
	ZERO? STACK \?L39
	GET TMP,0 >STACK
	PRINTB STACK
	JUMP ?L40
?L39:	GETB TMP,3 >STACK
	GETB TMP,2 >STACK
	CALL WORD-PRINT,STACK,STACK
	PUTB P-VTBL,2,0
?L40:	ZERO? DRIVE2 /?L41
	CALL CLAUSE-PRINT,P-NC1,P-NC1L
?L41:	SET 'P-OFLAG,1
	ZERO? DRIVE1 /?L44
	GETB DRIVE1,P-SPREP1 >STACK
	JUMP ?L46
?L44:	GETB DRIVE2,P-SPREP2 >STACK
?L46:	CALL PREP-PRINT,STACK
	PRINTI "?"
	CRLF
	RFALSE

	.FUNCT ORPHAN,D1,D2,CNT=-1
	PUT P-OCLAUSE,P-MATCHLEN,0
	SET 'P-CCSRC,P-ITBL
?L1:	IGRTR? 'CNT,P-ITBLLEN /?L2
	GET P-ITBL,CNT >STACK
	PUT P-OTBL,CNT,STACK
	JUMP ?L1
?L2:	EQUAL? P-NCN,2 \?L6
	CALL CLAUSE-COPY,P-NC2,P-NC2L
?L6:	LESS? P-NCN,1 /?L9
	CALL CLAUSE-COPY,P-NC1,P-NC1L
?L9:	ZERO? D1 /?L12
	GETB D1,P-SPREP1 >STACK
	PUT P-OTBL,P-PREP1,STACK
	PUT P-OTBL,P-NC1,1
	RTRUE
?L12:	ZERO? D2 /FALSE
	GETB D2,P-SPREP2 >STACK
	PUT P-OTBL,P-PREP2,STACK
	PUT P-OTBL,P-NC2,1
	RTRUE

	.FUNCT CLAUSE-PRINT,BPTR,EPTR,THE?=1
	GET P-ITBL,EPTR >STACK
	GET P-ITBL,BPTR >STACK
	CALL BUFFER-PRINT,STACK,STACK,THE? >STACK
	RSTACK

	.FUNCT BUFFER-PRINT,BEG,END,CP,NOSP=0,WRD,FIRST??=1,PN=0
?L1:	EQUAL? BEG,END /TRUE
	ZERO? NOSP /?L6
	SET 'NOSP,0
	JUMP ?L8
?L6:	PRINTI " "
?L8:	GET BEG,0 >WRD
	EQUAL? WRD,W?$PERIOD \?L11
	SET 'NOSP,1
	JUMP ?L24
?L11:	EQUAL? WRD,W?MRS \?L13
	PRINTI "Mrs."
	SET 'PN,1
	JUMP ?L24
?L13:	EQUAL? WRD,W?MS \?L16
	PRINTI "Ms."
	SET 'PN,1
	JUMP ?L24
?L16:	EQUAL? WRD,W?MR \?L19
	PRINTI "Mr."
	SET 'PN,1
	JUMP ?L24
?L19:	EQUAL? WRD,W?BAXTER,W?GEORGE,W?ROBNER /?L23
	EQUAL? WRD,W?MCNABB,W?ROURKE,W?DUNBAR /?L23
	EQUAL? WRD,W?STEVEN,W?STEVE,W?DUFFY \?L22
?L23:	CALL CAPITALIZE,BEG
	SET 'PN,1
	JUMP ?L24
?L22:	ZERO? FIRST?? /?L25
	ZERO? PN \?L25
	ZERO? CP /?L25
	PRINTI "the "
?L25:	ZERO? P-OFLAG /?L30
	PRINTB WRD
	JUMP ?L33
?L30:	EQUAL? WRD,W?IT \?L32
	EQUAL? P-IT-LOC,HERE \?L32
	PRINTD P-IT-OBJECT
	JUMP ?L33
?L32:	GETB BEG,3 >STACK
	GETB BEG,2 >STACK
	CALL WORD-PRINT,STACK,STACK
?L33:	SET 'FIRST??,0
?L24:	ADD BEG,P-WORDLEN >BEG
	JUMP ?L1

	.FUNCT CAPITALIZE,PTR
	GETB PTR,3 >STACK
	GETB P-INBUF,STACK >STACK
	SUB STACK,32 >STACK
	PRINTC STACK
	GETB PTR,3 >STACK
	INC 'STACK
	GETB PTR,2 >STACK
	DEC 'STACK
	CALL WORD-PRINT,STACK,STACK >STACK
	RSTACK

	.FUNCT PREP-PRINT,PREP,WRD
	ZERO? PREP /FALSE
	PRINTI " "
	CALL PREP-FIND,PREP >WRD
	EQUAL? WRD,W?AGAINST \?L5
	PRINTI "against"
	RTRUE
?L5:	PRINTB WRD
	RTRUE

	.FUNCT CLAUSE-COPY,BPTR,EPTR,INSERT=0,BEG,END
	GET P-CCSRC,BPTR >BEG
	GET P-CCSRC,EPTR >END
	GET P-OCLAUSE,P-MATCHLEN >STACK
	MUL STACK,P-LEXELEN >STACK
	ADD STACK,2 >STACK
	ADD P-OCLAUSE,STACK >STACK
	PUT P-OTBL,BPTR,STACK
?L1:	EQUAL? BEG,END \?L3
	GET P-OCLAUSE,P-MATCHLEN >STACK
	MUL STACK,P-LEXELEN >STACK
	ADD STACK,2 >STACK
	ADD P-OCLAUSE,STACK >STACK
	PUT P-OTBL,EPTR,STACK
	RTRUE
?L3:	ZERO? INSERT /?L6
	GET BEG,0 >STACK
	EQUAL? P-ANAM,STACK \?L6
	CALL CLAUSE-ADD,INSERT
?L6:	GET BEG,0 >STACK
	CALL CLAUSE-ADD,STACK
	ADD BEG,P-WORDLEN >BEG
	JUMP ?L1

	.FUNCT CLAUSE-ADD,WRD,PTR
	GET P-OCLAUSE,P-MATCHLEN >STACK
	ADD STACK,2 >PTR
	SUB PTR,1 >STACK
	PUT P-OCLAUSE,STACK,WRD
	PUT P-OCLAUSE,PTR,0
	PUT P-OCLAUSE,P-MATCHLEN,PTR
	RTRUE

	.FUNCT PREP-FIND,PREP,CNT=0,SIZE
	GET PREPOSITIONS,0 >STACK
	MUL STACK,2 >SIZE
?L1:	IGRTR? 'CNT,SIZE /FALSE
	GET PREPOSITIONS,CNT >STACK
	EQUAL? STACK,PREP \?L1
	SUB CNT,1 >STACK
	GET PREPOSITIONS,STACK >STACK
	RSTACK

	.FUNCT SYNTAX-FOUND,SYN
	SET 'P-SYNTAX,SYN
	GETB SYN,P-SACTION >PRSA
	RETURN PRSA

	.FUNCT GWIM,GBIT,LBIT,PREP,OBJ
	EQUAL? GBIT,RMUNGBIT \?L1
	RETURN ROOMS
?L1:	SET 'P-GWIMBIT,GBIT
	SET 'P-SLOCBITS,LBIT
	PUT P-MERGE,P-MATCHLEN,0
	CALL GET-OBJECT,P-MERGE,0 >STACK
	ZERO? STACK /?L4
	SET 'P-GWIMBIT,0
	GET P-MERGE,P-MATCHLEN >STACK
	EQUAL? STACK,1 \FALSE
	GET P-MERGE,1 >OBJ
	PRINTI "("
	ZERO? PREP /?L16
	CALL PREP-FIND,PREP >STACK
	PRINTB STACK
	FSET? OBJ,PERSON /?L12
	PRINTI " the "
	JUMP ?L16
?L12:	PRINTI " "
?L16:	PRINTD OBJ
	PRINTI ")"
	CRLF
	RETURN OBJ
?L4:	SET 'P-GWIMBIT,0
	RFALSE

	.FUNCT SNARF-OBJECTS,PTR
	GET P-ITBL,P-NC1 >PTR
	ZERO? PTR /?L5
	GETB P-SYNTAX,P-SLOC1 >P-SLOCBITS
	GET P-ITBL,P-NC1L >STACK
	CALL SNARFEM,PTR,STACK,P-PRSO >STACK
	ZERO? STACK /FALSE
	GET P-BUTS,P-MATCHLEN >STACK
	ZERO? STACK /?L5
	CALL BUT-MERGE,P-PRSO >P-PRSO
?L5:	GET P-ITBL,P-NC2 >PTR
	ZERO? PTR /TRUE
	GETB P-SYNTAX,P-SLOC2 >P-SLOCBITS
	GET P-ITBL,P-NC2L >STACK
	CALL SNARFEM,PTR,STACK,P-PRSI >STACK
	ZERO? STACK /FALSE
	GET P-BUTS,P-MATCHLEN >STACK
	ZERO? STACK /TRUE
	GET P-PRSI,P-MATCHLEN >STACK
	EQUAL? STACK,1 \?L14
	CALL BUT-MERGE,P-PRSO >P-PRSO
	RTRUE
?L14:	CALL BUT-MERGE,P-PRSI >P-PRSI
	RTRUE

	.FUNCT BUT-MERGE,TBL,LEN,BUTLEN,CNT=1,MATCHES=0,OBJ,NTBL
	GET TBL,P-MATCHLEN >LEN
	PUT P-MERGE,P-MATCHLEN,0
?L1:	DLESS? 'LEN,0 /?L2
	GET TBL,CNT >OBJ
	CALL ZMEMQ,OBJ,P-BUTS >STACK
	ZERO? STACK \?L6
	ADD MATCHES,1 >STACK
	PUT P-MERGE,STACK,OBJ
	INC 'MATCHES
?L6:	INC 'CNT
	JUMP ?L1
?L2:	PUT P-MERGE,P-MATCHLEN,MATCHES
	SET 'NTBL,P-MERGE
	SET 'P-MERGE,TBL
	RETURN NTBL

	.FUNCT SNARFEM,PTR,EPTR,TBL,AND=0,BUT=0,LEN,WV,WORD,NW
	SET 'P-GETFLAGS,0
	SET 'P-CSPTR,PTR
	SET 'P-CEPTR,EPTR
	PUT P-BUTS,P-MATCHLEN,0
	PUT TBL,P-MATCHLEN,0
	GET PTR,0 >WORD
?L1:	EQUAL? PTR,EPTR \?L3
?L48:	ZERO? BUT /?L6
	PUSH BUT
	JUMP ?L5
?L6:	PUSH TBL
?L5:	CALL GET-OBJECT,STACK >STACK
	RSTACK
?L3:	GET PTR,P-LEXELEN >NW
	EQUAL? WORD,W?ALL \?L8
	SET 'P-GETFLAGS,P-ALL
	EQUAL? NW,W?OF \?L43
	ADD PTR,P-WORDLEN >PTR
	JUMP ?L43
?L8:	EQUAL? WORD,W?BUT,W?EXCEPT \?L13
	ZERO? BUT /?L17
	PUSH BUT
	JUMP ?L16
?L17:	PUSH TBL
?L16:	CALL GET-OBJECT,STACK >STACK
	ZERO? STACK /FALSE
	SET 'BUT,P-BUTS
	PUT BUT,P-MATCHLEN,0
	JUMP ?L43
?L13:	EQUAL? WORD,W?A,W?ONE \?L18
	ZERO? P-ADJ \?L19
	SET 'P-GETFLAGS,P-ONE
	EQUAL? NW,W?OF \?L43
	ADD PTR,P-WORDLEN >PTR
	JUMP ?L43
?L19:	SET 'P-NAM,P-ONEOBJ
	ZERO? BUT /?L28
	PUSH BUT
	JUMP ?L27
?L28:	PUSH TBL
?L27:	CALL GET-OBJECT,STACK >STACK
	ZERO? STACK /FALSE
	ZERO? NW /TRUE
	JUMP ?L43
?L18:	EQUAL? WORD,W?AND,W?$COMMA \?L31
	EQUAL? NW,W?AND,W?$COMMA /?L31
	ZERO? BUT /?L35
	PUSH BUT
	JUMP ?L34
?L35:	PUSH TBL
?L34:	CALL GET-OBJECT,STACK >STACK
	ZERO? STACK /FALSE
	JUMP ?L43
?L31:	CALL WT?,WORD,PS?BUZZ-WORD >STACK
	ZERO? STACK \?L43
	EQUAL? WORD,W?AND,W?$COMMA /?L43
	EQUAL? WORD,W?OF \?L38
	ZERO? P-GETFLAGS \?L43
	SET 'P-GETFLAGS,P-INHIBIT
	JUMP ?L43
?L38:	CALL WT?,WORD,PS?ADJECTIVE,P1?ADJECTIVE >WV
	ZERO? WV /?L42
	ZERO? P-ADJ \?L42
	SET 'P-ADJ,WV
	SET 'P-ADJN,WORD
	JUMP ?L43
?L42:	CALL WT?,WORD,PS?OBJECT,P1?OBJECT >STACK
	ZERO? STACK /?L43
	SET 'P-NAM,WORD
	SET 'P-ONEOBJ,WORD
?L43:	EQUAL? PTR,EPTR /?L48
	ADD PTR,P-WORDLEN >PTR
	SET 'WORD,NW
	JUMP ?L1

	.FUNCT GET-OBJECT,TBL,VRB=1,BITS,LEN,XBITS,TLEN,GCHECK=0,OLEN=0
	SET 'XBITS,P-SLOCBITS
	GET TBL,P-MATCHLEN >TLEN
	BTST P-GETFLAGS,P-INHIBIT /TRUE
	ZERO? P-NAM \?L7
	ZERO? P-ADJ /?L4
	CALL WT?,P-ADJN,PS?OBJECT,P1?OBJECT >STACK
	ZERO? STACK /?L4
	SET 'P-NAM,P-ADJN
	SET 'P-ADJ,0
?L4:	ZERO? P-NAM \?L7
	ZERO? P-ADJ \?L7
	EQUAL? P-GETFLAGS,P-ALL /?L82
	ZERO? P-GWIMBIT \?L7
	ZERO? VRB /FALSE
	PRINTI "Your last sentence seemed to be missing a noun."
	CRLF
	RFALSE
?L7:	EQUAL? P-GETFLAGS,P-ALL \?L17
?L82:	ZERO? P-SLOCBITS \?L15
?L17:	SET 'P-SLOCBITS,-1
?L15:	SET 'P-TABLE,TBL
?L19:	ZERO? GCHECK /?L21
	CALL GLOBAL-CHECK,TBL
	JUMP ?L23
?L21:	ZERO? LIT /?L24
	CALL DO-SL,HERE,SOG,SIR
?L24:	CALL DO-SL,PLAYER,SH,SC
?L23:	GET TBL,P-MATCHLEN >STACK
	SUB STACK,TLEN >LEN
	BTST P-GETFLAGS,P-ALL /?L80
	BTST P-GETFLAGS,P-ONE \?L29
	ZERO? LEN /?L29
	EQUAL? LEN,1 /?L30
	RANDOM LEN >STACK
	GET TBL,STACK >STACK
	PUT TBL,1,STACK
	PRINTI "(How about the "
	GET TBL,1 >STACK
	PRINTD STACK
	PRINTI "?)"
	CRLF
?L30:	PUT TBL,P-MATCHLEN,1
	JUMP ?L80
?L29:	GRTR? LEN,1 /?L38
	ZERO? LEN \?L80
	EQUAL? P-SLOCBITS,-1 /?L37
?L38:	EQUAL? P-SLOCBITS,-1 \?L39
	SET 'P-SLOCBITS,XBITS
	SET 'OLEN,LEN
	GET TBL,P-MATCHLEN >STACK
	SUB STACK,LEN >STACK
	PUT TBL,P-MATCHLEN,STACK
	JUMP ?L19
?L39:	ZERO? LEN \?L42
	SET 'LEN,OLEN
?L42:	ZERO? VRB /?L50
	ZERO? P-NAM /?L45
	CALL WHICH-PRINT,TLEN,LEN,TBL
	EQUAL? TBL,P-PRSO \?L47
	SET 'P-ACLAUSE,P-NC1
	JUMP ?L49
?L47:	SET 'P-ACLAUSE,P-NC2
?L49:	SET 'P-AADJ,P-ADJ
	SET 'P-ANAM,P-NAM
	CALL ORPHAN,0,0
	SET 'P-OFLAG,1
	JUMP ?L50
?L45:	ZERO? VRB /?L50
	PRINTI "You must supply a verb!"
	CRLF
?L50:	SET 'P-NAM,0
	SET 'P-ADJ,0
	RFALSE
?L37:	ZERO? LEN \?L80
	ZERO? GCHECK /?L54
	ZERO? VRB /?L76
	ZERO? LIT /?L57
	PRINTI "You can't see any"
	ZERO? P-OFLAG /?L61
	ZERO? P-ADJ /?L63
	PRINTI " "
	PRINTB P-ADJN
?L63:	ZERO? P-NAM /?L73
	PRINTI " "
	PRINTB P-NAM
	JUMP ?L73
?L61:	CALL BUFFER-PRINT,P-CSPTR,P-CEPTR,0
?L73:	PRINTI " here."
	CRLF
	JUMP ?L76
?L57:	PRINTI "It's too dark to see."
	CRLF
?L76:	SET 'P-NAM,0
	SET 'P-ADJ,0
	RFALSE
?L54:	ZERO? LEN \?L80
	SET 'GCHECK,1
	JUMP ?L19
?L80:	SET 'P-ADJ,0
	SET 'P-NAM,0
	SET 'P-SLOCBITS,XBITS
	RTRUE

	.FUNCT WHICH-PRINT,TLEN,LEN,TBL,OBJ,RLEN
	SET 'RLEN,LEN
	PRINTI "Which"
	ZERO? P-OFLAG \?L5
	ZERO? P-MERGED /?L3
?L5:	PRINTI " "
	PRINTB P-NAM
	JUMP ?L9
?L3:	EQUAL? TBL,P-PRSO \?L8
	CALL CLAUSE-PRINT,P-NC1,P-NC1L,0
	JUMP ?L9
?L8:	CALL CLAUSE-PRINT,P-NC2,P-NC2L,0
?L9:	PRINTI " do you mean, "
?L12:	INC 'TLEN
	GET TBL,TLEN >OBJ
	FSET? OBJ,PERSON /?L14
	PRINTI "the "
?L14:	PRINTD OBJ
	EQUAL? LEN,2 \?L21
	EQUAL? RLEN,2 /?L23
	PRINTI ","
?L23:	PRINTI " or "
	JUMP ?L30
?L21:	GRTR? LEN,2 \?L30
	PRINTI ", "
?L30:	DLESS? 'LEN,1 \?L12
	PRINTR "?"

	.FUNCT GLOBAL-CHECK,TBL,LEN,RMG,RMGL,CNT=0,OBJ,OBITS,FOO
	GET TBL,P-MATCHLEN >LEN
	SET 'OBITS,P-SLOCBITS
	GETPT HERE,P?GLOBAL >RMG
	ZERO? RMG /?L4
	PTSIZE RMG >STACK
	SUB STACK,1 >RMGL
?L3:	GETB RMG,CNT >OBJ
	CALL THIS-IT?,OBJ,TBL >STACK
	ZERO? STACK /?L5
	CALL OBJ-FOUND,OBJ,TBL
?L5:	IGRTR? 'CNT,RMGL \?L3
?L4:	GETPT HERE,P?PSEUDO >RMG
	ZERO? RMG /?L15
	PTSIZE RMG >STACK
	DIV STACK,4 >STACK
	SUB STACK,1 >RMGL
	SET 'CNT,0
?L14:	MUL CNT,2 >STACK
	GET RMG,STACK >STACK
	EQUAL? P-NAM,STACK \?L16
	MUL CNT,2 >STACK
	INC 'STACK
	GET RMG,STACK >STACK
	PUTP PSEUDO-OBJECT,P?ACTION,STACK
	GETPT PSEUDO-OBJECT,P?ACTION >STACK
	SUB STACK,5 >FOO
	GET P-NAM,0 >STACK
	PUT FOO,0,STACK
	GET P-NAM,1 >STACK
	PUT FOO,1,STACK
	CALL OBJ-FOUND,PSEUDO-OBJECT,TBL
	JUMP ?L15
?L16:	IGRTR? 'CNT,RMGL \?L14
?L15:	GET TBL,P-MATCHLEN >STACK
	EQUAL? STACK,LEN \FALSE
	SET 'P-SLOCBITS,-1
	SET 'P-TABLE,TBL
	CALL DO-SL,GLOBAL-OBJECTS,1,1
	SET 'P-SLOCBITS,OBITS
	GET TBL,P-MATCHLEN >STACK
	ZERO? STACK \FALSE
	EQUAL? PRSA,V?LOOK-INSIDE,V?SEARCH /?L27
	EQUAL? PRSA,V?EXAMINE,V?FIND,V?THROUGH \FALSE
?L27:	CALL DO-SL,ROOMS,1,1 >STACK
	RSTACK

	.FUNCT DO-SL,OBJ,BIT1,BIT2,BITS
	ADD BIT1,BIT2 >STACK
	BTST P-SLOCBITS,STACK \?L1
	CALL SEARCH-LIST,OBJ,P-TABLE,P-SRCALL >STACK
	RSTACK
?L1:	BTST P-SLOCBITS,BIT1 \?L4
	CALL SEARCH-LIST,OBJ,P-TABLE,P-SRCTOP >STACK
	RSTACK
?L4:	BTST P-SLOCBITS,BIT2 \TRUE
	CALL SEARCH-LIST,OBJ,P-TABLE,P-SRCBOT >STACK
	RSTACK

	.FUNCT SEARCH-LIST,OBJ,TBL,LVL,FLS,NOBJ
	FIRST? OBJ >OBJ \FALSE
?L3:	EQUAL? LVL,P-SRCBOT /?L5
	GETPT OBJ,P?SYNONYM >STACK
	ZERO? STACK /?L5
	CALL THIS-IT?,OBJ,TBL >STACK
	ZERO? STACK /?L5
	CALL OBJ-FOUND,OBJ,TBL
?L5:	EQUAL? LVL,P-SRCTOP \?L10
	FSET? OBJ,SEARCHBIT /?L10
	FSET? OBJ,SURFACEBIT \?L8
?L10:	FIRST? OBJ >NOBJ \?L8
	FSET? OBJ,OPENBIT /?L11
	FSET? OBJ,TRANSBIT \?L8
?L11:	FSET? OBJ,SURFACEBIT \?L12
	PUSH P-SRCALL
	JUMP ?L15
?L12:	FSET? OBJ,SEARCHBIT \?L14
	PUSH P-SRCALL
	JUMP ?L15
?L14:	PUSH P-SRCTOP
?L15:	CALL SEARCH-LIST,OBJ,TBL,STACK >FLS
?L8:	NEXT? OBJ >OBJ /?L3
	RTRUE

	.FUNCT OBJ-FOUND,OBJ,TBL,PTR
	GET TBL,P-MATCHLEN >PTR
	ADD PTR,1 >STACK
	PUT TBL,STACK,OBJ
	ADD PTR,1 >STACK
	PUT TBL,P-MATCHLEN,STACK
	RTRUE

	.FUNCT TAKE-CHECK
	GETB P-SYNTAX,P-SLOC1 >STACK
	CALL ITAKE-CHECK,P-PRSO,STACK >STACK
	ZERO? STACK /FALSE
	GETB P-SYNTAX,P-SLOC2 >STACK
	CALL ITAKE-CHECK,P-PRSI,STACK >STACK
	RSTACK

	.FUNCT ITAKE-CHECK,TBL,BITS,PTR,OBJ,TAKEN
	GET TBL,P-MATCHLEN >PTR
	ZERO? PTR /TRUE
	BTST BITS,STAKE \TRUE
?L3:	DLESS? 'PTR,0 /TRUE
	ADD PTR,1 >STACK
	GET TBL,STACK >OBJ
	EQUAL? OBJ,IT \?L8
	SET 'OBJ,P-IT-OBJECT
?L8:	IN? OBJ,WINNER /?L3
	SET 'PRSO,OBJ
	FSET? OBJ,TRYTAKEBIT \?L13
	SET 'TAKEN,1
	JUMP ?L16
?L13:	CALL ITAKE,0 >STACK
	EQUAL? STACK,1 \?L15
	SET 'TAKEN,0
	JUMP ?L16
?L15:	SET 'TAKEN,1
?L16:	ZERO? TAKEN /?L24
	BTST BITS,SHAVE \?L17
	PRINTI "You don't have the "
	PRINTD OBJ
	PRINTI "."
	CRLF
	RFALSE
?L17:	ZERO? TAKEN \?L3
?L24:	PRINTI "(Taken)"
	CRLF
	JUMP ?L3

	.FUNCT MANY-CHECK,LOSS=0,TMP
	GET P-PRSO,P-MATCHLEN >STACK
	GRTR? STACK,1 \?L1
	GETB P-SYNTAX,P-SLOC1 >STACK
	BTST STACK,SMANY /?L1
	SET 'LOSS,1
	JUMP ?L3
?L1:	GET P-PRSI,P-MATCHLEN >STACK
	GRTR? STACK,1 \?L3
	GETB P-SYNTAX,P-SLOC2 >STACK
	BTST STACK,SMANY /?L3
	SET 'LOSS,2
?L3:	ZERO? LOSS /TRUE
	PRINTI "You can't use multiple "
	EQUAL? LOSS,2 \?L9
	PRINTI "in"
?L9:	PRINTI "direct objects with '"
	GET P-ITBL,P-VERBN >TMP
	ZERO? TMP \?L16
	PRINTI "tell"
	JUMP ?L21
?L16:	ZERO? P-OFLAG /?L20
	GET TMP,0 >STACK
	PRINTB STACK
	JUMP ?L21
?L20:	GETB TMP,3 >STACK
	GETB TMP,2 >STACK
	CALL WORD-PRINT,STACK,STACK
?L21:	PRINTI "'."
	CRLF
	RFALSE

	.FUNCT ZMEMQ,ITM,TBL,SIZE=-1,CNT=1
	ZERO? TBL /FALSE
	LESS? SIZE,0 /?L4
	SET 'CNT,0
	JUMP ?L6
?L4:	GET TBL,0 >SIZE
?L6:	GET TBL,CNT >STACK
	EQUAL? ITM,STACK /TRUE
	IGRTR? 'CNT,SIZE \?L6
	RFALSE

	.FUNCT ZMEMQB,ITM,TBL,SIZE,CNT=0
?L1:	GETB TBL,CNT >STACK
	EQUAL? ITM,STACK /TRUE
	IGRTR? 'CNT,SIZE \?L1
	RFALSE

	.FUNCT LIT?,RM,OHERE,LIT?1=0
	SET 'P-GWIMBIT,ONBIT
	SET 'OHERE,HERE
	SET 'HERE,RM
	FSET? RM,ONBIT /?L3
	ZERO? ALWAYS-LIT /?L1
?L3:	SET 'LIT?1,1
	JUMP ?L8
?L1:	PUT P-MERGE,P-MATCHLEN,0
	SET 'P-TABLE,P-MERGE
	SET 'P-SLOCBITS,-1
	EQUAL? OHERE,RM \?L5
	CALL DO-SL,WINNER,1,1
?L5:	CALL DO-SL,RM,1,1
	GET P-TABLE,P-MATCHLEN >STACK
	GRTR? STACK,0 \?L8
	SET 'LIT?1,1
?L8:	SET 'HERE,OHERE
	SET 'P-GWIMBIT,0
	RETURN LIT?1

	.FUNCT PRSO-PRINT,PTR
	ZERO? P-MERGED \?L3
	GET P-ITBL,P-NC1 >PTR
	GET PTR,0 >STACK
	EQUAL? STACK,W?IT \?L1
?L3:	PRINTI " "
	PRINTD PRSO
	RTRUE
?L1:	GET P-ITBL,P-NC1L >STACK
	CALL BUFFER-PRINT,PTR,STACK,0 >STACK
	RSTACK

	.FUNCT PRSI-PRINT,PTR
	ZERO? P-MERGED \?L3
	GET P-ITBL,P-NC2 >PTR
	GET PTR,0 >STACK
	EQUAL? STACK,W?IT \?L1
?L3:	PRINTI " "
	PRINTD PRSO
	RTRUE
?L1:	GET P-ITBL,P-NC2L >STACK
	CALL BUFFER-PRINT,PTR,STACK,0 >STACK
	RSTACK

	.FUNCT V-VERBOSE
	SET 'VERBOSE,1
	SET 'SUPER-BRIEF,0
	PRINTR "OK, you will get verbose descriptions."

	.FUNCT V-BRIEF
	SET 'VERBOSE,0
	SET 'SUPER-BRIEF,0
	PRINTR "OK, you will get brief descriptions."

	.FUNCT V-SUPER-BRIEF
	SET 'SUPER-BRIEF,1
	PRINTR "OK, you will get super-brief descriptions. Remember that objects and people are not mentioned; only the name of the place you are in."

	.FUNCT V-LOOK
	CALL DESCRIBE-ROOM,1 >STACK
	ZERO? STACK /FALSE
	CALL DESCRIBE-OBJECTS,1 >STACK
	RSTACK

	.FUNCT V-FIRST-LOOK
	CALL DESCRIBE-ROOM >STACK
	ZERO? STACK /FALSE
	ZERO? SUPER-BRIEF \FALSE
	CALL DESCRIBE-OBJECTS >STACK
	RSTACK

	.FUNCT ROOM-CHECK
	IN? PRSO,ROOMS \FALSE
	EQUAL? PRSO,HERE \?L3
	SET 'PRSO,GLOBAL-ROOM
	RFALSE
?L3:	PRINTR "You aren't in that room!"

	.FUNCT PRE-SEARCH
	CALL ROOM-CHECK >STACK
	ZERO? STACK /FALSE
	RTRUE

	.FUNCT PRE-EXAMINE
	CALL ROOM-CHECK >STACK
	ZERO? STACK \TRUE
	EQUAL? P-ADVERB,W?CAREFULLY \FALSE
	CALL INT-WAIT,3 >STACK
	ZERO? STACK \FALSE
	PRINTI "You never got to finish looking over the "
	PRINTD PRSO
	PRINTR "."

	.FUNCT V-EXAMINE
	IN? PRSO,GLOBAL-OBJECTS \?L1
	CALL NOT-HERE,PRSO
	RTRUE
?L1:	GETP PRSO,P?TEXT >STACK
	ZERO? STACK /?L3
	GETP PRSO,P?TEXT >STACK
	PRINT STACK
	CRLF
	RTRUE
?L3:	FSET? PRSO,CONTBIT /?L7
	FSET? PRSO,DOORBIT \?L6
?L7:	CALL V-LOOK-INSIDE >STACK
	RSTACK
?L6:	FSET? PRSO,PERSON \?L8
	GETP PRSO,P?CHARACTER >STACK
	GET CHARACTER-DESCS,STACK >STACK
	PRINT STACK
	CRLF
	RTRUE
?L8:	PRINTI "There's nothing special about the"
	CALL PRSO-PRINT
	PRINTR "."

	.FUNCT DESCRIBE-ROOM,LOOK?=0,V?,STR
	SET 'V?,LOOK?
	ZERO? V? \?L1
	SET 'V?,VERBOSE
?L1:	FSET? HERE,TOUCHBIT /?L3
	FSET HERE,TOUCHBIT
	SET 'V?,1
?L3:	IN? HERE,ROOMS \?L6
	PRINTD HERE
	CRLF
?L6:	ZERO? LOOK? \?L13
	ZERO? SUPER-BRIEF \?L34
?L13:	LOC WINNER >STACK
	FSET? STACK,VEHBIT \?L14
	PRINTI "(You are "
	LOC WINNER >STACK
	FSET? STACK,SURFACEBIT \?L18
	PRINTI "sitting o"
	JUMP ?L22
?L18:	PRINTI "standing i"
?L22:	PRINTI "n the "
	LOC WINNER >STACK
	PRINTD STACK
	PRINTI ".)"
	CRLF
?L14:	ZERO? V? /?L30
	GETP HERE,P?ACTION >STACK
	CALL STACK,M-LOOK >STACK
	ZERO? STACK \TRUE
	ZERO? V? /?L30
	GETP HERE,P?LDESC >STR
	ZERO? STR /?L30
	PRINT STR
	CRLF
	JUMP ?L33
?L30:	GETP HERE,P?ACTION >STACK
	CALL STACK,M-FLASH >STACK
?L33:	LOC WINNER >STACK
	EQUAL? HERE,STACK /?L34
	LOC WINNER >STACK
	GETP STACK,P?ACTION >STACK
	CALL STACK,M-LOOK >STACK
?L34:	GETP HERE,P?CORRIDOR >STACK
	ZERO? STACK /TRUE
	CALL CORRIDOR-LOOK
	RTRUE

	.FUNCT DESCRIBE-OBJECTS,V?=0
	ZERO? LIT /?L1
	FIRST? HERE >STACK \FALSE
	ZERO? V? \?L5
	SET 'V?,VERBOSE
?L5:	CALL PRINT-CONT,HERE,V?,-1 >STACK
	RSTACK
?L1:	PRINTR "You can't see anything in the dark."

	.FUNCT DESCRIBE-OBJECT,OBJ,V?,LEVEL,STR=0,AV
	ZERO? LEVEL \?L8
	GETP OBJ,P?DESCFCN >STACK
	CALL STACK,M-OBJDESC >STACK
	ZERO? STACK \TRUE
	ZERO? LEVEL \?L8
	FSET? OBJ,TOUCHBIT /?L5
	GETP OBJ,P?FDESC >STR
	ZERO? STR \?L4
?L5:	GETP OBJ,P?LDESC >STR
	ZERO? STR /?L3
?L4:	PRINT STR
	JUMP ?L11
?L3:	ZERO? LEVEL \?L8
	PRINTI "There is a "
	PRINTD OBJ
	PRINTI " here."
	JUMP ?L11
?L8:	GET INDENTS,LEVEL >STACK
	PRINT STACK
	PRINTI "A "
	PRINTD OBJ
?L11:	ZERO? LEVEL \?L16
	LOC WINNER >AV
	ZERO? AV /?L16
	FSET? AV,VEHBIT \?L16
	PRINTI " (outside the "
	PRINTD AV
	PRINTI ")"
?L16:	CRLF
	CALL SEE-INSIDE?,OBJ >STACK
	ZERO? STACK /FALSE
	FIRST? OBJ >STACK \FALSE
	CALL PRINT-CONT,OBJ,V?,LEVEL >STACK
	RSTACK

	.FUNCT PRINT-CONT,OBJ,V?=0,LEVEL=0,Y,1ST?,AV,STR,PV?=0,INV?=0
	FIRST? OBJ >Y \TRUE
	LOC WINNER >AV
	ZERO? AV /?L4
	FSET? AV,VEHBIT /?L6
?L4:	SET 'AV,0
?L6:	SET '1ST?,1
	LOC OBJ >STACK
	EQUAL? WINNER,OBJ,STACK \?L7
	SET 'INV?,1
	JUMP ?L11
?L7:	ZERO? Y \?L12
?L58:	ZERO? 1ST? \?L14
	PUSH 1
	JUMP ?L11
?L14:	PUSH 0
	JUMP ?L11
?L12:	EQUAL? Y,AV \?L16
	SET 'PV?,1
	JUMP ?L24
?L16:	EQUAL? Y,WINNER /?L24
	FSET? Y,INVISIBLE /?L24
	FSET? Y,TOUCHBIT /?L24
	GETP Y,P?FDESC >STR
	ZERO? STR /?L24
	FSET? Y,NDESCBIT /?L19
	SET '1ST?,0
	SET 'LEVEL,0
	PRINT STR
	CRLF
?L19:	CALL SEE-INSIDE?,Y >STACK
	ZERO? STACK /?L24
	LOC Y >STACK
	GETP STACK,P?DESCFCN >STACK
	ZERO? STACK \?L24
	FIRST? Y >STACK \?L24
	CALL PRINT-CONT,Y,V?,0
?L24:	NEXT? Y >Y /?L12
	JUMP ?L58
?L11:	FIRST? OBJ >Y /?L32
?L57:	ZERO? PV? /?L34
	ZERO? AV /?L34
	FIRST? AV >STACK \?L34
	CALL PRINT-CONT,AV,V?,LEVEL
?L34:	ZERO? 1ST? \FALSE
	RTRUE
?L32:	EQUAL? Y,AV,PLAYER /?L53
	FSET? Y,INVISIBLE /?L53
	ZERO? INV? \?L41
	FSET? Y,TOUCHBIT /?L41
	GETP Y,P?FDESC >STACK
	ZERO? STACK \?L53
?L41:	FSET? Y,NDESCBIT /?L42
	ZERO? 1ST? /?L44
	CALL FIRSTER,OBJ,LEVEL >STACK
	ZERO? STACK /?L48
	LESS? LEVEL,0 \?L48
	SET 'LEVEL,0
?L48:	INC 'LEVEL
	SET '1ST?,0
?L44:	CALL DESCRIBE-OBJECT,Y,V?,LEVEL
	JUMP ?L53
?L42:	FIRST? Y >STACK \?L53
	CALL SEE-INSIDE?,Y >STACK
	ZERO? STACK /?L53
	CALL PRINT-CONT,Y,V?,LEVEL
?L53:	NEXT? Y >Y /?L32
	JUMP ?L57

	.FUNCT FIRSTER,OBJ,LEVEL
	EQUAL? OBJ,WINNER \?L1
	PRINTR "You are carrying:"
?L1:	IN? OBJ,ROOMS /FALSE
	GRTR? LEVEL,0 \?L6
	GET INDENTS,LEVEL >STACK
	PRINT STACK
?L6:	FSET? OBJ,SURFACEBIT \?L11
	PRINTI "Sitting on the "
	PRINTD OBJ
	PRINTR " is:"
?L11:	FSET? OBJ,PERSON \?L15
	PRINTD OBJ
	PRINTR " is holding:"
?L15:	PRINTI "The "
	PRINTD OBJ
	PRINTR " contains:"

	.FUNCT V-SCORE,ASK?=1
	PRINTR "You are an amateur inspector, at best."

	.FUNCT V-QUIT,ASK?=1,SCOR
	ZERO? ASK? /?L3
	PRINTI "Do you wish to stop your investigation (Y/N)"
	CALL YES? >STACK
	ZERO? STACK \?L3
	ZERO? ASK? \?L1
?L3:	QUIT
?L1:	PRINTR "Ok."

	.FUNCT YES?
	PRINTI " >"
	READ P-INBUF,P-LEXV
	GETB P-LEXV,P-LEXWORDS >STACK
	ZERO? STACK /FALSE
	GET P-LEXV,1 >STACK
	EQUAL? STACK,W?YES,W?Y \FALSE
	RTRUE

	.FUNCT V-VERSION,CNT=17
	PRINTI "DEADLINE
Infocom interactive fiction - a mystery story
Copyright (c) 1982, 1983 by Infocom, Inc. All rights reserved.
DEADLINE is a registered trademark of Infocom, Inc.
Release "
	GET 0,1 >STACK
	BAND STACK,2047 >STACK
	PRINTN STACK
	PRINTI " / Serial number "
?L5:	IGRTR? 'CNT,23 /?L6
	GETB 0,CNT >STACK
	PRINTC STACK
	JUMP ?L5
?L6:	CRLF
	RTRUE

	.FUNCT V-AGAIN,OBJ
	ZERO? L-PRSO /?L1
	LOC L-PRSO >STACK
	ZERO? STACK \?L1
	SET 'OBJ,L-PRSO
	JUMP ?L2
?L1:	ZERO? L-PRSI /?L3
	LOC L-PRSI >STACK
	ZERO? STACK \?L3
	SET 'OBJ,L-PRSI
	JUMP ?L2
?L3:	SET 'OBJ,0
?L2:	ZERO? OBJ /?L5
	PRINTI "You can't see the "
	PRINTD OBJ
	PRINTI " any more."
	CRLF
	RETURN 2
?L5:	CALL PERFORM,L-PRSA,L-PRSO,L-PRSI >STACK
	RSTACK

	.FUNCT V-RESTORE
	RESTORE \?L1
	PRINTI "Ok."
	CRLF
	CALL V-FIRST-LOOK >STACK
	RSTACK
?L1:	PRINTR "Failed."

	.FUNCT V-SAVE
	SAVE \?L1
	PRINTR "Ok."
?L1:	PRINTR "Failed."

	.FUNCT V-RESTART
	PRINTI "Do you wish to restart your investigation (Y/N)"
	CALL YES? >STACK
	ZERO? STACK /FALSE
	RESTART

	.FUNCT V-WALK-AROUND
	PRINTR "Use directions for movement here."

	.FUNCT GO-NEXT,TBL,VAL
	CALL LKP,HERE,TBL >VAL
	ZERO? VAL /FALSE
	CALL GOTO,VAL >STACK
	RSTACK

	.FUNCT LKP,ITM,TBL,CNT=0,LEN
	GET TBL,0 >LEN
?L1:	IGRTR? 'CNT,LEN /FALSE
	GET TBL,CNT >STACK
	EQUAL? STACK,ITM \?L1
	EQUAL? CNT,LEN /FALSE
	ADD CNT,1 >STACK
	GET TBL,STACK >STACK
	RSTACK

	.FUNCT V-WALK,PT,PTS,STR,OBJ,RM
	EQUAL? PRSO,GLOBAL-CALL \?L1
	CALL PRE-TURN
	RTRUE
?L1:	ZERO? PRSO \?L3
	PRINTR "You can't go that way."
?L3:	GETPT HERE,PRSO >PT
	ZERO? PT /?L6
	PTSIZE PT >PTS
	EQUAL? PTS,UEXIT \?L7
	GETB PT,REXIT >RM
	EQUAL? STAIRS,HERE,RM \?L9
	EQUAL? P-ADVERB,W?QUIETLY,W?SLOWLY \?L9
	PRINTI "The stairs are still quite noisy even when walking up very slowly."
	CRLF
?L9:	CALL GOTO,RM >STACK
	RSTACK
?L7:	EQUAL? PTS,NEXIT \?L14
	GET PT,NEXITSTR >STACK
	PRINT STACK
	CRLF
	RETURN 2
?L14:	EQUAL? PTS,FEXIT \?L19
	GET PT,FEXITFCN >STACK
	CALL STACK >RM
	ZERO? RM /?L20
	CALL GOTO,RM >STACK
	RSTACK
?L20:	RETURN 2
?L19:	EQUAL? PTS,CEXIT \?L25
	GETB PT,CEXITFLAG >STACK
	VALUE STACK >STACK
	ZERO? STACK /?L26
	GETB PT,REXIT >STACK
	CALL GOTO,STACK >STACK
	RSTACK
?L26:	GET PT,CEXITSTR >STR
	ZERO? STR /?L28
	PRINT STR
	CRLF
	RETURN 2
?L28:	PRINTI "You can't go that way."
	CRLF
	RETURN 2
?L25:	EQUAL? PTS,DEXIT \FALSE
	GETB PT,DEXITOBJ >OBJ
	FSET? OBJ,OPENBIT \?L39
	GETB PT,REXIT >STACK
	CALL GOTO,STACK >STACK
	RSTACK
?L39:	FSET? OBJ,INVISIBLE \?L41
	PRINTR "You can't go that way."
?L41:	GET PT,DEXITSTR >STR
	ZERO? STR /?L44
	PRINT STR
	CRLF
	RETURN 2
?L44:	PRINTI "The "
	PRINTD OBJ
	PRINTI " is closed."
	CRLF
	SET 'P-IT-LOC,HERE
	SET 'P-IT-OBJECT,OBJ
	RETURN 2
?L6:	EQUAL? PRSO,P?IN \?L55
	PRINTI "In which direction do you want to go?"
	CRLF
	RETURN 2
?L55:	PRINTI "You can't go that way."
	CRLF
	RETURN 2

	.FUNCT V-INVENTORY
	FIRST? WINNER >STACK \?L1
	CALL PRINT-CONT,WINNER >STACK
	RSTACK
?L1:	PRINTR "You are empty-handed."

	.FUNCT PRE-TAKE
	EQUAL? PRSO,SECOND-SECTION,GLOBAL-FINGERPRINTS,GLOBAL-LADDER /FALSE
	EQUAL? PRSO,GLOBAL-WARRANT,GLOBAL-RED-HERRINGS /FALSE
	IN? PRSO,GLOBAL-OBJECTS \?L4
	CALL NOT-HERE,PRSO >STACK
	RSTACK
?L4:	IN? PRSO,WINNER \?L5
	PRINTR "You already have it."
?L5:	LOC PRSO >STACK
	FSET? STACK,CONTBIT \?L8
	LOC PRSO >STACK
	FSET? STACK,OPENBIT /?L8
	PRINTR "You can't reach that."
?L8:	ZERO? PRSI /?L11
	EQUAL? PRSI,BOOKSHELVES /FALSE
	LOC PRSO >STACK
	EQUAL? PRSI,STACK /?L14
	PRINTR "It's not in that!"
?L14:	SET 'PRSI,0
	RFALSE
?L11:	LOC WINNER >STACK
	EQUAL? PRSO,STACK \FALSE
	PRINTR "You are in it, loser!"

	.FUNCT V-TAKE
	CALL ITAKE >STACK
	EQUAL? STACK,1 \FALSE
	PRINTI "Taken."
	CRLF
	CALL IS-THEFT? >STACK
	CALL PRINT-ID,STR?6,STACK >STACK
	RSTACK

	.FUNCT ITAKE,VB=1,CNT,OBJ,?TMP
	FSET? PRSO,TAKEBIT /?L1
	ZERO? VB /FALSE
	CALL PICK-ONE,YUKS >STACK
	PRINT STACK
	CRLF
	RFALSE
?L1:	LOC PRSO >STACK
	IN? STACK,WINNER /?L8
	CALL WEIGHT,PRSO >?TMP
	CALL WEIGHT,WINNER >STACK
	ADD ?TMP,STACK >STACK
	GRTR? STACK,LOAD-ALLOWED \?L8
	ZERO? VB /?L9
	PRINTI "Your load is too heavy"
	LESS? LOAD-ALLOWED,LOAD-MAX \?L13
	PRINTI ", especially in light of your condition."
	JUMP ?L17
?L13:	PRINTI "."
?L17:	CRLF
?L9:	RETURN 2
?L8:	CALL CCOUNT,WINNER >CNT
	GRTR? CNT,FUMBLE-NUMBER \?L23
	MUL CNT,FUMBLE-PROB >?TMP
	RANDOM 100 >STACK
	GRTR? ?TMP,STACK \?L23
	FIRST? WINNER >OBJ /?L24
?L24:	NEXT? OBJ >OBJ /?L25
?L25:	PRINTI "Oh, no. The "
	PRINTD OBJ
	PRINTI " slips from your arms while you are taking the "
	PRINTD PRSO
	PRINTI ", and both tumble to the ground."
	CRLF
	CALL PERFORM,V?DROP,OBJ
	RETURN 2
?L23:	MOVE PRSO,WINNER
	FSET PRSO,TOUCHBIT
	RTRUE

	.FUNCT PRE-PUT
	IN? PRSO,GLOBAL-OBJECTS /?L3
	FSET? PRSO,TAKEBIT /FALSE
?L3:	PRINTR "Nice try."

	.FUNCT V-PUT,?TMP
	FSET? PRSI,OPENBIT /?L7
	FSET? PRSI,DOORBIT /?L4
	FSET? PRSI,CONTBIT /?L4
	FSET? PRSI,VEHBIT /?L4
	PRINTR "You can't do that."
?L4:	FSET? PRSI,OPENBIT /?L7
	PRINTI "The"
	CALL PRSI-PRINT
	PRINTR " isn't open."
?L7:	EQUAL? PRSI,PRSO \?L11
	PRINTR "How can you do that?"
?L11:	IN? PRSO,PRSI \?L14
	PRINTI "The "
	PRINTD PRSO
	PRINTI " is already in the "
	PRINTD PRSI
	PRINTR "."
?L14:	CALL WEIGHT,PRSI >?TMP
	CALL WEIGHT,PRSO >STACK
	ADD ?TMP,STACK >?TMP
	GETP PRSI,P?SIZE >STACK
	SUB ?TMP,STACK >?TMP
	GETP PRSI,P?CAPACITY >STACK
	GRTR? ?TMP,STACK \?L17
	PRINTR "There's no room."
?L17:	CALL HELD?,PRSO >STACK
	ZERO? STACK \?L20
	CALL ITAKE >STACK
	ZERO? STACK /TRUE
?L20:	MOVE PRSO,PRSI
	FSET PRSO,TOUCHBIT
	PRINTR "Done."

	.FUNCT HELD?,OBJ
?L1:	LOC OBJ >STACK
	EQUAL? STACK,ROOMS,GLOBAL-OBJECTS /FALSE
	IN? OBJ,WINNER /TRUE
	LOC OBJ >OBJ
	JUMP ?L1

	.FUNCT PRE-DROP
	LOC WINNER >STACK
	EQUAL? PRSO,STACK \FALSE
	CALL PERFORM,V?DISEMBARK,PRSO
	RTRUE

	.FUNCT PRE-GIVE
	CALL HELD?,PRSO >STACK
	ZERO? STACK \FALSE
	EQUAL? PRSI,PLAYER /FALSE
	PRINTR "That's easy for you to say, since you don't even have it."

	.FUNCT PRE-SGIVE
	CALL PERFORM,V?GIVE,PRSI,PRSO
	RTRUE

	.FUNCT V-GIVE
	FSET? PRSI,PERSON /?L1
	PRINTI "You can't give a "
	PRINTD PRSO
	PRINTI " to a "
	PRINTD PRSI
	PRINTR "!"
?L1:	PRINTD PRSI
	PRINTR " refuses your offer."

	.FUNCT V-SGIVE
	PRINTR "FOOOO!!"

	.FUNCT V-DROP
	CALL IDROP >STACK
	ZERO? STACK /FALSE
	PRINTI "The "
	PRINTD PRSO
	PRINTI " is now on the "
	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L5
	PRINTI "ground"
	JUMP ?L9
?L5:	PRINTI "floor"
?L9:	PRINTR "."

	.FUNCT V-THROW
	CALL IDROP >STACK
	ZERO? STACK /FALSE
	PRINTR "Thrown."

	.FUNCT V-THROW-THROUGH
	FSET? PRSO,PERSON /?L1
	PRINTI "Let's not resort to violence, please."
	CRLF
	CALL PRINT-ID,STR?7 >STACK
	RSTACK
?L1:	CALL V-THROW >STACK
	RSTACK

	.FUNCT V-THROW-AT
	CALL IDROP >STACK
	ZERO? STACK /TRUE
	FSET? PRSI,PERSON \?L3
	PRINTD PRSI
	PRINTI ", puzzled by your unorthodox methods, ducks as the "
	PRINTD PRSO
	PRINTI " flies by."
	CRLF
	CALL PRINT-ID,STR?8 >STACK
	RSTACK
?L3:	PRINTR "Perhaps you aren't feeling well?"

	.FUNCT IDROP
	FSET? PRSO,PERSON \?L1
	PRINTI "It's not likely that "
	PRINTD PRSO
	PRINTI " would enjoy that."
	CRLF
	CALL PRINT-ID,STR?9
	RFALSE
?L1:	IN? PRSO,WINNER /?L8
	LOC PRSO >STACK
	IN? STACK,WINNER /?L5
	PRINTI "You're not carrying the"
	CALL PRSO-PRINT
	PRINTI "."
	CRLF
	RFALSE
?L5:	IN? PRSO,WINNER /?L8
	LOC PRSO >STACK
	FSET? STACK,OPENBIT /?L8
	PRINTI "The "
	PRINTD PRSO
	PRINTI " is closed."
	CRLF
	RFALSE
?L8:	LOC WINNER >STACK
	MOVE PRSO,STACK
	RTRUE

	.FUNCT V-OPEN,F,STR
	FSET? PRSO,CONTBIT /?L1
	PRINTI "You must be very clever to do that to the"
	CALL PRSO-PRINT
	PRINTR "."
?L1:	FSET? PRSO,DOORBIT /?L6
	GETP PRSO,P?CAPACITY >STACK
	ZERO? STACK /?L5
?L6:	FSET? PRSO,OPENBIT \?L7
	PRINTR "It is already open."
?L7:	FSET PRSO,OPENBIT
	FSET? PRSO,DOORBIT \?L12
	PRINTI "The "
	PRINTD PRSO
	PRINTR " is now open."
?L12:	FIRST? PRSO >STACK \?L17
	FSET? PRSO,TRANSBIT \?L16
?L17:	PRINTR "Opened."
?L16:	FIRST? PRSO >F \?L20
	NEXT? F >STACK /?L20
	GETP F,P?FDESC >STR
	ZERO? STR /?L20
	PRINTI "The "
	PRINTD PRSO
	PRINTI " opens."
	CRLF
	PRINT STR
	CRLF
	RTRUE
?L20:	PRINTI "Opening the "
	PRINTD PRSO
	PRINTI " reveals "
	CALL PRINT-CONTENTS,PRSO
	PRINTR "."
?L5:	PRINTI "The"
	CALL PRSO-PRINT
	PRINTR " cannot be opened."

	.FUNCT PRINT-CONTENTS,OBJ,F,N,1ST?=1
	FIRST? OBJ >F \FALSE
?L3:	NEXT? F >N /?L5
?L5:	ZERO? 1ST? /?L6
	SET '1ST?,0
	JUMP ?L11
?L6:	PRINTI ", "
	ZERO? N \?L11
	PRINTI "and "
?L11:	PRINTI "a "
	PRINTD F
	SET 'F,N
	ZERO? F \?L3
	RTRUE

	.FUNCT V-CLOSE
	FSET? PRSO,CONTBIT /?L1
	PRINTI "You must be very clever to do that to the"
	CALL PRSO-PRINT
	PRINTR "."
?L1:	FSET? PRSO,DOORBIT \?L5
	FSET? PRSO,OPENBIT \?L6
	PRINTI "The "
	PRINTD PRSO
	PRINTI " is now closed."
	CRLF
	FCLEAR PRSO,OPENBIT
	RTRUE
?L6:	PRINTR "It is already closed."
?L5:	FSET? PRSO,SURFACEBIT /?L13
	GETP PRSO,P?CAPACITY >STACK
	ZERO? STACK /?L13
	FSET? PRSO,OPENBIT \?L14
	FCLEAR PRSO,OPENBIT
	PRINTR "Closed."
?L14:	PRINTR "It is already closed."
?L13:	PRINTR "You cannot close that."

	.FUNCT CCOUNT,OBJ,CNT=0,X
	FIRST? OBJ >X \?L4
?L3:	INC 'CNT
	NEXT? X >X /?L3
?L4:	RETURN CNT

	.FUNCT WEIGHT,OBJ,CONT,WT=0
	FIRST? OBJ >CONT \?L4
?L3:	CALL WEIGHT,CONT >STACK
	ADD WT,STACK >WT
	NEXT? CONT >CONT /?L3
?L4:	GETP OBJ,P?SIZE >STACK
	ADD WT,STACK >STACK
	RSTACK

	.FUNCT V-BUG
	PRINTR "If there is a problem here, it is unintentional. You may report your problem to the address provided in your documentation."

	.FUNCT V-SCRIPT
	GET 0,8 >STACK
	BOR STACK,1 >STACK
	PUT 0,8,STACK
	PRINTI "Here begins"
	PRINT COPR-NOTICE
	CRLF
	RTRUE

	.FUNCT V-UNSCRIPT
	PRINTI "Here ends"
	PRINT COPR-NOTICE
	CRLF
	GET 0,8 >STACK
	BAND STACK,-2 >STACK
	PUT 0,8,STACK
	RTRUE

	.FUNCT PRE-MOVE
	CALL HELD?,PRSO >STACK
	ZERO? STACK /FALSE
	PRINTR "Juggling isn't one of your talents."

	.FUNCT V-MOVE
	FSET? PRSO,TAKEBIT \?L1
	PRINTI "Moving the"
	CALL PRSO-PRINT
	PRINTR " reveals nothing."
?L1:	PRINTI "You can't move the"
	CALL PRSO-PRINT
	PRINTR "."

	.FUNCT V-LAMP-ON
	FSET? PRSO,PERSON \?L1
	PRINTI "Ahem!  You may or may not realize this, but you are on a case. You shouldn't be wasting your time attempting to flirt with the suspects. In any event, it's unlikely that you are person enough to do it."
	CRLF
	CALL PRINT-ID,STR?10 >STACK
	RSTACK
?L1:	PRINTR "You can't turn that on."

	.FUNCT V-LAMP-OFF
	FSET? PRSO,PERSON \?L1
	PRINTR "Your uncouth manner is certain to turn anyone off."
?L1:	PRINTR "You can't turn that off."

	.FUNCT V-WAIT,NUM=3,WHO=0,INT?1=0,VAL
	SET 'WHO-WAIT,0
	ZERO? INT?1 \?L1
	PRINTI "Time passes..."
	CRLF
?L1:	DLESS? 'NUM,0 /?L7
	CALL CLOCKER >VAL
	ZERO? VAL /?L10
	EQUAL? VAL,M-FATAL /?L7
	EQUAL? WHO,GLOBAL-DUFFY \?L13
	ZERO? FINGERPRINT-OBJ /?L7
?L13:	ZERO? WHO /?L14
	IN? WHO,HERE \?L14
	PRINTD WHO
	PRINTI ", for whom you are waiting, has arrived."
	CRLF
	JUMP ?L7
?L14:	INC 'WHO-WAIT
	GETB 0,1 >STACK
	BTST STACK,16 \?L18
	PRINTI "("
	CALL TIME-PRINT,PRESENT-TIME
	PRINTI ") "
?L18:	ZERO? INT?1 /?L25
	PRINTI "Do you want to continue what you were doing? (Y/N)"
	JUMP ?L29
?L25:	PRINTI "Do you want to keep waiting? (Y/N)"
?L29:	CALL YES? >STACK
	ZERO? STACK /?L7
	USL
	CRLF
	JUMP ?L1
?L10:	EQUAL? WHO,GLOBAL-DUFFY \?L37
	ZERO? FINGERPRINT-OBJ /?L7
?L37:	ZERO? WHO /?L41
	IN? WHO,HERE \?L38
	PRINTD WHO
	PRINTI ", for whom you are waiting, has arrived."
	CRLF
	JUMP ?L7
?L38:	ZERO? WHO /?L41
	IGRTR? 'WHO-WAIT,30 \?L41
	PRINTD WHO
	PRINTI " still hasn't arrived. Do you want to keep waiting? (Y/N) "
	CALL YES? >STACK
	ZERO? STACK /?L7
	SET 'WHO-WAIT,0
	USL
	CRLF
	JUMP ?L1
?L41:	USL
	CRLF
	JUMP ?L1
?L7:	SET 'CLOCK-WAIT,1
	ZERO? INT?1 \TRUE
	CALL V-TIME
	RTRUE

	.FUNCT INT-WAIT,N,TIM,REQ
	SET 'TIM,PRESENT-TIME
	MUL N,2 >STACK
	RANDOM STACK >REQ
	CALL V-WAIT,REQ,0,1
	SUB PRESENT-TIME,TIM >STACK
	LESS? STACK,REQ /FALSE
	RTRUE

	.FUNCT V-WAIT-FOR,WHO
	EQUAL? PRSO,INTNUM \?L1
	GRTR? P-NUMBER,PRESENT-TIME \?L3
	CALL V-WAIT-UNTIL
	RTRUE
?L3:	GRTR? P-NUMBER,180 \?L5
	PRINTR "That's too long to wait."
?L5:	CALL V-WAIT,P-NUMBER >STACK
	RSTACK
?L1:	EQUAL? PRSO,NOON \?L9
	CALL V-WAIT-UNTIL
	RTRUE
?L9:	EQUAL? PRSO,GLOBAL-DUFFY \?L10
	ZERO? FINGERPRINT-OBJ /?L11
	CALL V-WAIT,10000,PRSO >STACK
	RSTACK
?L11:	PRINTR "You would wait quite a while, since Sergeant Duffy is always nearby, but never approaches you unless requested."
?L10:	FSET? PRSO,PERSON \?L16
	GETP PRSO,P?CHARACTER >STACK
	GET CHARACTER-TABLE,STACK >WHO
	IN? WHO,HERE \?L17
	PRINTR "That person is already here!"
?L17:	CALL V-WAIT,10000,WHO >STACK
	RSTACK
?L16:	PRINTR "Not a good idea. You might wait all day."

	.FUNCT V-WAIT-UNTIL
	EQUAL? PRSO,NOON \?L1
	SET 'P-NUMBER,720
	SET 'PRSO,INTNUM
	JUMP ?L4
?L1:	LESS? P-NUMBER,8 \?L3
	ADD P-NUMBER,12 >STACK
	MUL STACK,60 >P-NUMBER
	JUMP ?L4
?L3:	LESS? P-NUMBER,13 \?L4
	MUL P-NUMBER,60 >P-NUMBER
?L4:	EQUAL? PRSO,INTNUM \?L6
	GRTR? P-NUMBER,PRESENT-TIME \?L8
	SUB P-NUMBER,PRESENT-TIME >STACK
	CALL V-WAIT,STACK >STACK
	RSTACK
?L8:	PRINTR "You are clearly ahead of your time."
?L6:	PRINTR "Your sanity is coming into question."

	.FUNCT V-STAND
	LOC WINNER >STACK
	FSET? STACK,SURFACEBIT /?L3
	LOC WINNER >STACK
	FSET? STACK,FURNITURE \?L1
?L3:	PRINTI "You are on your own feet again."
	CRLF
	MOVE WINNER,HERE
	RTRUE
?L1:	PRINTR "You're already standing up!"

	.FUNCT V-DISEMBARK
	LOC WINNER >STACK
	EQUAL? STACK,PRSO /?L1
	PRINTI "You're not in that!"
	CRLF
	RETURN 2
?L1:	PRINTI "You are on your own feet again."
	CRLF
	MOVE WINNER,HERE
	RTRUE

	.FUNCT GOTO,RM,V?=1,F,WT
	LOC WINNER >STACK
	IN? STACK,ROOMS /?L1
	PRINTR "You are seated, if you remember."
?L1:	FIRST? HERE >F /?L6
?L6:	GET WHERE-TABLES,0 >WT
	ZERO? F /?L8
?L9:	FSET? F,PERSON \?L11
	EQUAL? F,PLAYER /?L11
	GETP F,P?CHARACTER >STACK
	PUT WT,STACK,PRESENT-TIME
?L11:	NEXT? F >F /?L9
?L8:	MOVE WINNER,RM
	SET 'HERE,RM
	SET 'LIT,1
	GETP HERE,P?ACTION >STACK
	CALL STACK,M-ENTER >STACK
	ZERO? V? /FALSE
	CALL V-FIRST-LOOK >STACK
	RSTACK

	.FUNCT PRE-POUR-ON
	PRINTR "You can't pour that on anything."

	.FUNCT V-POUR-ON
	REMOVE PRSO
	FSET? PRSI,FLAMEBIT \?L1
	FSET? PRSI,ONBIT \?L1
	PRINTI "The "
	PRINTD PRSI
	PRINTR " is extinguished."
?L1:	PRINTI "The water spills over the "
	PRINTD PRSI
	PRINTR " and to the floor where it evaporates."

	.FUNCT V-SQUEEZE
	FSET? PRSO,PERSON \?L1
	PRINTI "It's unclear how "
	PRINTD PRSO
	PRINTR " would take this, so you defer until after hours."
?L1:	PRINTR "How singularly useless."

	.FUNCT PRE-FILL,TX
	ZERO? PRSI \?L5
	GETPT HERE,P?GLOBAL >TX
	ZERO? TX /?L5
	PTSIZE TX >STACK
	CALL ZMEMQB,GLOBAL-WATER,TX,STACK >STACK
	ZERO? STACK /?L3
	SET 'PRSI,GLOBAL-WATER
	RFALSE
?L3:	PRINTR "There's nothing to fill it with."
?L5:	EQUAL? PRSI,GLOBAL-WATER /FALSE
	CALL PERFORM,V?PUT,PRSI,PRSO
	RTRUE

	.FUNCT V-FILL
	ZERO? PRSI \?L1
	CALL GLOBAL-IN?,GLOBAL-WATER,HERE >STACK
	ZERO? STACK /?L3
	CALL PERFORM,V?FILL,PRSO,GLOBAL-WATER >STACK
	RSTACK
?L3:	PRINTR "There's nothing to fill it with."
?L1:	PRINTR "You can't do that."

	.FUNCT V-BRUSH
	PRINTR "Cleanliness is next to Godliness, although in this case it seems to be next to Uselessness."

	.FUNCT V-RING
	PRINTR "How, exactly, does one ring that?"

	.FUNCT V-DRINK
	CALL V-EAT >STACK
	RSTACK

	.FUNCT V-EAT,EAT?=0,DRINK?=0,NOBJ=0
	FSET? PRSO,FOODBIT /?L3
	SET 'EAT?,0
	JUMP ?L1
?L3:	SET 'EAT?,1
	IN? PRSO,WINNER \?L1
	EQUAL? PRSA,V?DRINK \?L5
	PRINTI "How does one drink that?"
	CRLF
	CRLF
	RTRUE
?L5:	PRINTI "Mmm. That really hit the spot."
	CRLF
	CALL PRINT-ID,STR?11
	REMOVE PRSO
	CRLF
	RTRUE
?L1:	FSET? PRSO,DRINKBIT /?L13
	SET 'DRINK?,0
	JUMP ?L12
?L13:	SET 'DRINK?,1
	IN? PRSO,GLOBAL-OBJECTS /?L17
	LOC PRSO >NOBJ
	ZERO? NOBJ /?L15
	IN? NOBJ,WINNER \?L15
	FSET? NOBJ,OPENBIT \?L15
?L17:	PRINTI "Mmm. That really hit the spot."
	CRLF
	CALL PRINT-ID,STR?12
	REMOVE PRSO
	RTRUE
?L15:	PRINTR "You can't get to it."
?L12:	ZERO? EAT? \FALSE
	ZERO? DRINK? \FALSE
	PRINTI "The"
	CALL PRSO-PRINT
	PRINTI " wouldn't agree with you."
	CRLF
	CALL DANGEROUS-FOOD? >STACK
	CALL PRINT-ID,STR?13,STACK >STACK
	RSTACK

	.FUNCT V-CURSES
	CALL PRINT-ID,STR?14
	ZERO? PRSO /?L1
	FSET? PRSO,PERSON \?L3
	PRINTR "Insults of this nature won't help you."
?L3:	PRINTR "What a loony!"
?L1:	CALL PICK-ONE,OFFENDED >STACK
	PRINT STACK
	CRLF
	RTRUE

	.FUNCT V-LISTEN
	FSET? PRSO,PERSON /?L1
	PRINTI "The "
?L1:	PRINTD PRSO
	PRINTR " makes no sound."

	.FUNCT V-FOLLOW,CN,CHR,COR,PCOR,L
	GETP PRSO,P?CHARACTER >CN
	GET CHARACTER-TABLE,CN >CHR
	LOC CHR >L
	EQUAL? PRSO,PLAYER \?L1
	PRINTR "It's not clear whom you are talking to."
?L1:	FSET? PRSO,PERSON /?L5
	PRINTI "How tragic to see a formerly great detective stalking a "
	PRINTD PRSO
	PRINTR "."
?L5:	EQUAL? HERE,L \?L8
	PRINTI "You're in the same place as "
	PRINTD CHR
	PRINTR "!"
?L8:	ZERO? L \?L11
	PRINTD CHR
	PRINTR " has left the grounds."
?L11:	GET WHERE-TABLES,0 >STACK
	GET STACK,CN >STACK
	EQUAL? STACK,PRESENT-TIME \?L14
	CALL GOTO,L >STACK
	RSTACK
?L14:	GETP HERE,P?CORRIDOR >COR
	ZERO? COR /?L15
	GETP L,P?CORRIDOR >PCOR
	ZERO? PCOR /?L15
	BAND COR,PCOR >STACK
	ZERO? STACK /?L15
	CALL COR-DIR,HERE,L >PRSO
	CALL V-WALK >STACK
	RSTACK
?L15:	PRINTI "You seem to have lost track of "
	PRINTD CHR
	PRINTR "."

	.FUNCT V-LEAP,TX,S
	ZERO? PRSO /?L1
	IN? PRSO,HERE \?L3
	FSET? PRSO,PERSON \?L5
	PRINTI "The "
	PRINTD PRSO
	PRINTR " is too big to jump over."
?L5:	CALL V-SKIP >STACK
	RSTACK
?L3:	PRINTR "That would be a good trick."
?L1:	GETPT HERE,P?DOWN >TX
	ZERO? TX /?L13
	PTSIZE TX >S
	EQUAL? S,2 /?L16
	EQUAL? S,4 \?L14
	GETB TX,1 >STACK
	VALUE STACK >STACK
	ZERO? STACK \?L14
?L16:	PRINTI "For a brief moment, you feel the exhilaration of free fall. A thought hits you: the ground is moving toward me. It is your last thought."
	CRLF
	CALL PRINT-ID,STR?15
	QUIT
?L14:	CALL V-SKIP >STACK
	RSTACK
?L13:	CALL V-SKIP >STACK
	RSTACK

	.FUNCT V-SKIP
	PRINTR "Wheeeeeeeeee!!!!!"

	.FUNCT V-LEAVE
	CALL PERFORM,V?WALK,P?OUT >STACK
	RSTACK

	.FUNCT V-GOODBYE
	CALL V-HELLO,0 >STACK
	RSTACK

	.FUNCT V-HELLO,HELL=1
	ZERO? PRSO /?L1
	FSET? PRSO,PERSON \?L3
	PRINTD PRSO
	PRINTR " returns the salutation."
?L3:	PRINTI "Only schizophrenics say """
	ZERO? HELL /?L10
?L10:	PRINTI """ to a "
	PRINTD PRSO
	PRINTR "."
?L1:	PRINTR "Good day."

	.FUNCT NOT-HERE,OBJ
	PRINTI "You can't see "
	FSET? OBJ,PERSON \?L3
	PRINTD OBJ
	JUMP ?L7
?L3:	PRINTI "that"
?L7:	PRINTR " here."

	.FUNCT PRE-READ
	ZERO? LIT \?L1
	PRINTR "It is impossible to read in the dark."
?L1:	EQUAL? PRSO,GLOBAL-ENDING,SECOND-SECTION /FALSE
	IN? PRSO,GLOBAL-OBJECTS \?L6
	CALL NOT-HERE,PRSO >STACK
	RSTACK
?L6:	FSET? PRSO,DRUGBIT \?L7
	PRINTI "You examine one of the handful of pills:"
	CRLF
	RFALSE
?L7:	ZERO? PRSI /?L10
	FSET? PRSI,TRANSBIT /?L10
	EQUAL? PRSI,INTNUM /?L10
	PRINTI "How does one look through the"
	CALL PRSI-PRINT
	PRINTR "?"
?L10:	EQUAL? P-ADVERB,W?CAREFULLY \FALSE
	CALL INT-WAIT,3 >STACK
	ZERO? STACK \FALSE
	PRINTI "You never got to finish reading the "
	PRINTD PRSO
	PRINTR "."

	.FUNCT V-READ
	FSET? PRSO,READBIT /?L1
	PRINTI "You cannot read the "
	PRINTD PRSO
	PRINTR "."
?L1:	GETP PRSO,P?TEXT >STACK
	PRINT STACK
	CRLF
	RTRUE

	.FUNCT V-LOOK-UNDER
	FSET? PRSO,FURNITURE \?L1
	PRINTI "You twist your head to look under the"
	CALL PRSO-PRINT
	PRINTR " but find nothing."
?L1:	FSET? PRSO,PERSON \?L5
	PRINTI "Nope. Nothing hiding under "
	PRINTD PRSO
	PRINTR "."
?L5:	LOC PRSO >STACK
	EQUAL? STACK,HERE,LOCAL-GLOBALS,GLOBAL-OBJECTS \?L8
	PRINTR "There is nothing but dust there."
?L8:	PRINTR "That's not so useful."

	.FUNCT V-LOOK-BEHIND
	PRINTI "There is nothing behind "
	FSET? PRSO,PERSON \?L3
	PRINTD PRSO
	JUMP ?L7
?L3:	PRINTI "the"
	CALL PRSO-PRINT
?L7:	PRINTR "."

	.FUNCT V-LOOK-INSIDE
	FSET? PRSO,RLANDBIT \?L1
	CALL ROOM-PEEK >STACK
	RSTACK
?L1:	FSET? PRSO,DOORBIT \?L3
	FSET? PRSO,OPENBIT \?L4
	PRINTI "The "
	PRINTD PRSO
	PRINTR " is open, but you can't tell what's beyond it."
?L4:	PRINTI "The "
	PRINTD PRSO
	PRINTR " is closed."
?L3:	FSET? PRSO,CONTBIT \?L11
	CALL SEE-INSIDE?,PRSO >STACK
	ZERO? STACK /?L12
	FIRST? PRSO >STACK \?L14
	CALL PRINT-CONT,PRSO >STACK
	ZERO? STACK \TRUE
?L14:	FSET? PRSO,SURFACEBIT \?L16
	PRINTI "There is nothing on the"
	CALL PRSO-PRINT
	PRINTR "."
?L16:	PRINTI "The "
	PRINTD PRSO
	PRINTR " is empty."
?L12:	PRINTI "The "
	PRINTD PRSO
	PRINTR " is closed."
?L11:	PRINTI "One can't look inside the"
	CALL PRSO-PRINT
	PRINTR "."

	.FUNCT SEE-INSIDE?,OBJ
	FSET? OBJ,INVISIBLE /FALSE
	FSET? OBJ,TRANSBIT /TRUE
	FSET? OBJ,OPENBIT /TRUE
	RFALSE

	.FUNCT PRE-BURN
	FSET? PRSI,FLAMEBIT \?L1
	FSET? PRSI,ONBIT /FALSE
?L1:	PRINTI "With the"
	CALL PRSI-PRINT
	PRINTR "??!?"

	.FUNCT V-BURN
	PRINTI "You can't burn the "
	PRINTD PRSO
	PRINTI "."
	CRLF
	CALL IS-PERSON? >STACK
	CALL PRINT-ID,STR?16,STACK
	CALL IS-SELF? >STACK
	CALL PRINT-ID,STR?17,STACK
	CALL IS-OBJ-PROP-ANIMAL? >STACK
	CALL PRINT-ID,STR?18,STACK >STACK
	RSTACK

	.FUNCT PRE-TURN
	EQUAL? PRSO,GLOBAL-CALL \?L1
	PRINTR "Specify a direction if you want to move around."
?L1:	FSET? PRSO,TURNBIT /FALSE
	PRINTR "You can't turn that!"

	.FUNCT V-TURN
	PRINTR "This has no effect."

	.FUNCT V-PUMP
	PRINTR "It's not awfully clear how."

	.FUNCT V-LOCK
	PRINTR "It doesn't seem to work."

	.FUNCT V-PICK
	PRINTR "You can't pick that."

	.FUNCT V-UNLOCK
	PRINTR "It doesn't seem to work."

	.FUNCT V-CUT
	FSET? PRSO,PERSON \?L1
	CALL PERFORM,V?KILL,PRSO,PRSI >STACK
	RSTACK
?L1:	FSET? PRSO,BURNBIT \?L3
	FSET? PRSI,WEAPONBIT \?L7
	REMOVE PRSO
	PRINTI "Your skillful "
	PRINTD PRSI
	PRINTI "smanship slices the "
	PRINTD PRSO
	PRINTI " into innumerable slivers that evaporate instantaneously."
	CRLF
	CALL IS-OBJ-PROP-ANIMAL? >STACK
	CALL PRINT-ID,STR?19,STACK >STACK
	RSTACK
?L3:	FSET? PRSI,WEAPONBIT /?L6
?L7:	PRINTI "You find that the ""cutting edge"" of the"
	CALL PRSI-PRINT
	PRINTR " is inadequate."
?L6:	PRINTI "That's a strange concept, cutting the"
	CALL PRSO-PRINT
	PRINTI "."
	CRLF
	CALL IS-OBJ-PROP-ANIMAL? >STACK
	CALL PRINT-ID,STR?20,STACK >STACK
	RSTACK

	.FUNCT V-KILL
	CALL IKILL,STR?21 >STACK
	RSTACK

	.FUNCT IKILL,STR
	ZERO? PRSO \?L1
	PRINTI "There is nothing here to "
	PRINT STR
	PRINTR "."
?L1:	FSET? PRSO,PERSON /?L5
	PRINTI "No doubt you need a refresher course at the academy "
	PRINTI "in the martial arts, but the "
	PRINTD PRSO
	PRINTI " is hardly a likely target."
	CRLF
	CALL IS-OBJ-PROP-ANIMAL? >STACK
	CALL PRINT-ID,STR?22,STACK >STACK
	RSTACK
?L5:	EQUAL? PRSI,PISTOL \?L8
	PRINTI "A shot rings out and "
	PRINTD PRSO
	PRINTI " falls to the ground, dead. Good shot."
	CRLF
	CALL GONE-CRAZY >STACK
	RSTACK
?L8:	RANDOM 100 >STACK
	GRTR? 50,STACK \?L11
	PRINTI "You rethink your planned action."
	CRLF
	CALL PRINT-ID,STR?23 >STACK
	RSTACK
?L11:	PRINTI "With a lethal blow of your hand, "
	PRINTD PRSO
	PRINTI " falls dead."
	CRLF
	CALL GONE-CRAZY >STACK
	RSTACK

	.FUNCT V-ATTACK
	CALL IKILL,STR?24 >STACK
	RSTACK

	.FUNCT V-SWING
	ZERO? PRSI \?L1
	PRINTR "Whoosh!"
?L1:	CALL PERFORM,V?ATTACK,PRSI,PRSO >STACK
	RSTACK

	.FUNCT V-KICK
	FSET? PRSO,PERSON \?L1
	PRINTI "This sort of shabby behavior is disgusting."
	CRLF
	CALL PRINT-ID,STR?25 >STACK
	RSTACK
?L1:	CALL HACK-HACK,STR?26 >STACK
	RSTACK

	.FUNCT V-WAVE
	CALL HACK-HACK,STR?27 >STACK
	RSTACK

	.FUNCT V-RAISE
	CALL HACK-HACK,STR?28 >STACK
	RSTACK

	.FUNCT V-LOWER
	CALL HACK-HACK,STR?28 >STACK
	RSTACK

	.FUNCT V-RUB
	CALL IS-PERSON? >STACK
	CALL PRINT-ID,STR?29,STACK
	CALL HACK-HACK,STR?30 >STACK
	RSTACK

	.FUNCT V-PUSH
	CALL IS-PERSON? >STACK
	CALL PRINT-ID,STR?31,STACK
	CALL HACK-HACK,STR?32 >STACK
	RSTACK

	.FUNCT V-MUNG
	CALL IS-PERSON? >STACK
	CALL PRINT-ID,STR?33,STACK
	CALL IS-OBJ-PROP-ANIMAL? >STACK
	CALL PRINT-ID,STR?34,STACK
	CALL IS-SELF? >STACK
	CALL PRINT-ID,STR?35,STACK
	CALL HACK-HACK,STR?36 >STACK
	RSTACK

	.FUNCT HACK-HACK,STR
	PRINT STR
	PRINTD PRSO
	CALL PICK-ONE,HO-HUM >STACK
	PRINT STACK
	CRLF
	RTRUE

	.FUNCT WORD-TYPE,OBJ,WORD,SYNS
	GETPT OBJ,P?SYNONYM >SYNS
	PTSIZE SYNS >STACK
	DIV STACK,2 >STACK
	DEC 'STACK
	CALL ZMEMQ,WORD,SYNS,STACK >STACK
	RSTACK

	.FUNCT V-KNOCK
	CALL WORD-TYPE,PRSO,W?DOOR >STACK
	ZERO? STACK /?L1
	PRINTR "It appears that nobody's home."
?L1:	PRINTI "Why knock on a "
	PRINTD PRSO
	PRINTR "?"

	.FUNCT V-SHAKE,X
	FSET? PRSO,TAKEBIT /?L1
	PRINTR "You can't take it; thus, you can't shake it!"
?L1:	FSET? PRSO,OPENBIT /?L19
	FIRST? PRSO >STACK \?L5
	PRINTI "It sounds as though there is something inside the "
	PRINTD PRSO
	PRINTR "."
?L5:	FSET? PRSO,OPENBIT \?L8
?L19:	FIRST? PRSO >STACK \?L8
?L9:	FIRST? PRSO >X \?L10
	MOVE X,HERE
	FSET X,TOUCHBIT
	JUMP ?L9
?L10:	PRINTR "Everything in it spills onto the floor."
?L8:	PRINTR "Well, what did you expect to happen?"

	.FUNCT PRE-DIG
	FSET? PRSI,TOOLBIT \?L1
	PRINTI "Digging with the"
	CALL PRSI-PRINT
	PRINTR " is slow and tedious."
?L1:	PRINTI "Digging with a "
	PRINTD PRSI
	PRINTR " is silly."

	.FUNCT V-SEARCH-OBJECT-FOR
	FSET? PRSO,PERSON \?L1
	PRINTD PRSO
	PRINTI " resignedly allows you to perform the search."
	CRLF
	IN? PRSI,PRSO \?L5
	PRINTI "Indeed, "
	PRINTD PRSO
	PRINTI " has the "
	PRINTD PRSI
	PRINTR "."
?L5:	PRINTD PRSO
	PRINTR " doesn't have that."
?L1:	IN? PRSI,PRSO \?L12
	PRINTR "How observant you are!  There it is!"
?L12:	PRINTI "You don't find the"
	CALL PRSI-PRINT
	PRINTR " there."

	.FUNCT V-DIG
	PRINTR "What a silly idea!"

	.FUNCT V-SMELL
	PRINTI "It smells just like a"
	CALL PRSO-PRINT
	PRINTR "."

	.FUNCT GLOBAL-IN?,OBJ1,OBJ2,TX
	GETPT OBJ2,P?GLOBAL >TX
	ZERO? TX /FALSE
	PTSIZE TX >STACK
	DEC 'STACK
	CALL ZMEMQB,OBJ1,TX,STACK >STACK
	RSTACK

	.FUNCT V-SWIM
	PRINTI "Swimming isn't possible "
	CALL PRINT-ID,STR?37
	ZERO? PRSO /?L3
	PRINTI "in the "
	PRINTD PRSO
	JUMP ?L10
?L3:	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L7
	PRINTI "on the grounds"
	JUMP ?L10
?L7:	PRINTI "right on the floor, Sherlock"
?L10:	PRINTR "."

	.FUNCT PRE-UNTIE
	PRINTR "This cannot be tied, so it cannot be untied!"

	.FUNCT V-UNTIE
	PRINTR "Foo!"

	.FUNCT PRE-TIE
	EQUAL? PRSI,WINNER \FALSE
	PRINTI "You can't tie it to yourself."
	CRLF
	CALL PRINT-ID,STR?38 >STACK
	RSTACK

	.FUNCT V-TIE
	PRINTI "You can't tie the"
	CALL PRSO-PRINT
	PRINTR " to that."

	.FUNCT V-TIE-UP
	PRINTR "You could certainly never tie it with that!"

	.FUNCT V-MUMBLE
	PRINTR "It has been a long day, hasn't it?"

	.FUNCT V-ALARM
	FSET? PRSO,PERSON \?L1
	PRINTR "He's wide awake, or haven't you noticed?"
?L1:	PRINTI "The"
	CALL PRSO-PRINT
	PRINTR " doesn't sleep."

	.FUNCT V-ZORK
	PRINTR "A series of fantasy simulation games and a registered trademark of Infocom, Inc."

	.FUNCT V-CLIMB-ON
	FSET? PRSO,FURNITURE \?L5
	FSET? PRSO,VEHBIT \?L1
	MOVE PLAYER,PRSO
	PRINTI "You are now seated on the "
	PRINTD PRSO
	PRINTR "."
?L1:	FSET? PRSO,FURNITURE \?L5
	PRINTI "This isn't the kind of thing to sit on!"
	CRLF
	CALL PRINT-ID,STR?39 >STACK
	RSTACK
?L5:	PRINTI "You can't climb onto the "
	PRINTD PRSO
	PRINTR "."

	.FUNCT V-CLIMB-FOO
	CALL V-CLIMB-UP,P?UP,1 >STACK
	RSTACK

	.FUNCT V-CLIMB-UP,DIR=P?UP,OBJ=0,X
	GETPT HERE,DIR >STACK
	ZERO? STACK /?L1
	CALL PERFORM,V?WALK,DIR
	RTRUE
?L1:	ZERO? OBJ \?L12
	PRINTR "You can't go that way."
?L12:	GETPT PRSO,P?SYNONYM >X
	PTSIZE X >STACK
	DIV STACK,2 >STACK
	DEC 'STACK
	CALL ZMEMQ,W?WALL,X,STACK >STACK
	ZERO? STACK /?L6
	PRINTR "Climbing the walls is to no avail."
?L6:	PRINTR "Bizarre!"

	.FUNCT V-CLIMB-DOWN
	FSET? PRSO,FURNITURE \?L1
	FSET? PRSO,VEHBIT \?L1
	CALL V-CLIMB-ON
	RTRUE
?L1:	CALL V-CLIMB-UP,P?DOWN >STACK
	RSTACK

	.FUNCT V-SEND
	FSET? PRSO,PERSON \?L1
	PRINTI "Why would you send for the"
	CALL PRSO-PRINT
	PRINTR "?"
?L1:	PRINTR "Sigh."

	.FUNCT V-COUNT,CNT
	GETP PRSO,P?COUNT >CNT
	FSET? PRSO,DRUGBIT \?L1
	PRINTI "There "
	EQUAL? CNT,1 \?L5
	PRINTI "is "
	JUMP ?L9
?L5:	PRINTI "are "
?L9:	PRINTN CNT
	PRINTR " of them."
?L1:	EQUAL? PRSO,END-TABLE \?L14
	PRINTR "There are two in a pair, or have you forgotten?"
?L14:	PRINTR "Unless you are drunk, one."

	.FUNCT V-PUT-UNDER
	PRINTR "There's not enough room."

	.FUNCT V-ENTER
	CALL PERFORM,V?WALK,P?IN >STACK
	RSTACK

	.FUNCT V-EXIT
	CALL PERFORM,V?WALK,P?OUT >STACK
	RSTACK

	.FUNCT V-CROSS
	PRINTR "You can't cross that!"

	.FUNCT V-SEARCH
	FSET? PRSO,PERSON \?L1
	PRINTD PRSO
	PRINTR " grudgingly allows you to search. You find nothing whatsoever of interest."
?L1:	PRINTR "You find nothing unusual."

	.FUNCT PRE-FIND,PRON,PRON1,CHR,NUM,?TMP
	SET 'PRON,PRON-HIM
	SET 'PRON1,PRON-HE
	IN? PRSO,ROOMS \?L1
	EQUAL? PRSO,HERE \?L3
	PRINTR "You're already here!"
?L3:	FSET? PRSO,TOUCHBIT \?L7
	PRINTR "You should know - you've been there!"
?L7:	PRINTR "You're the detective!"
?L1:	EQUAL? PRSO,GLOBAL-MR-ROBNER \?L13
	PRINTR "He's in the morgue, no doubt."
?L13:	FSET? PRSO,PERSON \FALSE
	GETP WINNER,P?CHARACTER >STACK
	GET WHERE-TABLES,STACK >?TMP
	GETP PRSO,P?CHARACTER >CHR
	GET ?TMP,CHR >NUM
	IN? PRSO,GLOBAL-OBJECTS \?L17
	GET CHARACTER-TABLE,CHR >PRSO
?L17:	EQUAL? CHR,MRS-ROBNER-C,ROURKE-C,DUNBAR-C \?L20
	SET 'PRON,PRON-HER
	SET 'PRON1,PRON-SHE
?L20:	EQUAL? WINNER,PLAYER /?L23
	CALL GRAB-ATTENTION,WINNER >STACK
	ZERO? STACK /TRUE
?L23:	LOC PRSO >STACK
	LOC WINNER >STACK
	EQUAL? STACK,STACK \?L26
	EQUAL? WINNER,PLAYER \?L28
	PRINTR "Are you blind?"
?L28:	PRINTR """Ahem..."""
?L26:	ZERO? NUM \?L35
	EQUAL? WINNER,PLAYER \?L36
	PRINTI "You haven't seen "
	PRINT PRON
	PRINTR " yet."
?L36:	PRINTI """I haven't seen "
	PRINT PRON
	PRINTR " today."""
?L35:	SUB PRESENT-TIME,NUM >NUM
	EQUAL? WINNER,PLAYER \?L44
	PRINTI "You last saw "
	PRINT PRON
	PRINTI " "
	JUMP ?L48
?L44:	PRINTI """I last saw "
	PRINT PRON
	PRINTI " "
?L48:	GRTR? NUM,120 \?L51
	PRINTI "a few hours ago"
	JUMP ?L70
?L51:	GRTR? NUM,80 \?L55
	PRINTI "an hour or two ago"
	JUMP ?L70
?L55:	GRTR? NUM,45 \?L58
	PRINTI "about an hour ago"
	JUMP ?L70
?L58:	GRTR? NUM,20 \?L61
	PRINTI "about half an hour ago"
	JUMP ?L70
?L61:	GRTR? NUM,10 \?L64
	PRINTI "about 15 minutes ago"
	JUMP ?L70
?L64:	GRTR? NUM,5 \?L67
	PRINTI "less than 10 minutes ago"
	JUMP ?L70
?L67:	PRINTI "just a minute ago"
?L70:	EQUAL? WINNER,PLAYER /?L73
	PRINTI ". I don't know where "
	PRINT PRON1
	PRINTR " went, though."""
?L73:	PRINTR "."

	.FUNCT V-FIND,L
	LOC PRSO >L
	EQUAL? PRSO,PLAYER \?L1
	PRINTR "You're around here somewhere..."
?L1:	EQUAL? PLAYER,WINNER /?L5
	PRINTR """I don't know."""
?L5:	EQUAL? L,GLOBAL-OBJECTS \?L8
	PRINTR "You're the detective."
?L8:	IN? PRSO,WINNER \?L11
	PRINTR "You have it."
?L11:	IN? PRSO,HERE /?L15
	EQUAL? PRSO,PSEUDO-OBJECT \?L14
?L15:	PRINTR "It's right here."
?L14:	FSET? L,PERSON \?L18
	PRINTD L
	PRINTR " has it."
?L18:	FSET? L,CONTBIT \?L21
	PRINTI "It's "
	FSET? L,SURFACEBIT \?L24
	PRINTI "o"
	JUMP ?L28
?L24:	PRINTI "i"
?L28:	PRINTI "n the "
	PRINTD L
	PRINTR "."
?L21:	PRINTR "Who knows?"

	.FUNCT V-TELL
	EQUAL? PRSO,PLAYER \?L1
	PRINTR "Talking to yourself is said to be a sign of impending mental collapse."
?L1:	FSET? PRSO,PERSON \?L5
	ZERO? P-CONT /?L6
	SET 'WINNER,PRSO
	JUMP ?L8
?L6:	PRINTD PRSO
	PRINTI " is listening."
	CRLF
?L8:	SET 'QCONTEXT,PRSO
	SET 'QCONTEXT-ROOM,HERE
	RETURN QCONTEXT-ROOM
?L5:	PRINTI "You can't talk to the"
	CALL PRSO-PRINT
	PRINTI "!"
	CRLF
	SET 'QUOTE-FLAG,0
	SET 'P-CONT,0
	RETURN 2

	.FUNCT V-ANSWER
	PRINTI "Nobody seems to be awaiting your answer."
	CRLF
	SET 'P-CONT,0
	SET 'QUOTE-FLAG,0
	RTRUE

	.FUNCT V-REPLY
	PRINTI "It is hardly likely that the "
	PRINTD PRSO
	PRINTI " is interested."
	CRLF
	SET 'P-CONT,0
	SET 'QUOTE-FLAG,0
	RTRUE

	.FUNCT V-WHAT
	FSET? PRSO,PERSON \?L1
	PRINTR "Surely you have read the interviews."
?L1:	PRINTR "Are you talking to yourself again?"

	.FUNCT V-KISS
	FSET? PRSO,PERSON \?L1
	PRINTI "Section 204D, Paragraph 7.6 of the Connecticut Police Code of Conduct specifically prohibits kissing suspects."
	CRLF
	CALL IS-PERSON? >STACK
	CALL PRINT-ID,STR?40,STACK >STACK
	RSTACK
?L1:	PRINTR "What a (ahem!) strange idea!"

	.FUNCT V-RAPE
	FSET? PRSO,PERSON \?L1
	RANDOM 100 >STACK
	GRTR? 75,STACK \?L3
	PRINTI "Section 29A of the United States Criminal Code, whose provisions come to your unhealthy mind, tut-tuts this sort of thing. A pity."
	CRLF
	CALL PRINT-ID,STR?41 >STACK
	RSTACK
?L3:	CALL GONE-CRAZY >STACK
	RSTACK
?L1:	PRINTI "What a (ahem!) strange idea!"
	CRLF
	EQUAL? PRSO,CORPSE /?L11
	PUSH 0
	JUMP ?L12
?L11:	PUSH 1
?L12:	CALL PRINT-ID,STR?42,STACK >STACK
	RSTACK

	.FUNCT V-DIAGNOSE
	PRINTR "You're OK for now."

	.FUNCT V-SAY,V
	SET 'QUOTE-FLAG,0
	SET 'P-CONT,0
	PRINTR "To talk to someone, try 'SAY TO someone ""something""'."

	.FUNCT PRE-SSHOW
	SET 'P-MERGED,1
	CALL PERFORM,V?SHOW,PRSI,PRSO
	RTRUE

	.FUNCT V-SSHOW
	RTRUE

	.FUNCT V-SHOW
	EQUAL? PRSO,PLAYER \?L1
	PRINTR "Do you often talk to yourself?"
?L1:	FSET? PRSO,PERSON /?L5
	PRINTI "Do you expect applause from the"
	CALL PRSO-PRINT
	PRINTR "?"
?L5:	PRINTD PRSO
	CALL PICK-ONE,WHO-CARES >STACK
	PRINT STACK
	PRINTR "."

	.FUNCT V-TELL-ME
	CALL V-CONFRONT >STACK
	RSTACK

	.FUNCT V-CONFRONT
	EQUAL? PRSO,PLAYER \?L1
	PRINTR "You aren't talking to anyone!"
?L1:	FSET? PRSO,PERSON /?L5
	PRINTI "That ought to put a scare into the"
	CALL PRSO-PRINT
	PRINTR "."
?L5:	PRINTD PRSO
	CALL PICK-ONE,WHO-CARES >STACK
	PRINT STACK
	PRINTR "."

	.FUNCT V-SEND-FOR,REAL
	FSET? PRSO,PERSON /?L1
	PRINTR "You can only send for a person."
?L1:	IN? PRSO,GLOBAL-OBJECTS \?L6
	GETP PRSO,P?CHARACTER >STACK
	GET CHARACTER-TABLE,STACK >REAL
	JUMP ?L8
?L6:	SET 'REAL,PRSO
?L8:	IN? REAL,HERE \?L9
	PRINTD REAL
	PRINTR " is already here."
?L9:	PRINTR "You can't send for people."

	.FUNCT V-ANALYZE
	EQUAL? PRSI,GLOBAL-FINGERPRINTS \?L1
	CALL PERFORM,V?FINGERPRINT,PRSO
	RTRUE
?L1:	FSET? PRSO,TAKEBIT \?L3
	CALL DO-ANALYZE >STACK
	RSTACK
?L3:	ZERO? FINGERPRINT-OBJ /?L4
	PRINTR "Duffy is already occupied with another errand."
?L4:	IN? PRSO,GLOBAL-OBJECTS \?L7
	PRINTI "Duffy appears in an instant. ""Well, I might be able to analyze the "
	PRINTD PRSO
	PRINTR ", but you don't even have it with you!""  With that, he discreetly leaves."
?L7:	PRINTR "Sergeant Duffy appears with a puzzled look on his face. ""With all respect, I don't think I can take THAT to the laboratory! I'll be nearby if you need me."" He leaves, shaking his head slowly."

	.FUNCT PRE-ACCUSE
	ZERO? PRSI \?L1
	SET 'PRSI,GLOBAL-MURDER
?L1:	EQUAL? PRSI,GLOBAL-MURDER /?L4
	PRINTR "What an accusation!"
?L4:	FSET? PRSO,PERSON /FALSE
	PRINTI "What a detective!  Quick, Sergeant!  Arrest that "
	PRINTD PRSO
	PRINTR "!"

	.FUNCT V-ACCUSE
	PRINTD PRSO
	PRINTR " shrugs off your suggestion."

	.FUNCT V-ARREST
	FSET? PRSO,PERSON \?L1
	PRINTI "You realize that you don't have enough evidence to convict "
	PRINTD PRSO
	PRINTR " so you resolve to continue the investigation."
?L1:	EQUAL? PRSO,GLOBAL-DUFFY \?L7
	PRINTI "Oh, come on now!  Not trusty "
	PRINTD PRSO
	PRINTR "!"
?L7:	PRINTI "Sergeant Duffy enters, strokes his chin, and in a rather puzzled voice says ""Excuse me, sir, but it would cause quite a stir at the station to be charging a "
	PRINTD PRSO
	PRINTR " with murder!""  He leaves quietly."

	.FUNCT V-ASK-ABOUT
	EQUAL? PRSO,PLAYER \?L1
	PRINTR "Talking to yourself is said to be a sign of impending mental collapse."
?L1:	EQUAL? PRSO,GLOBAL-STEVEN \?L5
	PRINTR "Steven isn't in the area."
?L5:	FSET? PRSO,PERSON /?L8
	PRINTI "Do you often talk to a "
	PRINTD PRSO
	PRINTR "?"
?L8:	PRINTD PRSO
	PRINTR " doesn't seem to know about that."

	.FUNCT V-ASK-FOR
	FSET? PRSO,PERSON \?L1
	EQUAL? PRSO,PLAYER /?L1
	EQUAL? PRSI,SAFE,GLOBAL-SAFE \?L3
	CALL PERFORM,V?ASK-ABOUT,PRSO,PRSI
	RTRUE
?L3:	PRINTD PRSO
	IN? PRSI,PRSO \?L8
	PRINTI " hands you the "
	PRINTD PRSI
	PRINTI "."
	CRLF
	MOVE PRSI,WINNER
	RTRUE
?L8:	PRINTR " doesn't have that."
?L1:	PRINTR "Be serious!"

	.FUNCT V-HOLD-UP
	PRINTR "That doesn't seem to help at all."

	.FUNCT CORRIDOR-LOOK,ITM=0,C,Z,COR,VAL,FOUND=0
	GETP HERE,P?CORRIDOR >C
	ZERO? C /FALSE
?L3:	SUB C,2048 >Z
	LESS? Z,0 /?L5
	SET 'COR,COR-2048
	JUMP ?L18
?L5:	SUB C,1024 >Z
	LESS? Z,0 /?L7
	SET 'COR,COR-1024
	JUMP ?L18
?L7:	SUB C,512 >Z
	LESS? Z,0 /?L8
	SET 'COR,COR-512
	JUMP ?L18
?L8:	SUB C,256 >Z
	LESS? Z,0 /?L9
	SET 'COR,COR-256
	JUMP ?L18
?L9:	SUB C,128 >Z
	LESS? Z,0 /?L10
	SET 'COR,COR-128
	JUMP ?L18
?L10:	SUB C,64 >Z
	LESS? Z,0 /?L11
	SET 'COR,COR-64
	JUMP ?L18
?L11:	SUB C,32 >Z
	LESS? Z,0 /?L12
	SET 'COR,COR-32
	JUMP ?L18
?L12:	SUB C,16 >Z
	LESS? Z,0 /?L13
	SET 'COR,COR-16
	JUMP ?L18
?L13:	SUB C,8 >Z
	LESS? Z,0 /?L14
	SET 'COR,COR-8
	JUMP ?L18
?L14:	SUB C,4 >Z
	LESS? Z,0 /?L15
	SET 'COR,COR-4
	JUMP ?L18
?L15:	SUB C,2 >Z
	LESS? Z,0 /?L16
	SET 'COR,COR-2
	JUMP ?L18
?L16:	SUB C,1 >Z
	LESS? Z,0 /?L4
	SET 'COR,COR-1
?L18:	CALL CORRIDOR-CHECK,COR,ITM >VAL
	ZERO? FOUND \?L19
	SET 'FOUND,VAL
?L19:	SET 'C,Z
	JUMP ?L3
?L4:	RETURN FOUND

	.FUNCT CORRIDOR-CHECK,COR,ITM,CNT=2,PAST=0,FOUND=0,RM,OBJ
?L1:	GET COR,CNT >RM
	ZERO? RM /FALSE
	EQUAL? RM,HERE \?L5
	SET 'PAST,1
	JUMP ?L33
?L5:	FIRST? RM >OBJ \?L33
?L7:	ZERO? ITM /?L9
	EQUAL? OBJ,ITM \?L14
	GET COR,PAST >FOUND
	JUMP ?L8
?L9:	FSET? OBJ,PERSON \?L14
	CALL IN-MOTION?,OBJ >STACK
	ZERO? STACK \?L14
	PRINTD OBJ
	PRINTI " is "
	GETP RM,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L17
	PRINTI "off"
	JUMP ?L21
?L17:	PRINTI "down the hall"
?L21:	PRINTI " to "
	GET COR,PAST >STACK
	CALL DIR-PRINT,STACK
	PRINTI "."
	CRLF
?L14:	NEXT? OBJ >OBJ /?L7
?L8:	ZERO? FOUND /?L33
	RETURN FOUND
?L33:	INC 'CNT
	JUMP ?L1

	.FUNCT V-LEAN
	PRINTR "You can't do that!"

	.FUNCT V-FINGERPRINT
	PRINTI "Upon looking over and dusting the"
	CALL PRSO-PRINT
	PRINTR " you notice that there are no good fingerprints to be found."

	.FUNCT V-FLUSH
	PRINTR "Whatever do you have in mind?"

	.FUNCT V-DIG-AROUND
	PRINTR "You can't do that."

	.FUNCT V-SEARCH-AROUND
	PRINTR "You don't find anything interesting."

	.FUNCT V-SEARCH-GROUND-AROUND
	EQUAL? PRSO,GROUND \?L1
	PRINTR "You don't find anything interesting."
?L1:	PRINTR "Huh?"

	.FUNCT V-SEARCH-GROUND-UNDER
	CALL V-SEARCH-GROUND-AROUND >STACK
	RSTACK

	.FUNCT V-TASTE
	PRINTR "That's ridiculous!"

	.FUNCT ROOM-PEEK,OHERE
	SET 'OHERE,HERE
	CALL SEE-INTO?,PRSO >STACK
	ZERO? STACK /FALSE
	SET 'HERE,PRSO
	PRINTI "You take a quick peek into the "
	PRINTD PRSO
	PRINTI ":"
	CRLF
	CALL DESCRIBE-OBJECTS
	SET 'HERE,OHERE
	RETURN HERE

	.FUNCT SEE-INTO?,THERE,P,L,TX,O
	SET 'P,0
?L1:	NEXTP HERE,P >P
	ZERO? P \?L3
	PRINTI "You can't seem to find that room."
	CRLF
	RFALSE
?L3:	EQUAL? P,P?IN,P?OUT /?L1
	LESS? P,P?OUT /?L1
	GETPT HERE,P >TX
	PTSIZE TX >L
	EQUAL? L,UEXIT \?L9
	GETB TX,REXIT >STACK
	EQUAL? STACK,THERE /TRUE
?L9:	EQUAL? L,DEXIT \?L11
	GETB TX,REXIT >STACK
	EQUAL? STACK,THERE \?L11
	GETB TX,DEXITOBJ >STACK
	FSET? STACK,OPENBIT /TRUE
	PRINTI "The door to that room is closed."
	CRLF
	RFALSE
?L11:	EQUAL? L,CEXIT \?L1
	GETB TX,REXIT >STACK
	EQUAL? STACK,THERE \?L1
	GETB TX,CEXITFLAG >STACK
	VALUE STACK >STACK
	ZERO? STACK \TRUE
	PRINTI "You can't seem to find that room."
	CRLF
	RFALSE

	.FUNCT V-WRITE
	PRINTR "You're nuts."

	.FUNCT V-THROUGH,OBJ=0,M,DIR,PT,PTS
	IN? PRSO,ROOMS \?L1
	EQUAL? HERE,PRSO \?L3
	PRINTR "Duuuhhh!"
?L3:	CALL DIR-FROM,HERE,PRSO >DIR
	ZERO? DIR /?L7
	CALL PERFORM,V?WALK,DIR
	RTRUE
?L7:	PRINTR "You can't go directly from here to there."
?L1:	ZERO? OBJ \?L15
	FSET? PRSO,TAKEBIT /?L11
	PRINTI "You hit your head against the"
	CALL PRSO-PRINT
	PRINTI " as you attempt this feat."
	CRLF
	CALL PRINT-ID,STR?43 >STACK
	RSTACK
?L11:	ZERO? OBJ /?L14
?L15:	PRINTR "You can't do that!"
?L14:	IN? PRSO,WINNER \?L17
	PRINTR "That would involve quite a contortion!"
?L17:	CALL PICK-ONE,YUKS >STACK
	PRINT STACK
	CRLF
	RTRUE

	.FUNCT V-TIME
	CRLF
	PRINTI "It is now "
	CALL TIME-PRINT,PRESENT-TIME
	PRINTR "."

	.FUNCT TIME-PRINT,NUM,HR,PM=0
	DIV NUM,60 >HR
	GRTR? HR,12 \?L1
	SUB HR,12 >HR
	SET 'PM,1
	JUMP ?L3
?L1:	EQUAL? HR,12 \?L3
	SET 'PM,1
?L3:	PRINTN HR
	PRINTI ":"
	MOD NUM,60 >HR
	LESS? HR,10 \?L7
	PRINTI "0"
?L7:	PRINTN HR
	PRINTI " "
	ZERO? PM /?L16
	PUSH STR?44
	JUMP ?L18
?L16:	PUSH STR?45
?L18:	PRINT STACK
	RTRUE

	.FUNCT V-USE
	PRINTR "You should be more specific with what you want to do."

	.FUNCT V-PLAY
	PRINTR "You are adept only at playing the fool."

	.FUNCT V-TURN-UP
	PRINTR "That is silly."

	.FUNCT V-TURN-DOWN
	PRINTR "That is silly."

	.FUNCT V-HIDE-BEHIND
	PRINTI "There's no room to hide behind the"
	CALL PRSO-PRINT
	PRINTR "."

	.FUNCT V-HIDE
	EQUAL? HERE,EAST-LAWN \?L1
	PRINTR "You might hide behind the shed."
?L1:	EQUAL? HERE,LIBRARY \?L5
	PRINTR "You might hide on the balcony."
?L5:	PRINTR "There's no good hiding place here."

	.FUNCT V-CALL-LOSE
	PRINTR "You must supply a verb!"

	.FUNCT V-CALL,PER,MOT=0
	FSET? PRSO,PERSON \?L1
	GETP PRSO,P?CHARACTER >STACK
	GET CHARACTER-TABLE,STACK >PER
	CALL IN-MOTION?,PER >STACK
	ZERO? STACK /?L3
	SET 'MOT,1
?L3:	IN? PER,HERE /?L8
	CALL CORRIDOR-LOOK,PER >STACK
	ZERO? STACK /?L6
?L8:	PRINTD PER
	CALL GRAB-ATTENTION,PER >STACK
	ZERO? STACK /?L11
	ZERO? MOT /?L13
	PRINTR " stops and turns toward you."
?L13:	PRINTR " is facing you."
?L11:	PRINTR " takes no notice of your call."
?L6:	PRINTI "You don't see "
	PRINTD PER
	PRINTR " here."
?L1:	CALL V-CALL-LOSE >STACK
	RSTACK

	.FUNCT V-RUN-OVER
	PRINTR "That doesn't make much sense."

	.FUNCT PRE-RUB-OVER
	CALL PERFORM,V?RUB,PRSI,PRSO
	RTRUE

	.FUNCT V-RUB-OVER
	PRINTR "Do you really expect that to help?"

	.FUNCT V-SPACE
	SET 'P-SPACE,1
	PRINTR "Spacing."

	.FUNCT V-UNSPACE
	SET 'P-SPACE,0
	PRINTR "No spacing."

	.FUNCT V-LOOK-ON
	FSET? PRSO,SURFACEBIT \?L1
	CALL V-LOOK-INSIDE >STACK
	RSTACK
?L1:	PRINTI "There's no surface on the"
	CALL PRSO-PRINT
	PRINTR "."

	.FUNCT V-LOOK-UP
	FSET? PRSO,PERSON \?L1
	PRINTI "What a pervert!"
	CRLF
	CALL PRINT-ID,STR?46
	RTRUE
?L1:	EQUAL? PRSO,ROOMS /?L5
	PRINTR "Your sanity is in question."
?L5:	EQUAL? HERE,IN-ROSES,IN-ORCHARD \?L8
	PRINTR "You can see a balcony directly above you."
?L8:	EQUAL? HERE,SHED-ROOM \?L11
	PRINTR "There's nothing up there."
?L11:	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L14
	PRINTR "There is blue sky above you."
?L14:	PRINTR "You can see the ceiling. It's not the Sistine Chapel, but it's nicely painted."

	.FUNCT V-LOOK-DOWN
	EQUAL? PRSO,ROOMS \?L1
	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L3
	PRINTR "There's dirt there, mostly. And grass."
?L3:	PRINTR "Nothing's interesting about the floor."
?L1:	PRINTR "Your sanity is in question."

	.FUNCT V-YN
	ZERO? QCONTEXT /?L1
	PRINTD QCONTEXT
	PRINTR " ignores you completely."
?L1:	PRINTR "Did you say something?"

	.FUNCT V-THANKS
	ZERO? PRSO \?L11
	ZERO? QCONTEXT /?L1
	ZERO? PRSO /?L7
?L11:	PUSH PRSO
	JUMP ?L6
?L7:	PUSH QCONTEXT
?L6:	PRINTD STACK
	PRINTI " acknowledges your thanks."
	CRLF
	CALL IS-PERSON? >STACK
	CALL PRINT-ID,STR?47,STACK >STACK
	RSTACK
?L1:	PRINTR "Whatever do you have to be thankful for?"

	.FUNCT V-PHONE
	FSET? PRSO,PERSON /?L1
	PRINTR "Perhaps it's time for you to rest...."
?L1:	IN? PRSO,HERE \?L5
	PRINTD PRSO
	PRINTR " is here!"
?L5:	EQUAL? HERE,LIVING-ROOM,LIBRARY,MASTER-BEDROOM /?L8
	PRINTR "There's no phone here."
?L8:	PRINTI "There's no sense in phoning "
	PRINTD PRSO
	PRINTR "."

	.FUNCT V-$0024VERIFY
	PRINTI "Verifying game..."
	CRLF
	VERIFY \?L3
	PRINTR "Game correct."
?L3:	CRLF
	PRINTR "** Game File Failure **"

	.FUNCT THIS-IT?,OBJ,TBL,SYNS
	FSET? OBJ,INVISIBLE /FALSE
	ZERO? P-NAM /?L3
	GETPT OBJ,P?SYNONYM >SYNS
	PTSIZE SYNS >STACK
	DIV STACK,2 >STACK
	DEC 'STACK
	CALL ZMEMQ,P-NAM,SYNS,STACK >STACK
	ZERO? STACK /FALSE
?L3:	ZERO? P-ADJ /?L4
	GETPT OBJ,P?ADJECTIVE >SYNS
	ZERO? SYNS /FALSE
	PTSIZE SYNS >STACK
	DEC 'STACK
	CALL ZMEMQB,P-ADJ,SYNS,STACK >STACK
	ZERO? STACK /FALSE
?L4:	ZERO? P-GWIMBIT /TRUE
	FSET? OBJ,P-GWIMBIT /TRUE
	RFALSE

	.FUNCT PRINT-DESC1,OBJ
	ZERO? OBJ /FALSE
	PRINTD OBJ
	RTRUE

	.FUNCT PRINT-ID,ID,CONDITION=1
	ZERO? CONDITION /FALSE
	PRINTI "[ID: "
	PRINT ID
	PRINTI ", PRSO: "
	CALL PRINT-DESC1,PRSO
	PRINTI ", PRSI: "
	CALL PRINT-DESC1,PRSI
	PRINTI "]"
	RTRUE

	.FUNCT PRINT-DEBUG,TEXT,CONDITION=1
	ZERO? CONDITION /FALSE
	PRINTI "DEBUG FLAG: "
	PRINT TEXT
	RTRUE

	.FUNCT IS-THEFT?
	EQUAL? PRSA,V?TAKE \FALSE
	EQUAL? PRSO,GLOBAL-SAFE,NEW-WILL,PAINTINGS /TRUE
	EQUAL? PRSO,PORTRAITS,SAFE,SILVERWARE \FALSE
	RTRUE

	.FUNCT IS-OBJECT-OR-PROPERTY?
	EQUAL? PRSO,ALLERGONE,ALLERGONE-BOTTLE,APPLIANCE-1 /TRUE
	EQUAL? PRSO,APPLIANCE-2,ASPIRIN,ASPIRIN-BOTTLE /TRUE
	EQUAL? PRSO,B-BALCONY,B-RAILING,BALCONY /TRUE
	EQUAL? PRSO,BATHROOM-MIRROR,BATHTUB,BAXTER-PAPERS /TRUE
	EQUAL? PRSO,BAY-WINDOW,BED,BEDROOM-BALCONY-DOOR /TRUE
	EQUAL? PRSO,BEDROOM-MIRROR,BERRY-BUSH,BLUE-BUTTON /TRUE
	EQUAL? PRSO,BOOKSHELVES,BOURBON,C11-LINENS /TRUE
	EQUAL? PRSO,C11-SHELVES,CHAIR,CHINA /TRUE
	EQUAL? PRSO,CIRCULAR,CLOSET,CORNERSTONE /TRUE
	EQUAL? PRSO,CORRIDOR-WINDOW,CRYSTAL-LAMP,CUP /TRUE
	EQUAL? PRSO,CUPS,DESK-CALENDAR,DINING-ROOM-TABLE /TRUE
	EQUAL? PRSO,DINING-ROOM-WINDOW,DUM-KOF,DUM-KOF-BOTTLE /TRUE
	EQUAL? PRSO,DUNBAR-BATH-DOOR,DUNBAR-CABINET,DUNBAR-DOOR /TRUE
	EQUAL? PRSO,EBULLION,EBULLION-BOTTLE,END-TABLE /TRUE
	EQUAL? PRSO,ENVELOPE,FIREPLACE,FOODS /TRUE
	EQUAL? PRSO,FOUR-POSTER,FOYER-TABLE,FRAGMENT /TRUE
	EQUAL? PRSO,FRONT-DOOR,FRUIT-TREES,GEORGE-BATH-DOOR /TRUE
	EQUAL? PRSO,GEORGE-DOOR,GLASSES,GLOBAL-ALLERGONE /TRUE
	EQUAL? PRSO,GLOBAL-CALL,GLOBAL-CONCERT,GLOBAL-EBULLION /TRUE
	EQUAL? PRSO,CORPSE,GLOBAL-FINGERPRINTS,GLOBAL-HIDDEN-CLOSET /TRUE
	EQUAL? PRSO,GLOBAL-HOUSE,GLOBAL-LADDER,GLOBAL-LIGHT /TRUE
	EQUAL? PRSO,GLOBAL-LOBLO,GLOBAL-NEW-WILL,GLOBAL-OLD-WILL /TRUE
	EQUAL? PRSO,GLOBAL-OMNIDYNE,GLOBAL-PEN,GLOBAL-ROSES /TRUE
	EQUAL? PRSO,GLOBAL-SAFE,GLOBAL-SNEEZO,GLOBAL-WARRANT /TRUE
	EQUAL? PRSO,GRAPE-ARBOR,GUEST-WINDOW,HANGING-PLANTS /TRUE
	EQUAL? PRSO,HIDDEN-DOOR-B,HIDDEN-DOOR-L,HOUSE /TRUE
	EQUAL? PRSO,K-CABINETS,KITCHEN-WINDOW,L-BALCONY /TRUE
	EQUAL? PRSO,L-RAILING,LAB-REPORT,LADDER /TRUE
	EQUAL? PRSO,LETTER,LGTABLE,LIBRARY-BALCONY-DOOR /TRUE
	EQUAL? PRSO,LIBRARY-BUTTON,LIBRARY-CARPET,LIBRARY-DESK /TRUE
	EQUAL? PRSO,LIBRARY-DOOR,LIQUOR-CABINET,LIVING-ROOM-TABLE /TRUE
	EQUAL? PRSO,LOBLO,LOBLO-BOTTLE,LOUNGE /TRUE
	EQUAL? PRSO,LR-CABINETS,MASTER-BATH-COUNTER,MASTER-BEDROOM-DOOR /TRUE
	EQUAL? PRSO,MASTER-BEDROOM-DRESSER,MUD-SPOT,NEW-WILL /TRUE
	EQUAL? PRSO,NEWSPAPER,NOTE-PAPER,P-SHELVES /TRUE
	EQUAL? PRSO,PAINTINGS,PEN,PENCIL /TRUE
	EQUAL? PRSO,PISTOL,PLATES,PORTRAITS /TRUE
	EQUAL? PRSO,RANDOM-MEAL,RECORDS,RECURSIVE-BOOK /TRUE
	EQUAL? PRSO,RED-BUTTON,ROSE,ROURKE-BATH-DOOR /TRUE
	EQUAL? PRSO,ROURKE-DOOR,ROURKE-SHELVES,S-SHELVES /TRUE
	EQUAL? PRSO,SAFE,SAUCER,SAUCERS /TRUE
	EQUAL? PRSO,SCOTCH,SECOND-SECTION,SEURAT /TRUE
	EQUAL? PRSO,SHAVING-GEAR,SHED,SHED-WINDOW /TRUE
	EQUAL? PRSO,SHELF-UNIT,SHOWER,SILVERWARE /TRUE
	EQUAL? PRSO,SINK,SNEEZO,SNEEZO-BOTTLE /TRUE
	EQUAL? PRSO,SOFA,SOGGY-WILL,SOUTH-CLOSET-DOOR /TRUE
	EQUAL? PRSO,STEREO,STUB,SUGAR-BOWL /TRUE
	EQUAL? PRSO,SUICIDE-NOTE,TAPES,TELEPHONE /TRUE
	EQUAL? PRSO,TODAY,TOILET,TOOLS-1 /TRUE
	EQUAL? PRSO,TOOLS-2,TRASH,TRASH-BASKET /TRUE
	EQUAL? PRSO,TRAY,TREE-TOPS,TRESTLE-TABLE /TRUE
	EQUAL? PRSO,UC-LINENS,UC-SHELVES,UC-TOWELS /TRUE
	EQUAL? PRSO,WINDOW,WOOD-PILE \FALSE
	RTRUE

	.FUNCT IS-PERSON?
	EQUAL? PRSO,BAXTER,COATES,DUNBAR /TRUE
	EQUAL? PRSO,GARDENER,GEORGE,GLOBAL-BAXTER /TRUE
	EQUAL? PRSO,GLOBAL-COATES,GLOBAL-DUFFY,GLOBAL-DUNBAR /TRUE
	EQUAL? PRSO,GLOBAL-GARDENER,GLOBAL-GEORGE,GLOBAL-MR-ROBNER /TRUE
	EQUAL? PRSO,GLOBAL-MRS-ROBNER,GLOBAL-ROURKE,GLOBAL-STEVEN /TRUE
	EQUAL? PRSO,HIM-HER,MRS-ROBNER,ROURKE \FALSE
	RTRUE

	.FUNCT IS-SELF?
	EQUAL? PRSO,PLAYER \FALSE
	RTRUE

	.FUNCT DANGEROUS-FOOD?
	CALL IS-OBJECT-OR-PROPERTY? >STACK
	ZERO? STACK /FALSE
	EQUAL? PRSO,FOODS,RANDOM-MEAL \TRUE
	RFALSE

	.FUNCT IS-OBJ-PROP-ANIMAL?
	CALL IS-OBJECT-OR-PROPERTY? >STACK
	RSTACK

	.FUNCT DDESC,STR1,DOOR,STR2
	PRINT STR1
	FSET? DOOR,OPENBIT \?L3
	PRINTI "open"
	JUMP ?L7
?L3:	PRINTI "closed"
?L7:	PRINT STR2
	CRLF
	RTRUE

	.FUNCT WEST-DOOR-F,RARG=0
	EQUAL? RARG,M-BEG \FALSE
	EQUAL? PRSA,V?WALK \FALSE
	EQUAL? PRSO,P?NE,P?NORTH \FALSE
	IN? LADDER,PLAYER \FALSE
	PRINT NO-LADDERS
	CRLF
	RTRUE

	.FUNCT FRONT-PATH-F,RARG=0
	EQUAL? RARG,M-BEG \?L1
	EQUAL? PRSA,V?WALK \?L1
	EQUAL? PRSO,P?NORTH \?L1
	IN? LADDER,PLAYER \?L1
	PRINT NO-LADDERS
	CRLF
	RTRUE
?L1:	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?49,FRONT-DOOR,STR?48
	PRINTR "You can walk around the house from here to the east or west. To the south a rolling lawn leads to the entrance of the estate."

	.FUNCT ROSE-GARDEN-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	PRINTR "You are at the edge of a large rose garden, meticulously maintained by the gardener, Mr. McNabb. He is said to be exceedingly proud of this particular garden, which is the envy of the neighbors. Rows of roses are neatly arranged and the sweet fragrance of the flowers is worth a trip here in itself. An orchard to the east contains many varieties of fruit trees and wide lawns lie to the west and north. The roses themselves are to the south, filling the area between you and the back of the house."

	.FUNCT IN-ORCHARD-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	PRINTI "You are amidst lovely trees bearing apples, pears, peaches, and other fruits. A grape arbor and several berry bushes may also be seen. The kitchen window and east side of the house are just to your south, and a path skirts the orchard to your north."
	CRLF
	ZERO? LADDER-FLAG-2 /?L5
	PRINTR "A ladder is leaning against the balcony above."
?L5:	PRINTR "There is no way into the house from here."

	.FUNCT IN-ROSES-F,RARG=0
	EQUAL? RARG,M-LOOK \?L1
	PRINTI "You are among rows of roses. The ground is soft, and your footsteps leave a rather bad impression as many poor seedlings are trampled underfoot. A safer place to admire the flowers lies to the north. A window to the south allows a view into the house."
	CRLF
	ZERO? LADDER-FLAG \?L5
	PRINTI "There is no way into the house from here."
	CRLF
	JUMP ?L9
?L5:	PRINTI "A ladder is leaning against the house, its upper end against a balcony above."
	CRLF
?L9:	FSET? HOLE,INVISIBLE /TRUE
	PRINTR "There are holes in the soft dirt near your feet."
?L1:	EQUAL? RARG,M-ENTER \FALSE
	ZERO? GARDENER-ANGRY \FALSE
	ZERO? GARDENER-SHOW \FALSE
	LOC GARDENER >STACK
	EQUAL? STACK,ROSE-GARDEN,NORTH-LAWN,WEST-LAWN \FALSE
	PRINTI "In the distance you hear ""Hey! WHAT? You, there!"" and other choice words muffled by a strong Scottish burr and a stiff breeze. Now, standing at the edge of the garden, can be seen the person of Mr. Angus McNabb, the gardener. He advances, looking crazed and gesticulating wildly. With each carefully chosen step in your direction, a barely visible wince of pain comes to his deeply-lined face. He regards you as you would regard the man whose car just ran over your little puppy dog."
	CRLF
	CALL PRINT-ID,STR?50
	ZERO? G-I-G /?L20
	PRINTI """I canna believe it! I've already spent an hour fixing up the ground here where some fool was walkin' aboot--and now you! I canna believe it!"""
	CRLF
?L20:	SET 'GARDENER-ANGRY,1
	SET 'GARDENER-NO-REPLY,1
	CALL QUEUE,I-GARDENER-CALM,90 >STACK
	PUT STACK,0,1
	MOVE GARDENER,HERE
	RTRUE

	.FUNCT I-GARDENER-CALM
	SET 'GARDENER-NO-REPLY,0
	RETURN GARDENER-NO-REPLY

	.FUNCT FOYER-F,RARG=0
	EQUAL? RARG,M-ENTER \?L1
	ZERO? WELCOMED \FALSE
	LESS? PRESENT-TIME,700 \FALSE
	PRINTI "Mrs. Robner appears, walking down a hallway from the north."
	CRLF
	CALL WELCOME >STACK
	RSTACK
?L1:	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?52,FRONT-DOOR,STR?51 >STACK
	RSTACK

	.FUNCT SHALL-1-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?53,ROURKE-DOOR,STR?48 >STACK
	RSTACK

	.FUNCT SHALL-2-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?54,SOUTH-CLOSET-DOOR,STR?48
	CALL DDESC,STR?55,ROURKE-BATH-DOOR,STR?48 >STACK
	RSTACK

	.FUNCT ROURKE-ROOM-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?56,ROURKE-DOOR,STR?48 >STACK
	RSTACK

	.FUNCT ROURKE-BATH-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?57,ROURKE-BATH-DOOR,STR?48 >STACK
	RSTACK

	.FUNCT LIVING-ROOM-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	SET 'WELCOMED,1
	CALL DDESC,STR?59,BAY-WINDOW,STR?58
	PRINTR "A wood pile sits beside a huge fieldstone fireplace. A double doorway leading to the main hall is the only exit. Pictures of Mrs. Robner's colonial ancestors line one wall. The room contains formal seating for at least fifteen people, in several groups of chairs and couches. Tables and cabinets, all of the finest mahogany and walnut, complete the furnishings. On one of the tables is a telephone."

	.FUNCT CORRIDOR-1-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	PRINTI "You are just west of the staircase. There are doors on both sides (north and south) of the hallway, which continues west. "
	FSET? DUNBAR-DOOR,OPENBIT \?L5
	FSET? MASTER-BEDROOM-DOOR,OPENBIT \?L7
	PRINTR "Both doors are open."
?L7:	PRINTR "The door to the south is open."
?L5:	FSET? MASTER-BEDROOM-DOOR,OPENBIT \?L14
	PRINTR "The door to the north is open."
?L14:	PRINTR "Both doors are closed."

	.FUNCT CORRIDOR-3-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?60,GEORGE-DOOR,STR?48 >STACK
	RSTACK

	.FUNCT CORRIDOR-4-F,RARG=0
	EQUAL? RARG,M-ENTER \?L1
	ADD GEORGE-RUN,1 >STACK
	EQUAL? PRESENT-TIME,STACK \?L1
	PRINTI "As you enter the hallway, you catch a glimpse of George running down the stairs."
	CRLF
	RFALSE
?L1:	EQUAL? RARG,M-LOOK \FALSE
	PRINTR "This is the west end of the upstairs hall. To the north is the library, where Mr. Robner was found. Its solid oak door has been knocked down and is lying just inside the entrance to the library. A window which cannot be opened is at the end of the hallway."

	.FUNCT LIBRARY-F,RARG=0
	SET 'WELCOMED,1
	EQUAL? RARG,M-LOOK \FALSE
	PRINTI "This is the library where Mr. Robner's body was found.[RWD_ID: actions:218, VAL: 1] It is decorated in a simple but comfortable style. Mr. Robner obviously spent a great deal of time here. A wide executive desk sits before tall balcony windows which lie at the north of the room. A telephone is sitting on the desk. The east side of the room is composed of three large bookshelf units containing numerous volumes on many topics. The floor is carpeted from wall to wall. The massive oak door which blocked the entrance has been forcibly knocked off its hinges and is lying by the doorway."
	CRLF
	FSET? LIBRARY-BALCONY-DOOR,OPENBIT \?L5
	PRINTI "The window to the balcony has been opened."
	CRLF
?L5:	FSET? HIDDEN-DOOR-L,OPENBIT \TRUE
	PRINTR "The bookshelf unit on the far left has been swung open, revealing a room behind it!"

	.FUNCT LIBRARY-BALCONY-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?61,LIBRARY-BALCONY-DOOR,STR?48
	ZERO? LADDER-FLAG /?L3
	PRINTI "The top of a ladder is resting on the metal railing."
	CRLF
?L3:	IN? GARDENER,ROSE-GARDEN \?L8
	PRINTR "Mr. McNabb is tending to the roses."
?L8:	IN? GARDENER,NORTH-LAWN \TRUE
	PRINTI "Away to the north, Mr. McNabb can be seen "
	CALL PICK-ONE,LAWN-ACTIVITIES >STACK
	PRINT STACK
	PRINTR "."

	.FUNCT HIDDEN-CLOSET-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	PRINTI "This is a secret room situated between the library and the master bedroom. The room is bare and somewhat dusty, as if it were not often used. An unmarked switchplate surrounds two buttons, one blue and one red. A formidable safe is embedded in the south wall."
	FSET? SAFE,OPENBIT \?L5
	PRINTI " The heavy safe door is wide open."
?L5:	CRLF
	FSET? HIDDEN-DOOR-L,OPENBIT \?L10
	PRINTR "The library can be seen through a door to the west."
?L10:	FSET? HIDDEN-DOOR-B,OPENBIT \TRUE
	PRINTR "The master bedroom can be seen through a door to the east."

	.FUNCT RED-BUTTON-F
	EQUAL? PRSA,V?PUSH \FALSE
	FSET? HIDDEN-DOOR-L,OPENBIT \?L3
	FCLEAR HIDDEN-DOOR-L,OPENBIT
	PRINTR "The wall to the west silently closes."
?L3:	FSET HIDDEN-DOOR-L,OPENBIT
	PRINTR "The wall to the west swings open, revealing the library on the other side."

	.FUNCT BLUE-BUTTON-F
	EQUAL? PRSA,V?PUSH \FALSE
	FSET? HIDDEN-DOOR-B,OPENBIT \?L3
	FCLEAR HIDDEN-DOOR-B,OPENBIT
	PRINTR "The wall to the east swings closed."
?L3:	FSET HIDDEN-DOOR-B,OPENBIT
	PRINTI "The wall to the east swings open, revealing the master bedroom on the other side."
	CRLF
	ZERO? HC-ROBNER \TRUE
	IN? MRS-ROBNER,MASTER-BEDROOM \TRUE
	PRINTI "Mrs. Robner, sitting on her bed, appears stunned. She walks over and peeks in, speaks of her complete surprise at the presence of such a place, and returns to her bed, somewhat shaken."
	CRLF
	SET 'HC-ROBNER,1
	RTRUE

	.FUNCT MASTER-BEDROOM-F,RARG=0
	EQUAL? RARG,M-ENTER \?L1
	EQUAL? BAXTER-SEQ-LOC,MASTER-BEDROOM \?L1
	PRINTI "As you walk through the door, there is an explosion from in front of you! The impact of the bullet knocks you to the ground, stunned. You struggle, trying to look up. Another explosion! You fall back, into a long silence."
	CRLF
	QUIT
?L1:	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?63,BEDROOM-BALCONY-DOOR,STR?62
	FSET? HIDDEN-DOOR-B,OPENBIT \TRUE
	PRINTR "Part of the west wall has been swung away, revealing a hidden closet."

	.FUNCT BEDROOM-BALCONY-F,RARG=0
	EQUAL? RARG,M-ENTER \?L1
	EQUAL? BAXTER-SEQ-LOC,BEDROOM-BALCONY \?L1
	PRINTI "As you enter the balcony, there is an explosion and a burst of flame from your left. The pain freezes you for a moment as everything becomes black. While you await a choir of angels, a short chuckle and the sound of running feet are the last you hear."
	CRLF
	CALL PRINT-ID,STR?64
	QUIT
?L1:	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?65,BEDROOM-BALCONY-DOOR,STR?48
	ZERO? LADDER-FLAG-2 /TRUE
	PRINTR "The top of a ladder is visible here, leaning on the railing."

	.FUNCT SHALL-11-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?66,DUNBAR-BATH-DOOR,STR?48 >STACK
	RSTACK

	.FUNCT DUNBAR-BATH-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	PRINTI "This bathroom contains the usual sink, toilet, and bath. A medicine cabinet,[RWD_ID: actions:355, VAL: 1] "
	FSET? DUNBAR-CABINET,OPENBIT \?L5
	PRINTI "lying partially open"
	JUMP ?L9
?L5:	PRINTI "closed"
?L9:	CALL DDESC,STR?67,DUNBAR-BATH-DOOR,STR?48 >STACK
	RSTACK

	.FUNCT DUNBAR-ROOM-F,RARG=0
	EQUAL? RARG,M-ENTER \?L1
	ZERO? DUNBAR-DEAD /?L1
	SET 'CORPSE-SEEN,1
	RETURN CORPSE-SEEN
?L1:	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?68,DUNBAR-DOOR,STR?48 >STACK
	RSTACK

	.FUNCT GEORGE-BATH-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	CALL DDESC,STR?69,GEORGE-BATH-DOOR,STR?48 >STACK
	RSTACK

	.FUNCT GEORGE-ROOM-F,RARG=0
	EQUAL? RARG,M-LOOK \FALSE
	PRINTI "This is George's bedroom. In addition to the normal furnishings, there is a small liquor cabinet, and a stereo with records and tapes. The door, leading to the hallway to the north, is "
	FSET? GEORGE-DOOR,OPENBIT \?L5
	PRINTI "open"
	JUMP ?L9
?L5:	PRINTI "closed"
?L9:	CALL DDESC,STR?70,GEORGE-BATH-DOOR,STR?48
	ZERO? TUNE-ON /TRUE
	PRINTI "Playing on the stereo is a "
	PRINT TUNE-ON
	PRINTR "."

	.FUNCT LAWN-F
	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "The lawn is well manicured."

	.FUNCT BAY-WINDOW-F
	EQUAL? PRSA,V?LOOK-INSIDE \?L1
	EQUAL? HERE,WEST-OF-DOOR \?L3
	PRINTR "You see the living room through the window."
?L3:	IN? GARDENER,SOUTH-LAWN \?L7
	PRINTI "Through the bay windows the gardener, Mr. McNabb, can be seen "
	CALL PICK-ONE,LAWN-ACTIVITIES >STACK
	PRINT STACK
	PRINTR " on the south lawn."
?L7:	PRINTR "You can see the south lawn."
?L1:	EQUAL? PRSA,V?OPEN \FALSE
	FSET? FOYER,TOUCHBIT /FALSE
	PRINTR "The window seems to be latched from the inside."

	.FUNCT ROSE-F
	EQUAL? PRSA,V?SMELL \?L1
	PRINTR "They smell nice."
?L1:	EQUAL? PRSA,V?EXAMINE \?L5
	PRINTR "There are rows of yellow, red, pink, and white roses here."
?L5:	EQUAL? PRSA,V?TAKE \FALSE
	PRINTI "Taking a rose would be most ungracious, and possibly dangerous if Mr. McNabb found out."
	CRLF
	CALL PRINT-ID,STR?71 >STACK
	RSTACK

	.FUNCT HOUSE-F
	EQUAL? PRSA,V?FIND \?L1
	PRINTR "It's right here. Some inspector you are."
?L1:	EQUAL? PRSA,V?THROUGH \?L5
	EQUAL? HERE,FRONT-PATH \?L6
	FSET? FRONT-DOOR,OPENBIT \?L6
	CALL GOTO,FOYER >STACK
	RSTACK
?L6:	EQUAL? HERE,EAST-OF-DOOR \?L8
	FSET? BAY-WINDOW,OPENBIT \?L8
	CALL GOTO,LIVING-ROOM >STACK
	RSTACK
?L8:	PRINTR "You might try the front door."
?L5:	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "The house is a magnificent New England colonial, like many other houses around the lake. It is painted slate gray with white trim."

	.FUNCT GROUND-F
	EQUAL? PRSA,V?BRUSH \?L1
	IN? FRAGMENT,PLAYER \?L1
	ZERO? FRAGMENT-CLEANED \?L1
	CALL PERFORM,V?BRUSH,FRAGMENT
	RTRUE
?L1:	EQUAL? PRSA,V?SEARCH-AROUND,V?SEARCH,V?EXAMINE \FALSE
	EQUAL? HERE,ROURKE-ROOM \?L4
	PRINTR "The floor is hardwood."
?L4:	EQUAL? HERE,FOYER \?L8
	PRINTR "The floor is marble."
?L8:	EQUAL? HERE,IN-ROSES \?L11
	FSET? HOLE,INVISIBLE /?L12
	CALL PERFORM,V?SEARCH-AROUND,HOLE
	RTRUE
?L12:	EQUAL? PRSA,V?SEARCH-GROUND-UNDER \?L14
	EQUAL? PRSI,BALCONY \?L14
	PRINTR "The balcony above is very large. Searching the entire area beneath it would take a great deal of time."
?L14:	PRINTR "There are rows upon rows of roses here. It would take you the best part of a day to search the ground in great detail."
?L11:	PRINTR "You don't find anything new there."

	.FUNCT AIR-F
	EQUAL? PRSA,V?SMELL \FALSE
	EQUAL? HERE,ROSE-GARDEN,IN-ROSES \?L3
	PRINTR "The smell of roses permeates everything."
?L3:	EQUAL? HERE,NORTH-LAWN,EAST-LAWN,WEST-LAWN \?L7
	PRINTR "A breeze carries the faint smell of roses through the air."
?L7:	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L10
	PRINTR "The air is clear and fresh here."
?L10:	CALL FRESH-AIR?,HERE >STACK
	ZERO? STACK \TRUE
	PRINTR "The air is rather musty here."

	.FUNCT FRESH-AIR?,RM,P,L,TX,O
	SET 'P,0
?L1:	NEXTP HERE,P >P
	ZERO? P /FALSE
	LESS? P,P?OUT /?L1
	GETPT HERE,P >TX
	PTSIZE TX >L
	EQUAL? L,DEXIT \?L1
	GETB TX,DEXITOBJ >O
	FSET? O,OPENBIT \?L1
	PRINTI "There is a pleasant breeze coming through the "
	PRINTD O
	PRINTR "."

	.FUNCT LAKE-F
	EQUAL? PRSA,V?THROUGH,V?LEAP,V?SWIM \?L1
	PRINTI "You're not on vacation, but with ideas like that you will probably be given a rather long one."
	CRLF
	CALL PRINT-ID,STR?72 >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?EXAMINE,V?LOOK-INSIDE \FALSE
	EQUAL? HERE,NORTH-LAWN \?L6
	IN? SOGGY-WILL,LAKE \?L6
	PRINTI "A crumpled piece of paper is floating on the water a few feet from shore. With an uncommonly agile motion, you retrieve the drenched paper."
	CRLF
	MOVE SOGGY-WILL,WINNER
	RTRUE
?L6:	PRINTR "Surely you don't suspect the fish also?"

	.FUNCT SHED-F
	EQUAL? PRSA,V?THROUGH \?L1
	EQUAL? HERE,EAST-LAWN,BEHIND-SHED \?L3
	CALL GOTO,SHED-ROOM
	RTRUE
?L3:	PRINTR "Senility strikes!"
?L1:	EQUAL? PRSA,V?LISTEN \?L8
	ZERO? SECRET-MEETING /FALSE
	PRINTI "You hear two muffled voices inside the shed."
	CRLF
	CALL PRINT-ID,STR?73 >STACK
	RSTACK
?L8:	EQUAL? PRSA,V?HIDE-BEHIND \FALSE
	EQUAL? HERE,EAST-LAWN \?L15
	PRINTI "You carefully sneak behind the shed. It seems that no one saw you."
	CRLF
	CALL PRINT-ID,STR?74
	JUMP ?L19
?L15:	PRINTI "You leave the shed and quietly slip behind it. Nobody appears to have seen you."
	CRLF
?L19:	CALL GOTO,BEHIND-SHED
	RTRUE

	.FUNCT PLAYER-F
	RFALSE

	.FUNCT SHOW-HOLE
	PRINTI "McNabb grabs your arm and leads you to a spot deep within the garden and near the house. You might never have found this place alone. He points at the ground, where you see two holes in the soft earth."
	CRLF
	FCLEAR HOLE,INVISIBLE
	SET 'HOLE-SHOWN,1
	RETURN HOLE-SHOWN

	.FUNCT HOLE-F
	ZERO? HOLE-TELL \?L1
	PRINTR "What hole?"
?L1:	EQUAL? PRSA,V?ASK-ABOUT /FALSE
	EQUAL? PRSA,V?FIND \?L6
	EQUAL? HERE,IN-ROSES /?L7
	PRINTR "They're among the roses, or have you forgotten?"
?L7:	FSET? HOLE,INVISIBLE /?L11
	PRINTR "They're right here!"
?L11:	ZERO? HOLE-SHOWN \?L14
	RANDOM 100 >STACK
	GRTR? 80,STACK \?L14
	PRINTR "The rose garden is vast and full of thorny roses. You might look for the rest of the day before you find them."
?L14:	PRINTR "The garden is rather big, even just the area you are searching now, and the holes were small. They're not here, but are probably nearby."
?L6:	EQUAL? HOLE,PRSI,PRSO \?L20
	EQUAL? PRSA,V?LOOK-INSIDE,V?EXAMINE \?L21
	PRINTR "There are two holes here, each about two inches by four inches. They are at least three inches deep and the soil is compacted around them."
?L21:	EQUAL? PRSA,V?SEARCH-GROUND-AROUND \?L27
	EQUAL? PRSO,GROUND /?L26
?L27:	EQUAL? PRSA,V?SEARCH-AROUND \FALSE
?L26:	LOC GARDENER >STACK
	EQUAL? STACK,HERE \?L28
	PRINTI "Mr. McNabb watches you with ill-concealed irritation."
	CRLF
	CALL PRINT-ID,STR?75
?L28:	ZERO? FRAGMENT-FOUND /?L33
	PRINTR "Aside from dirt, organic fertilizer, and small crawly creatures, you turn up nothing but roses."
?L33:	IGRTR? 'RST,2 /?L38
	RANDOM 100 >STACK
	GRTR? 30,STACK \?L37
?L38:	PRINTI "Ouch! You cut your finger on a sharp edge as you dig. You search carefully in the dirt, now that you are sure something is there, and pull up a piece of porcelain, covered with dirt and dried mud.[RWD_ID: actions:589, VAL: 1]"
	CRLF
	CALL PRINT-ID,STR?76
	CALL THIS-IS-IT,FRAGMENT
	MOVE FRAGMENT,WINNER
	FCLEAR FRAGMENT,INVISIBLE
	SET 'FRAGMENT-FOUND,1
	SET 'FRAGMENT-FELT,1
	RETURN FRAGMENT-FELT
?L37:	GET ROSE-DIGS,RST >STACK
	PRINT STACK
	CRLF
	RTRUE
?L20:	PRINTR "There is no hole here."

	.FUNCT FRAGMENT-F
	EQUAL? PRSA,V?EXAMINE \?L1
	ZERO? FRAGMENT-CLEANED /?L3
	PRINTI "The fragment is beautifully hand-painted"
	SET 'FRAGMENT-FLAG,1
	ZERO? CHINA-EXAMINED /?L7
	PRINTI ", exactly like those you saw in the kitchen"
?L7:	PRINTR "."
?L3:	PRINTR "The piece of porcelain is filthy, coated with dried mud. You can barely make out some design underneath the dirt."
?L1:	EQUAL? PRSA,V?FINGERPRINT \?L17
	PRINTR "It's covered with dirt and mud. You realize that there would be no good fingerprints on it."
?L17:	EQUAL? PRSA,V?ANALYZE \?L20
	CALL DO-ANALYZE >STACK
	RSTACK
?L20:	EQUAL? PRSA,V?BRUSH \FALSE
	SET 'FRAGMENT-CLEANED,1
	PRINTI "As you wipe off the piece of porcelain, you notice that it is a fragment of some very beautiful piece, handsomely painted."
	ZERO? CHINA-EXAMINED /?L24
	PRINTI "  The markings are identical to those you saw on the china in the kitchen."
?L24:	CRLF
	RTRUE

	.FUNCT GARDENER-F,RARG=0
	EQUAL? RARG,M-OBJDESC \?L1
	CALL IN-MOTION?,GARDENER >STACK
	ZERO? STACK \TRUE
	LOC GARDENER >STACK
	EQUAL? STACK,ORCHARD \?L5
	PRINTI "Mr. McNabb is here, pruning the trees."
	JUMP ?L23
?L5:	LOC GARDENER >STACK
	EQUAL? STACK,NORTH-LAWN,EAST-LAWN /?L9
	LOC GARDENER >STACK
	EQUAL? STACK,SOUTH-LAWN,WEST-LAWN \?L8
?L9:	PRINTI "Mr. McNabb is here, "
	CALL PICK-ONE,LAWN-ACTIVITIES >STACK
	PRINT STACK
	PRINTI "."
	JUMP ?L23
?L8:	IN? GARDENER,ROSE-GARDEN \?L16
	PRINTI "Mr. McNabb is here, "
	CALL PICK-ONE,GARDEN-ACTIVITIES >STACK
	PRINT STACK
	PRINTI "."
	JUMP ?L23
?L16:	PRINTI "Mr. McNabb is here."
?L23:	ZERO? G-I-G /?L26
	PRINTI " He seems quite worked up and is talking aloud to himself."
	JUMP ?L30
?L26:	ZERO? GARDENER-ANGRY /?L30
	PRINTI " He seems pretty angry about something."
?L30:	CRLF
	CALL CARRY-CHECK,GARDENER >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?GOODBYE,V?HELLO \?L34
	ZERO? GARDENER-ANGRY /?L35
	PRINTR "McNabb grunts briefly in your direction."
?L35:	ZERO? G-I-G /?L39
	PRINTR "He answers absently and starts to mumble quietly about the roses."
?L39:	PRINTI "He replies with a brief nod, and then starts mumbling to himself about the "
	CALL PICK-ONE,GARDEN-MUMBLES >STACK
	PRINT STACK
	PRINTR "."
?L34:	EQUAL? WINNER,GARDENER \?L45
	EQUAL? PRSA,V?SSHOW,V?SHOW \?L46
	EQUAL? PRSI,GLOBAL-HOLE,HOLE /?L48
	EQUAL? PRSI,GLOBAL-ROSES,ROSE \?L46
?L48:	ZERO? HOLE-TELL \?L49
	ZERO? G-I-G \?L49
	PRINTR """I don't know what you're-a talkin' aboot."""
?L49:	ZERO? NO-SHOW /?L53
	PRINTR """I don't think I remember where it was. Now go away,"" he says. He looks a bit annoyed at you, probably for asking him before and then running off."
?L53:	ZERO? HOLE-SHOWN /?L56
	PRINTR """I've already shown you plenty. Now, git!"""
?L56:	EQUAL? HERE,IN-ROSES \?L59
	SET 'GARDENER-SHOW,1
	SET 'HOLE-TELL,1
	CALL SHOW-HOLE >STACK
	RSTACK
?L59:	CALL ESTABLISH-GOAL,GARDENER,IN-ROSES,1
	SET 'GARDENER-SHOW,1
	SET 'HOLE-TELL,1
	PRINTR """Follow me!"" he says, and starts walking toward the roses."
?L46:	EQUAL? PRSA,V?FIND /FALSE
	CALL COM-CHECK,GARDENER >STACK
	ZERO? STACK \TRUE
	CALL PICK-ONE,WHY-ME >STACK
	PRINT STACK
	CRLF
	RTRUE
?L45:	EQUAL? PRSA,V?LISTEN \?L68
	ZERO? G-I-G /?L69
	PRINTI "You can't make out everything, but he seems to be complaining about weeks of work on the roses ruined by someone stomping around in the garden. There are references to elephants and holes. When he's worked up, as now, he doesn't always make much sense."
	CRLF
	SET 'HOLE-TELL,1
	RETURN HOLE-TELL
?L69:	PRINTI "He seems to be mumbling about the "
	CALL PICK-ONE,GARDEN-MUMBLES >STACK
	PRINT STACK
	PRINTR "."
?L68:	EQUAL? PRSA,V?ASK-ABOUT \FALSE
	EQUAL? PRSO,GARDENER \FALSE
	ZERO? GARDENER-NO-REPLY /?L77
	ZERO? GARDENER-SHOW \?L77
	PRINTI """I dinna give a hoot about you or your questions! Now, begone! Steppin' all o'er me roses. A crime, it is! I'll call the police is what!"" He seems pretty angry."
	CRLF
	CALL PRINT-ID,STR?77 >STACK
	RSTACK
?L77:	EQUAL? PRSI,GLOBAL-HOLE \?L81
	ZERO? HOLE-TELL /?L81
	PRINTR """I've already told you. There's holes in my garden!"""
?L81:	EQUAL? PRSI,GLOBAL-WEATHER \?L84
	ZERO? G-I-G \?L84
	PRINTR """Beautiful! What a fine day. Except for the rain Wednesday night, I ha'ent had such a fine week in a long spell. Not that I'm complainin'. You see, with my roses..."" He goes on and on about his roses."
?L84:	EQUAL? PRSI,GLOBAL-LADDER,LADDER \?L87
	PRINTR """What aboot it? I use it for cleanin' the gutters 'n prunin' the trees."""
?L87:	EQUAL? PRSI,GLOBAL-ROSES,ROSE,GLOBAL-WEATHER \?L90
	ZERO? G-I-G /?L91
	PRINTI "He tells you his story. He was tending to the roses this morning when he noticed two deep holes in the garden, with a few roses crushed nearby. He doesn't know when he'll be able to repair the damage.[RWD_ID: actions:738, VAL: 1]"
	CRLF
	SET 'HOLE-TELL,1
	RETURN HOLE-TELL
?L91:	PRINTR "McNabb goes on for some time about the exquisite nature of the garden in general and mentions, for your benefit, some of the finer points of his gardening technique."
?L90:	EQUAL? PRSI,LAWN \?L98
	PRINTR "McNabb tells a long tale of woe and hardship, of days and nights sweating with the lawn mower, roller, and weed puller."
?L98:	EQUAL? PRSI,GEORGE,GLOBAL-GEORGE,BAXTER /?L102
	EQUAL? PRSI,GLOBAL-BAXTER,DUNBAR,GLOBAL-DUNBAR /?L102
	EQUAL? PRSI,MRS-ROBNER,GLOBAL-MRS-ROBNER /?L102
	EQUAL? PRSI,ROURKE,GLOBAL-ROURKE \?L101
?L102:	PRINTR """I don't care much aboot any of them from in the house. I barely even know which is which."" He shakes his head and continues with his work."
?L101:	EQUAL? PRSI,GLOBAL-MR-ROBNER \?L105
	PRINTR """Too bad aboot Mr. Robner. He was a good man, liked to talk aboot the garden. He told me 'McNabb', he says, 'this here's the finest garden I've seen.' We'd talk for hours about planting and gardening. None of the others knows between a rose and a sunflower."" He shakes his head sadly and continues his work."
?L105:	PRINTR """I dinna know nothin' aboot that."""

	.FUNCT BAXTER-F,RARG=0
	EQUAL? RARG,M-OBJDESC \?L1
	CALL IN-MOTION?,BAXTER >STACK
	ZERO? STACK \?L22
	IN? BAXTER,SHED \?L5
	ZERO? SECRET-MEETING /?L5
	PRINTI "Mr. Baxter and Ms. Dunbar are here talking rapidly with each other. They haven't noticed you yet."
	CRLF
	JUMP ?L22
?L5:	ZERO? DUNBAR-BAXTER-MEET /?L8
	SET 'DUNBAR-BAXTER-MEET,0
	PRINTI "Mr. Baxter is in one corner, talking to Ms. Dunbar. He notices you and motions Dunbar to stop talking."
	CRLF
	JUMP ?L22
?L8:	IN? BAXTER,LIVING-ROOM \?L11
	ZERO? POST-WILL /?L12
	PRINTI "Mr. Baxter is offering his sympathies to Mrs. Robner."
	CRLF
	JUMP ?L22
?L12:	IN? RECURSIVE-BOOK,BAXTER \?L16
	FSET RECURSIVE-BOOK,NDESCBIT
	PRINTI "Mr. Baxter is sitting here reading a book."
	CRLF
	JUMP ?L22
?L16:	PRINTI "Mr. Baxter is sitting quietly here."
	CRLF
	JUMP ?L22
?L11:	PRINTI "Mr. Baxter is here."
	CRLF
?L22:	CALL CARRY-CHECK,BAXTER >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?EXAMINE \?L25
	ZERO? SHOT-FIRED /FALSE
	IN? BAXTER,DUNBAR-ROOM \?L28
	PRINTR "Baxter seems out of breath. His hair is disheveled and his hands are somewhat soiled."
?L28:	PRINTR "Mr. Baxter has recovered his composure and looks calm. His hair is a bit disheveled and his hands are dirty."
?L25:	EQUAL? PRSA,V?HELLO \?L36
	PRINTR "Mr. Baxter returns your salutation."
?L36:	EQUAL? PRSA,V?GOODBYE \?L39
	PRINTR "Mr. Baxter nods."
?L39:	EQUAL? WINNER,BAXTER \?L42
	EQUAL? PRSA,V?FIND /FALSE
	CALL COM-CHECK,BAXTER >STACK
	ZERO? STACK \TRUE
	CALL PICK-ONE,WHY-ME >STACK
	PRINT STACK
	CRLF
	RTRUE
?L42:	EQUAL? PRSA,V?SEARCH-OBJECT-FOR,V?SEARCH \?L49
	PRINTI "Mr. Baxter pushes you away abruptly. ""I don't know what game you're playing, Inspector, and frankly I'm not interested. You have been invited here to investigate, not molest innocent persons."""
	CRLF
	CALL PRINT-ID,STR?78 >STACK
	RSTACK
?L49:	EQUAL? PRSA,V?ACCUSE \?L52
	EQUAL? PRSI,GLOBAL-MURDER \?L52
	ZERO? PEN-SEEN /FALSE
	PRINTR "Mr. Baxter turns to run away, but notices Sergeant Duffy by the door. He stops abruptly and faces you."
?L52:	EQUAL? PRSA,V?ARREST \?L58
	ZERO? PEN-SEEN \?L61
	ZERO? BAXTER-SEEN /?L59
?L61:	IN? BAXTER,HERE \?L62
	PRINTI "Sergeant Duffy enters the room solemnly. He places a pair of handcuffs on Mr. Baxter, who is stiff and unspeaking. ""Let's not have any trouble, now."" Duffy remarks to Baxter."
	JUMP ?L66
?L62:	PRINTI "A few moments pass and Sergeant Duffy appears, escorting a handcuffed Mr. Baxter."
?L66:	PRINTI " With that, he leads him from your view and into a police car waiting near the south lawn.

"
	CALL END-HEADER,STR?79
	PRINTI "Congratulations on your work in the Robner case. As I'm sure you are aware, Mr. Baxter was found guilty "
	FSET? BAXTER-PAPERS,TOUCHBIT \?L73
	ZERO? NOTE-READ /?L73
	PRINTI "of two counts of first-degree murder and has been sentenced to two consecutive terms of life imprisonment. My only regret is that Dunbar couldn't stand trial with him. We may never know the complete story behind the Robner murder. But once again, thanks.

"
	CALL PRINT-ID,STR?80
	JUMP ?L77
?L73:	PRINTI "of first-degree murder in the death of Ms. Dunbar. Unfortunately, Baxter remained tight-lipped throughout the proceedings, and except for the revelation that Baxter and Dunbar were lovers, there was no motive established for her murder. The jury acquitted Mr. Baxter in the murder of Mr. Robner, as a motive had not been established. I am indeed sorry that a proper conclusion to the case could not have been made.

"
	CALL PRINT-ID,STR?81
?L77:	CALL CASE-OVER >STACK
	RSTACK
?L59:	IN? CORPSE,DUNBAR-ROOM \?L80
	PRINTI "Trusty Sergeant Duffy enters and places Mr. Baxter under arrest. They leave, Baxter remaining calm.

"
	CALL END-HEADER,STR?82
	PRINTI "I heard today that the jury in the Robner case has voted to acquit Mr. Baxter of both murders at the Robner house."
	CRLF
	FSET? BAXTER-PAPERS,TOUCHBIT \?L85
	PRINTI "While it was clear that Baxter had committed numerous crimes in the Focus case, the jury was unconvinced of the relation between that and the murders. They felt that Ms. Dunbar had committed the first murder, although I can't imagine any scenario in which that would be possible, and had committed suicide in desperation. These explanations leave much to be desired, but what's done is done. I can't help feeling that there is more to this case than has been discovered. Thank you for your work.

"
	CALL PRINT-ID,STR?83
	CALL CASE-OVER >STACK
	RSTACK
?L85:	PRINTI "The jury believed the more probable story: that Ms. Dunbar committed the first murder and then committed suicide when her guilt became clear to you. I don't really believe this any more than you do, but the evidence is vague, you must agree. Thanks again for handling the case.

"
	CALL PRINT-ID,STR?84
	CALL CASE-OVER >STACK
	RSTACK
?L80:	FSET? BAXTER-PAPERS,TOUCHBIT \?L92
	FSET? LAB-REPORT,TOUCHBIT \?L93
	PRINTI "Trusty Sergeant Duffy enters and places Mr. Baxter under arrest. They leave, Baxter remaining calm.

"
	CALL END-HEADER,STR?85
	PRINTI "I am sorry to report that Mr. Baxter was acquitted yesterday of the murder of Mr. Robner. In speaking to the District Attorney, I gathered that the jury was almost convinced of Baxter's guilt, given that he had both motive and a means to enter the house using the ladder. However, the theory had a number of serious flaws, including the means by which Baxter could have administered the drug either without Robner's knowledge or without a struggle. I must confess that I too am baffled. I am convinced that Baxter is guilty, but I fear we will never know for certain.

"
	CALL PRINT-ID,STR?86
	CALL CASE-OVER >STACK
	RSTACK
?L93:	CALL MURDER-NOT-PROVEN,BAXTER,1 >STACK
	RSTACK
?L92:	FSET? LAB-REPORT,TOUCHBIT \?L100
	PRINTI "Duffy enters and places Mr. Baxter under arrest, then leads him away without fuss.

"
	CALL END-HEADER,STR?85
	PRINTI "I am indeed sorry that Mr. Baxter was acquitted yesterday of the murder of Mr. Robner. From the District Attorney, I gather that the jury was completely unconvinced by the our case. They found neither sufficient motive nor any plausible means of introducing the fatal medicine into Mr. Robner's drink. I must confess to being baffled by this case. Perhaps we shall never know the true story of Mr. Robner's murder.

"
	CALL PRINT-ID,STR?87
	CALL CASE-OVER >STACK
	RSTACK
?L100:	CALL MURDER-NOT-PROVEN,BAXTER,0 >STACK
	RSTACK
?L58:	EQUAL? PRSA,V?ASK-FOR \?L106
	IN? CORPSE,DUNBAR-ROOM \?L106
	EQUAL? PRSI,GLOBAL-PEN \?L106
	PRINTI "Baxter reaches instinctively into his jacket and starts to pull out a pen. He hesitates suddenly, pen in hand."
	CRLF
	MOVE PEN,BAXTER
	SET 'PEN-SEEN,1
	RETURN PEN-SEEN
?L106:	EQUAL? PRSA,V?ASK-ABOUT \?L109
	EQUAL? PRSO,BAXTER \?L109
	CALL GRAB-ATTENTION,BAXTER >STACK
	ZERO? STACK /TRUE
	EQUAL? PRSI,RECURSIVE-BOOK \?L112
	PRINTR """A fascinating story, Inspector. A man is found dead behind a locked door, a clear suicide. Yet the detective seems bent on proving that a murder has occured. Rather odd, wouldn't you say?"""
?L112:	EQUAL? PRSI,GLOBAL-CONCERT \?L115
	PRINTR """A marvelous concert! There were works by Beethoven, Sibelius, and Ravel. I never would've guessed you were interested in serious music, Inspector."""
?L115:	EQUAL? PRSI,STUB \?L118
	ZERO? STUB-DX /?L119
	PRINTR """My dear Inspector, it is just as Ms. Dunbar told you."""
?L119:	SET 'STUB-B,1
	IN? DUNBAR,HERE \?L124
	SET 'STUB-BX,1
?L124:	ZERO? STUB-D /?L127
	SET 'CONTRADICTION,1
?L127:	PRINTR """Ah, that must be Ms. Dunbar's ticket stub. I should have told you earlier. Ms. Dunbar was with me at the concert on the night that Marshall killed himself. She became ill at intermission and hired a car to take her back home. You see, Inspector, I know that Ms. Dunbar appreciates classical music, so I occasionally ask her along to my subscription series. I really should have told the other detective, but I didn't think it mattered."""
?L118:	EQUAL? PRSI,GLOBAL-LADDER \?L132
	PRINTR """What ladder? You know, Inspector, your questions are becoming quite tiresome."""
?L132:	EQUAL? PRSI,GLOBAL-MERGER,GLOBAL-OMNIDYNE \?L135
	PRINTR """I didn't realize you had an interest in finance. Before Marshall died, we agreed that the only reasonable way to protect our interests was to be bought out by a larger company which could then provide us with capital for expansion. I had been talking to people at Omnidyne and we agreed in principle on the terms for such an agreement last week. I'm hopeful that we can close the deal quickly."""
?L135:	EQUAL? PRSI,GLOBAL-NEW-WILL \?L138
	GRTR? WILL-TIME,0 \?L139
	PRINTI """It's fortunate for George that Marshall died when he did. It must be quite a relief to know that he'll have plenty of money."" He chuckles softly."
	ZERO? AT-READING /?L143
	PRINTI " ""I guess that explains his reaction at the reading."""
?L143:	CRLF
	RTRUE
?L139:	PRINTR """I don't know much about the family's affairs. Marshall threatened to make a new will, but it certainly appears that he never did."""
?L138:	EQUAL? PRSI,GLOBAL-FOCUS \?L151
	ZERO? B-FOCUS /?L152
	PRINTR """I told you already. There was no legal wrongdoing, only some reporters trying to stir up a fuss."" He appears quite nervous."
?L152:	ZERO? B-NOTE /?L156
	PRINTR """I understand the note no more than you do."" He turns away."
?L156:	PRINTR "There is a flicker of surprise on Baxter's face. ""I'm not sure what you mean. Focus Corporation has been a subsidiary of Robner Corp. for some years. I fail to see its import."""
?L151:	EQUAL? PRSI,GEORGE,GLOBAL-GEORGE \?L162
	CALL DISCRETION,BAXTER,GEORGE
	PRINTR """I've known the boy for some time, and believe me, he's no good. He's wasted more money this year than you've probably earned. His father reprimanded him frequently, as you know. George even threatened his father from time to time."""
?L162:	EQUAL? PRSI,CORPSE,DUNBAR,GLOBAL-DUNBAR \?L165
	PRINTR """Ms. Dunbar is an efficient and tireless worker. She has been of tremendous help to Marshall and has been working quite hard for him lately. She had a great deal of respect for him, that's clear. She has a keen mind and is an exceptional strategic planner for the corporation."""
?L165:	EQUAL? PRSI,MRS-ROBNER,GLOBAL-MRS-ROBNER \?L168
	PRINTR """Leslie is a fine woman from a distinguished family. She was much more outgoing than Marshall, but she seems to have become accustomed to the quiet life here. I am quite grieved for her."""
?L168:	EQUAL? PRSI,ROURKE,GLOBAL-ROURKE /?L172
	EQUAL? PRSI,GARDENER,GLOBAL-GARDENER \?L171
?L172:	PRINTI """I don't know much about "
	PRINTD PRSI
	PRINTR """."
?L171:	EQUAL? PRSI,GLOBAL-OLD-WILL \?L175
	PRINTR """I really don't know anything about the old will."""
?L175:	EQUAL? PRSI,GLOBAL-MR-ROBNER \?L178
	PRINTR """Marshall was a truly great man...a brilliant manager; he started the corporation single-handedly about 25 years ago and is mostly responsible for its reputation. I owe him a great deal. He was also a great philanthropist and got the corporation involved in many charitable works. I am not given to shows of emotion, Inspector, but I will miss him greatly."""
?L178:	PRINTR """I can't help you there."""
?L109:	EQUAL? PRSA,V?SHOW,V?CONFRONT \FALSE
	CALL GRAB-ATTENTION,BAXTER >STACK
	ZERO? STACK /TRUE
	EQUAL? PRSI,LAB-REPORT \?L187
	PRINTR "Baxter studies the report carefully. ""This is quite peculiar. It appears that Marshall was murdered. I wonder...I would have a word with George if I were you, Inspector."""
?L187:	EQUAL? PRSI,STUB \?L190
	CALL PERFORM,V?ASK-ABOUT,BAXTER,STUB
	RTRUE
?L190:	EQUAL? PRSI,NOTE-PAPER \?L191
	ZERO? NOTE-READ /?L191
	ZERO? B-NOTE \?L191
	SET 'B-NOTE,1
	PRINTR "He reads it carefully against the light, then speaks: ""I really don't know what to make of this. Marshall seems to be insisting that I do something. I'm afraid we will never know, since I never got the note."""
?L191:	EQUAL? PRSI,BAXTER-PAPERS \?L194
	ZERO? B-FOCUS \?L194
	SET 'B-FOCUS,1
	PRINTI "He reads slowly and leafs through the pages. ""I'm afraid I haven't been entirely candid with you. There was some trouble a few years ago with Focus Corp. because of some, let us say, irresponsible dealings on my part. Marshall agreed to cover up my involvement to save the company any bad publicity."""
	CRLF
	ZERO? B-NOTE /TRUE
	PRINTR """I can't understand why he would be insisting that I do this or that, though, as it says on that note you showed me. He must have changed his mind, since I never received the note."""
?L194:	EQUAL? PRSI,LETTER \?L202
	PRINTR """Very interesting, Inspector, but I assure you that this fellow is quite off base about the business. Marshall and I were in complete agreement when it came to those matters. I can't imagine where he got that idea."""
?L202:	PRINTI """I can't understand why you are showing this to me. Have you nothing better to do than "
	CALL PICK-ONE,BAXTER-ANNOYED >STACK
	PRINT STACK
	PRINTR "?"""

	.FUNCT MURDER-NOT-PROVEN,PERSON?1,ARG=1
	PRINTI "Sergeant Duffy dutifully appears and escorts "
	PRINTD PERSON?1
	PRINTI " from the grounds.

"
	CALL END-HEADER,STR?88
	PRINTI "I am sorry to inform you that the District Attorney's office has declined to seek an indictment against "
	PRINTD PERSON?1
	PRINTI " in the case of the death of Mr. Robner, against your recommendation. It is still not clear that Mr. Robner was murdered, although, as you point out, there are a number of suspicious characters in the Robner household."
	ZERO? ARG \?L5
	PRINTI "  Additionally, Mr. Baxter seems to have had no clear motive for killing Mr. Robner."
?L5:	CRLF
	EQUAL? PERSON?1,BAXTER \?L10
	PRINTI "Mr. Baxter has threatened to sue the department for malicious arrest, but we feel that he will prefer to avoid the publicity."
	CRLF
?L10:	PRINTI "     Please be more careful in the future!

"
	CALL CASE-OVER >STACK
	RSTACK

	.FUNCT GLOBAL-PERSON
	EQUAL? PRSA,V?ASK-ABOUT \?L4
	FSET? PRSO,PERSON \?L4
	IN? PRSO,GLOBAL-OBJECTS \FALSE
?L4:	EQUAL? PRSA,V?CALL-LOSE,V?CALL,V?FOLLOW /FALSE
	EQUAL? PRSA,V?WAIT-FOR,V?FIND,V?WHAT /FALSE
	EQUAL? PRSA,V?TELL \?L6
	PRINTI "It's not clear to whom you are referring."
	CRLF
	SET 'P-CONT,0
	RTRUE
?L6:	FSET? PRSO,PERSON \?L10
	PRINTD PRSO
	JUMP ?L14
?L10:	PRINTD PRSI
?L14:	EQUAL? PRSA,V?TELL,V?ASK-ABOUT \?L17
	GETP HERE,P?CORRIDOR >STACK
	GETP PRSO,P?CHARACTER >STACK
	GET CHARACTER-TABLE,STACK >STACK
	LOC STACK >STACK
	GETP STACK,P?CORRIDOR >STACK
	BAND STACK,STACK >STACK
	ZERO? STACK /?L17
	PRINTI " can't hear you."
	CRLF
	JUMP ?L24
?L17:	EQUAL? PRSO,GLOBAL-MRS-ROBNER \?L21
	EQUAL? HERE,MASTER-BATH \?L21
	IN? MRS-ROBNER,MASTER-BEDROOM \?L21
	PRINTI " can't hear you."
	CRLF
	JUMP ?L24
?L21:	PRINTI " isn't here!"
	CRLF
?L24:	SET 'P-CONT,0
	RTRUE

	.FUNCT GEORGE-F,RARG=0
	EQUAL? RARG,M-OBJDESC \?L1
	CALL IN-MOTION?,GEORGE >STACK
	ZERO? STACK \TRUE
	IN? GEORGE,KITCHEN \?L5
	PRINTI "George is here, preparing a snack."
	CRLF
	JUMP ?L30
?L5:	IN? GEORGE,DINING-ROOM \?L8
	PRINTI "George is sitting at the table, eating some red herrings."
	CRLF
	JUMP ?L30
?L8:	IN? GEORGE,LIVING-ROOM \?L11
	ZERO? POST-WILL /?L12
	PRINTI "George is staring contentedly out the bay window."
	CRLF
	JUMP ?L30
?L12:	PRINTI "George is here, pacing around the room."
	CRLF
	JUMP ?L30
?L11:	IN? GEORGE,NORTH-LAWN \?L19
	PRINTI "George is here, staring out over the lake."
	CRLF
	JUMP ?L30
?L19:	IN? GEORGE,GEORGE-ROOM \?L22
	ZERO? GEORGE-WAIT \?L22
	ZERO? TUNE-ON /?L23
	PRINTI "George is lying on his bed, listening intently to a "
	PRINT TUNE-ON
	PRINTI "."
	CRLF
	JUMP ?L30
?L23:	PRINTI "George is sitting on his bed, deep in thought."
	CRLF
	JUMP ?L30
?L22:	PRINTI "George is here."
	CRLF
?L30:	CALL CARRY-CHECK,GEORGE >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?GOODBYE,V?HELLO \?L33
	PRINTR "George looks up and grunts disinterestedly."
?L33:	EQUAL? WINNER,GEORGE \?L36
	EQUAL? PRSA,V?FIND /FALSE
	CALL COM-CHECK,GEORGE >STACK
	ZERO? STACK \TRUE
	CALL PICK-ONE,WHY-ME >STACK
	PRINT STACK
	CRLF
	RTRUE
?L36:	EQUAL? PRSA,V?CALL \?L43
	GRTR? GEORGE-RUN,0 \?L43
	PRINTR """Don't bother me!"" he shouts, and continues on."
?L43:	EQUAL? PRSA,V?SEARCH-OBJECT-FOR,V?SEARCH \?L46
	GET GOAL-TABLES,GEORGE-C >STACK
	GET STACK,GOAL-S >STACK
	EQUAL? STACK,NORTH-LAWN \?L47
	PRINTI "George points accusingly at you. ""Don't come near me! I'm getting sick and tired of your accusing tone. Get lost!"""
	CRLF
	CALL PRINT-ID,STR?89 >STACK
	RSTACK
?L47:	PRINTI """Buzz off! Don't come back until you get a search warrant!"" He chuckles in contempt."
	CRLF
	CALL PRINT-ID,STR?90 >STACK
	RSTACK
?L46:	EQUAL? PRSA,V?ACCUSE \?L54
	PRINTI "George sneers at you. ""What an ass! Go on, try to prove it!"""
	CRLF
	CALL PRINT-ID,STR?91 >STACK
	RSTACK
?L54:	EQUAL? PRSA,V?ARREST \?L57
	ZERO? NEW-WILL-SEEN \?L60
	ZERO? GEORGE-RUN /FALSE
?L60:	PRINTI "Faithful Sergeant Duffy enters and handcuffs George, who spits at you. ""You filthy, stinking..."" is all you hear as George is carted off struggling.

"
	CALL END-HEADER,STR?92
	PRINTI "I am sorry to inform you that George Robner was acquitted in the death of his father today. It seems the evidence, consisting mainly of a new will which George admitted under pressure that he was trying to destroy, was insufficient for the jury to return a guilty verdict. Although I suspect that George may have committed the crime, his arrest was a bit premature.

"
	CALL CASE-OVER >STACK
	RSTACK
?L57:	EQUAL? PRSA,V?SHOW,V?CONFRONT \?L66
	CALL GRAB-ATTENTION,GEORGE >STACK
	ZERO? STACK /TRUE
	EQUAL? PRSI,LAB-REPORT \?L69
	PRINTR "George scans the report. ""Killed, eh? I wonder who might have wanted..."" He cocks his head in thought. ""I'm sorry, Inspector, I really should act a bit better with you. I thought you were just snooping about, digging up dirt about the family. I'm not sure...I can't believe Mom would have anything to do with it, although...Baxter, now there's a worm for you. He'd do anything, maybe even murder, to get ahead. I just don't know."""
?L69:	EQUAL? PRSI,LETTER \?L72
	PRINTI "George reads the letter quickly. ""Pompous ass! What does he know about it?"" He pauses. ""I thought Mom was having an affair. How nice for the lovebirds that Dad is dead! They can finish their honeymoon plans without worrying. It's perfect!"" With a bitter laugh, he throws the letter to the ground."
	CRLF
	SET 'G-LETTER,1
	MOVE LETTER,HERE
	RTRUE
?L72:	EQUAL? PRSI,DESK-CALENDAR \?L75
	EQUAL? CALENDAR-PAGE,8 \?L75
	ZERO? GEORGE-SEQUENCE \?L75
	SET 'G-CALENDAR,1
	PRINTI "[RWD_ID: actions:1230, VAL: 1]"
	GRTR? WILL-TIME,0 \?L78
	PRINTI """I...uh...I don't really know what to say. I guess that Dad...but there is no other...I can't help you...sorry."" George seems to be quite agitated."
	CRLF
	CALL GEORGE-HACK >STACK
	RSTACK
?L78:	PRINTR "George tilts his head in thought (or perhaps surprise) but recovers quickly. ""All I know is that Coates is my father's personal attorney."""
?L75:	EQUAL? PRSI,NEWSPAPER \FALSE
	ZERO? NEWSPAPER-READ /FALSE
	CALL DISCRETION,GEORGE,BAXTER
	PRINTR """So Baxter's arranged the merger. I'll be damned. That's strange, since Dad was opposed to the whole thing. He's worried about losing control of the company ever since he had to sell off most of his interest. I bet he doesn't even own enough shares to prevent the deal."" He shakes his head in disbelief."
?L66:	EQUAL? PRSA,V?ASK-ABOUT \FALSE
	EQUAL? PRSO,GEORGE \FALSE
	CALL GRAB-ATTENTION,GEORGE >STACK
	ZERO? STACK /TRUE
	EQUAL? PRSI,GLOBAL-HIDDEN-CLOSET \?L92
	ZERO? SAFE-SEEN \?L95
	ZERO? NEW-WILL-SEEN /?L93
?L95:	PRINTR """What of it? Dad's safe is there. I don't think anyone knows about it except Dad and me."""
?L93:	PRINTR """Hidden closet, you say? Hmm. I think I'd know if there was one, but there isn't!"""
?L92:	EQUAL? PRSI,GLOBAL-MERGER \?L101
	PRINTR """I've heard talk of a merger between Dad's company and another one, but I don't think it's happened yet. Dad would be furious if it did, though. I can tell you that!"""
?L101:	EQUAL? PRSI,GLOBAL-STEVEN \?L104
	ZERO? G-LETTER /?L105
	PRINTR """He's a little worm who's been coming by lately. He's one of those fancy ski-instructor types, if you know what I mean. From what I've seen, it wouldn't surprise me if he and Mom are having an affair."""
?L105:	CALL DISCRETION,GEORGE,MRS-ROBNER
	PRINTR """Steven? Oh, you must mean the guy who comes around for Mom now and then. I don't know much about him. Dresses a bit above himself, I'll say that much."""
?L104:	EQUAL? PRSI,BAXTER,GLOBAL-BAXTER \?L112
	PRINTR """I don't know much about him, really. With Baxter, it's always business, and he's not here much except to discuss business with Dad. You might ask Ms. Dunbar about him, though. She handled lots of Dad's business matters herself, so they work together a lot. They probably know each other pretty well."""
?L112:	EQUAL? PRSI,CORPSE,DUNBAR,GLOBAL-DUNBAR \?L115
	PRINTR """She's been here for about ten years, I guess. She knows a lot about Dad's business, and he lets her take care of a lot of stuff by herself. Other than that, I can't say. We don't get in each other's way. I think she's heard Dad lecture me too often."""
?L115:	EQUAL? PRSI,MRS-ROBNER,GLOBAL-MRS-ROBNER \?L118
	PRINTR """She's OK. Not as stuck up as Dad about money. We've always gotten along pretty well. I think she understands me better than Dad ever did."""
?L118:	EQUAL? PRSI,GLOBAL-SAFE \?L121
	ZERO? NEW-WILL-SEEN /?L122
	PRINTR """Let's not go into it, ok? You caught me looking for the will. Well, what of it? I didn't kill Dad, if that's what you're thinking. Leave me alone!"""
?L122:	ZERO? SAFE-SEEN /?L126
	PRINTR """You mean my father's safe? Yeah, if he brings important papers home he puts them in there. He keeps most important stuff at the office at the bank. You really startled me in there. I thought I might be able to get it open. Dad always acted like it was a big secret, something out of a spy story. Anyway, it turns out I don't remember the combination. It was a long time ago."""
?L126:	ZERO? GEORGE-SEQUENCE /?L129
	PRINTR "George turns toward you with rage in his eyes. ""I don't know anything about any damn safe! Now leave me alone or I'll have you kicked out of here!"" He turns away."
?L129:	PRINTR "George looks briefly toward the ceiling, as if recalling something. ""Oh, I'm sorry. A safe? No, I don't know about any safe...except at the office, that is. I think there's one there."""
?L121:	EQUAL? PRSI,GARDENER,GLOBAL-GARDENER \?L135
	PRINTR """McNabb, that old bore? Always talking about the damn roses and weeds. Don't ask him about them, unless you have all day."""
?L135:	EQUAL? PRSI,ROURKE,GLOBAL-ROURKE \?L138
	CALL DISCRETION,GEORGE,ROURKE
	PRINTR """She's nice but awfully nosy. She acts like she knows everything that goes on around here, but she doesn't know the half of it."""
?L138:	EQUAL? PRSI,GLOBAL-OLD-WILL \?L141
	PRINTR """I know what you know."""
?L141:	EQUAL? PRSI,NEW-WILL,GLOBAL-NEW-WILL \?L144
	GRTR? PRESENT-TIME,WILL-TIME \?L145
	FSET? NEW-WILL,TOUCHBIT \?L147
	PRINTR """You should know what it says."""
?L147:	ZERO? NEW-WILL-SEEN /?L151
	PRINTR """I don't know what you're talking about. There's no new will. Dad never wrote one! He would just threaten me when I asked for spending money."""
?L151:	ZERO? GEORGE-SEQUENCE /?L154
	PRINTR """Look. I know the same as you. There's no new will. I'm sure of it. Dad would have rubbed my nose in it: you can be sure of that!"""
?L154:	ZERO? AT-READING /?L157
	PRINTR """You were there when I was. Coates says there's no new will."""
?L157:	ZERO? WILL-TIME \?L160
	PRINTR """Dad always threatened to write a new will, but I guess he ran out of time."" He chuckles disturbingly."
?L160:	PRINTR """Oh, yeah. You skipped out on the will reading. Anyhow, Coates says there's no new will, and he should know, right?"""
?L145:	ZERO? G-CALENDAR /?L166
	PRINTR """I know what you're getting at...the desk calendar. Look, I've heard nothing about a new will. Maybe the old man just wanted to change something."""
?L166:	PRINTR """I don't know anything about any new will."""
?L144:	EQUAL? PRSI,GLOBAL-MR-ROBNER \?L172
	PRINTR """Like I told your detective friend yesterday, we didn't get along too well. He was always riding me, giving me a hard time."" George gets worked up talking about it.""Look, man. I'm not going to lie and say I loved him, right? He got what..."" He stops in mid-sentence."
?L172:	EQUAL? PRSI,GLOBAL-FOCUS \?L175
	PRINTR """Focus...Focus...That name rings a bell. Something about the company, quite a while ago...what was it? I can't remember now. I don't pay much attention to business stuff: I've got better things to do."""
?L175:	PRINTR """I haven't a clue."""

	.FUNCT DESK-CALENDAR-F,RARG=0,PAG
	EQUAL? PRSA,V?EXAMINE,V?READ \?L8
	EQUAL? PRSI,INTNUM \?L8
	ZERO? P-NUMBER /?L5
	GRTR? P-NUMBER,30 \?L3
?L5:	PRINTI "Why?  Is it your birthday?"
	CRLF
	JUMP ?L8
?L3:	PRINTI "You flip the pages until you find the page."
	CRLF
	SET 'CALENDAR-PAGE,P-NUMBER
?L8:	EQUAL? PRSA,V?CLOSE \?L12
	PRINTI "It's not worth the effort."
	CRLF
	JUMP ?L16
?L12:	EQUAL? PRSA,V?TURN \?L16
	ZERO? PRSI \?L16
	EQUAL? CALENDAR-PAGE,31 \?L17
	PRINTR "You have reached the end of the book."
?L17:	INC 'CALENDAR-PAGE
	SET 'PRSA,V?READ
?L16:	SET 'PAG,CALENDAR-PAGE
	EQUAL? RARG,M-OBJDESC \?L23
	PRINTI "A desk calendar is here, open to July "
	PRINTN CALENDAR-PAGE
	PRINTR "."
?L23:	EQUAL? PRSA,V?EXAMINE,V?READ \?L27
	PRINTI "It is open to July "
	PRINTN CALENDAR-PAGE
	PRINTI "."
	CRLF
	EQUAL? PAG,8 \?L30
	PRINTR "There is only one notation here, in the 9AM spot:[RWD_ID: actions:1426, VAL: 1] ""Call Coates: Will completed""."
?L30:	EQUAL? PAG,7 \?L34
	PRINTR "The only listing here is an appointment with Baxter at 2PM at the Robner Corp. office."
?L34:	PRINTR "Nothing of interest is scheduled on this date."
?L27:	EQUAL? PRSA,V?TURN \FALSE
	EQUAL? PRSI,INTNUM /?L41
	PRINTR "Huh?"
?L41:	GRTR? P-NUMBER,30 \?L45
	PRINTI "Thirty days hath September,
April, June, and November,
All the rest have "
	PRINTN P-NUMBER
	PRINTR "???"
?L45:	ZERO? P-NUMBER \?L48
	PRINTR "Do you suppose that would be June 30?"
?L48:	SET 'CALENDAR-PAGE,P-NUMBER
	PRINTI "The calendar is now open to July "
	PRINTN P-NUMBER
	PRINTR "."

	.FUNCT NOTE-PAPER-F
	EQUAL? PRSA,V?EXAMINE,V?READ \?L1
	ZERO? NOTE-READ /?L3
	CALL PAD-READ,STR?93 >STACK
	RSTACK
?L3:	EQUAL? P-ADVERB,W?CAREFULLY \?L5
	PRINTR "There are some indentations on the paper. Something may have been written on the previous sheet."
?L5:	PRINTR "There doesn't seem to be anything written on the pad."
?L1:	EQUAL? PRSA,V?RUB \?L11
	ZERO? PRSI \?L12
	PRINTR "You should try rubbing or shading the pad with something."
?L12:	EQUAL? PRSI,PENCIL \FALSE
	CALL PAD-READ,STR?94 >STACK
	RSTACK
?L11:	EQUAL? PRSA,V?RUN-OVER \?L18
	EQUAL? PRSO,PENCIL \?L18
	CALL PAD-READ,STR?95 >STACK
	RSTACK
?L18:	EQUAL? PRSA,V?HOLD-UP \FALSE
	EQUAL? PRSI,GLOBAL-LIGHT \FALSE
	CALL PAD-READ,STR?96 >STACK
	RSTACK

	.FUNCT PAD-READ,STR
	SET 'NOTE-READ,1
	PRINT STR
	PRINTR " reveals impressions left by writing on the previous sheet.[RWD_ID: actions:1475, VAL: 1] The writer must have borne down heavily, but only a few words come out clearly:

  Baxter,

                  st time
 nsist             op       merg
       mnidy               Oth
          forc
         ocumen     y poss
  plica     y      Focus s
          recons
late!
                              rsha
"

	.FUNCT READ-SECOND-SECTION
	SET 'NEWSPAPER-READ,1
	PRINTR "In your study of the second section, a small item in the financial section catches your eye. A merger between Robner Corp. and Omnidyne is set to be concluded shortly. There is a picture of Mr. Baxter with Omnidyne president Starkwell, both smiling broadly. Baxter is quoted as saying that the deal will enable the financially ailing Robner Corp. to continue to produce the highest-quality products. The article points out that Marshall Robner, who founded Robner Corp. but is no longer its major stockholder, had been found dead yesterday morning, an apparent suicide victim. Baxter is quoted as saying that Robner was in full agreement with the terms of the merger."

	.FUNCT NEWSPAPER-F
	EQUAL? PRSA,V?OPEN,V?READ,V?EXAMINE \FALSE
	EQUAL? P-ADVERB,W?CAREFULLY,W?SLOWLY \?L3
	CALL READ-SECOND-SECTION >STACK
	RSTACK
?L3:	PRINTR "The Daily Herald is a local paper in two sections. In your cursory look at the first, you find a brief obituary for Mr. Robner. It details his career, including the formation of Robner Corp. A few years ago, Mr. Robner and the Robner Corp. were given a prestigious award for works in the community. At that time Robner said ""I am proud to accept this award for the Corporation. Robner Corp is my whole life, and I will continue to guide it for the public interest as long as I live."" Robner himself had won great public acclaim for his charitable works."

	.FUNCT SECOND-SECTION-F
	EQUAL? PRSA,V?TAKE \?L1
	IN? NEWSPAPER,WINNER \?L3
	PRINTR "You already have the whole newspaper."
?L3:	CALL PERFORM,V?TAKE,NEWSPAPER
	RTRUE
?L1:	IN? NEWSPAPER,WINNER /?L8
	PRINTR "You don't have the newspaper."
?L8:	EQUAL? PRSA,V?READ,V?EXAMINE \?L11
	CALL READ-SECOND-SECTION
	RTRUE
?L11:	EQUAL? PRSA,V?DROP \FALSE
	PRINTI "You shouldn't leave pieces of the paper lying around. At least leave the whole thing."
	CRLF
	CALL PRINT-ID,STR?97 >STACK
	RSTACK

	.FUNCT I-MAIL
	EQUAL? HERE,FRONT-PATH /?L3
	EQUAL? HERE,FOYER \?L6
	FSET? FRONT-DOOR,OPENBIT \?L1
?L3:	PRINTI "A mailman walks briskly up to you, hands you an envelope, and departs."
	CRLF
	MOVE ENVELOPE,WINNER
	FSET ENVELOPE,TOUCHBIT
	RTRUE
?L1:	EQUAL? HERE,FOYER \?L6
	PRINTI "There is a short rap on the front door. A moment later, a thin envelope appears under the door."
	CRLF
	MOVE ENVELOPE,FOYER
	PUTP ENVELOPE,P?FDESC,STR?98
	CALL QUEUE,I-MAIL-2,60 >STACK
	PUT STACK,0,1
	RTRUE
?L6:	MOVE ENVELOPE,FOYER-TABLE
	CALL QUEUE,I-MAIL-2,60 >STACK
	PUT STACK,0,1
	EQUAL? HERE,SOUTH-LAWN,WEST-OF-DOOR,EAST-OF-DOOR \FALSE
	PRINTR "You notice a mailman stop by the house briefly and depart."

	.FUNCT I-MAIL-2
	LOC ENVELOPE >STACK
	EQUAL? STACK,FOYER,FOYER-TABLE \FALSE
	CALL ESTABLISH-GOAL,ROURKE,FOYER,1
	CALL QUEUE,I-MAIL-3,-1 >STACK
	PUT STACK,0,1
	RFALSE

	.FUNCT I-MAIL-3
	ZERO? ROURKE-MAIL /?L1
	LOC MRS-ROBNER >STACK
	IN? ROURKE,STACK \FALSE
	CALL QUEUE,I-MAIL-3,0
	CALL ESTABLISH-GOAL,ROURKE,ROURKE-ROOM,1
	IN? ENVELOPE,WINNER \?L5
	LOC MRS-ROBNER >STACK
	IN? WINNER,STACK \?L5
	PRINTI "Mrs. Rourke walks up to Mrs. Robner. ""I'm sorry, Ma'am, but this gentleman has a letter that just arrived for you."" Mrs. Robner grabs the letter from you. ""That is none of your business!"""
	CRLF
	JUMP ?L9
?L5:	IN? ENVELOPE,ROURKE \TRUE
?L9:	LOC ROURKE >STACK
	EQUAL? HERE,STACK \?L11
	IN? ENVELOPE,ROURKE \?L13
	PRINTI "Mrs. Rourke hands an envelope to Mrs. Robner."
?L13:	MOVE ENVELOPE,MRS-ROBNER
	ZERO? ENVELOPE-OPENED /?L18
	PRINTR " Mrs. Robner examines the envelope, then turns to you. ""You did this, I suppose."" she says. ""You had no right! I expected better treatment than this. You would think I were suspected of wrongdoing!"""
?L18:	PRINTI " Mrs. Robner examines the envelope briefly, then puts it in her pocket."
	CRLF
	REMOVE ENVELOPE
	RTRUE
?L11:	REMOVE ENVELOPE
	RFALSE
?L1:	IN? ROURKE,FOYER \FALSE
	LOC ENVELOPE >STACK
	EQUAL? STACK,FOYER-TABLE,FOYER \?L28
	MOVE ENVELOPE,ROURKE
	FSET ENVELOPE,TOUCHBIT
	LOC MRS-ROBNER >STACK
	CALL ESTABLISH-GOAL,ROURKE,STACK,1
	SET 'ROURKE-MAIL,1
	EQUAL? HERE,FOYER \FALSE
	PRINTR "Mrs. Rourke takes the envelope and starts to walk away."
?L28:	CALL UNPRIORITIZE,ROURKE
	RFALSE

	.FUNCT I-NEWSPAPER
	MOVE NEWSPAPER,FRONT-PATH
	EQUAL? HERE,SOUTH-LAWN,FRONT-PATH \FALSE
	PRINTR "The local paperboy, in an amazing athletic feat, throws a newspaper toward the house from a distance of at least 100 feet. It even lands beside the front door, rather than in the bushes."

	.FUNCT I-WILL-READING
	LESS? PRESENT-TIME,760 \?L1
	IN? MRS-ROBNER,LIVING-ROOM \?L3
	IN? DUNBAR,LIVING-ROOM \?L3
	IN? BAXTER,LIVING-ROOM \?L3
	IN? GEORGE,LIVING-ROOM /?L1
?L3:	SET 'WILL-HOLD,1
	CALL QUEUE,I-WILL-READING,-1
	EQUAL? HERE,LIVING-ROOM \FALSE
	RANDOM 100 >STACK
	GRTR? 70,STACK /FALSE
	RANDOM 100 >STACK
	GRTR? 50,STACK \?L8
	PRINTR "Mr. Coates asks everyone to be patient, as not everyone is present."
?L8:	PRINTR "Mr. Coates appears distracted, looking frequently toward the door."
?L1:	EQUAL? HERE,LIVING-ROOM /?L52
	IGRTR? 'WILL-WAIT,15 \?L16
	CALL QUEUE,I-WILL-MISSED,-1 >STACK
	PUT STACK,0,1
	CALL WILL-HACK
	RFALSE
?L16:	CALL QUEUE,I-WILL-READING,-1
	RFALSE
?L52:	SET 'AT-READING,1
	GRTR? PRESENT-TIME,720 \?L22
	GRTR? WILL-WAIT,3 \?L22
	PRINTI "The people present turn to look at you. Mrs. Robner glares at you. ""You might at least have the courtesy to be here on time! Haven't you caused enough disruption already? We should have started without you. Mr. Coates, please proceed."""
	CRLF
	JUMP ?L29
?L22:	GRTR? PRESENT-TIME,760 \?L26
	PRINTI """It's late, so let's begin!"" Coates says."
	CRLF
	JUMP ?L29
?L26:	ZERO? WILL-HOLD /?L29
	PRINTI """Ah!"" Mr. Coates says, ""Everybody's here now."""
	CRLF
?L29:	PRINTI "Mr. Coates begins: ""This is an awkward situation. Mr. Robner told me five days ago that he wanted to execute a new will, and promised to call me when it was completed. As I never heard from him, I must assume that he either changed his mind or did not complete the new will. Therefore, the one in my possession must be considered the most recent testament."""
	CRLF
	ZERO? G-CALENDAR /?L35
	PRINTI "You notice that George, who was not initially paying close attention, now perks up and begins to look about anxiously."
	CRLF
	JUMP ?L39
?L35:	PRINTI "From the corner of your eye, you catch George nodding his head, as if in approval, and smiling broadly."
	CRLF
?L39:	PRINTI "Continuing, Mr. Coates says: ""Naturally, should a more recent will exist and be found within a reasonable period, the present one will be voided. I will proceed with reading the will here in my hands, which was executed three years ago last month."" He reads the will, simply written and direct, leaving equal parts of the estate to his son, George Arthur Robner, and his wife, Mrs. Leslie Phillips Robner."
	CRLF
	PRINTI "There is some discussion, understated congratulations and overstated sympathy, which Mr. Coates cuts short by clearing his throat. ""I must leave now, I'm afraid. If you have any questions, I can be contacted tomorrow."" He picks up the phone, dials his office, and asks to be picked up at the Robner estate."
	CRLF
	ZERO? G-CALENDAR /?L46
	PRINTI "George, now looking quite upset, starts for the door."
	CRLF
?L46:	CALL WILL-HACK
	RTRUE

	.FUNCT WILL-HACK
	CALL ESTABLISH-GOAL,COATES,SOUTH-LAWN,1
	SET 'WILL-TIME,PRESENT-TIME
	SET 'POST-WILL,1
	CALL QUEUE,I-WILL-READING,0
	ZERO? G-CALENDAR /FALSE
	CALL GEORGE-HACK >STACK
	RSTACK

	.FUNCT GEORGE-HACK,GL
	LOC GEORGE >GL
	EQUAL? GL,HERE \?L10
	EQUAL? GL,GEORGE-ROOM \?L3
	PRINTI "George paces around. ""I just remembered,"" he says, ""I've got some personal business to attend to. Would you mind?"" He shows you to the door."
	CRLF
	JUMP ?L10
?L3:	GETP GL,P?LINE >STACK
	EQUAL? STACK,TOP-OF-THE-LINE-C \?L7
	PRINTI """I'm...I really have some business to do in my room. I'll speak to you later,"" George says. He starts off toward his room."
	CRLF
	JUMP ?L10
?L7:	PRINTI """I've...got to be going now. I'll see you later,"" George says. He starts to leave."
	CRLF
?L10:	EQUAL? GL,GEORGE-ROOM /?L14
	CALL ESTABLISH-GOAL,GEORGE,GEORGE-ROOM,1
?L14:	SET 'GEORGE-SEQUENCE,1
	CALL QUEUE,I-GEORGE-HACK,-1 >STACK
	PUT STACK,0,1
	RTRUE

	.FUNCT I-GEORGE-HACK,GL,GT,TMP=0
	LOC GEORGE >GL
	GETP GEORGE,P?CHARACTER >STACK
	GET GOAL-TABLES,STACK >GT
	ZERO? GEORGE-READY /?L1
	EQUAL? HERE,GL \?L3
	SET 'GEORGE-READY,0
	SET 'GEORGE-SCREAM,0
	SET 'GEORGE-WAIT,1
	PRINTI """I don't understand you, Inspector. I asked to be alone so I can take care of some business. I...I don't see why you have to snoop around here like I was some sort of suspect."""
	CRLF
	ZERO? GEORGE-SCREAM /TRUE
	PRINTI """I said to close that door and not to come in! You must be deaf as well as stupid!"""
	CRLF
	CALL PRINT-ID,STR?99
	RTRUE
?L3:	FSET? GEORGE-DOOR,OPENBIT \FALSE
	ZERO? GEORGE-SCREAM \FALSE
	PRINTI "As the door opens, you hear George say ""Close that door! I'm working!"""
	CRLF
	SET 'GEORGE-SCREAM,1
	RTRUE
?L1:	ZERO? GEORGE-WAIT /?L16
	EQUAL? HERE,GL \?L17
	PRINTI "George paces around the room, awaiting your departure with ill-concealed impatience."
	CRLF
	IGRTR? 'GEORGE-WAIT,12 \TRUE
	PRINTI """I can't take this. You get on my nerves. I'm leaving."""
	CRLF
	GET GT,GOAL-QUEUED >STACK
	EQUAL? HERE,STACK \?L25
	PUT GT,GOAL-QUEUED,LIVING-ROOM
?L25:	CALL UNPRIORITIZE,GEORGE
	SET 'GEORGE-WAIT,0
	CALL QUEUE,I-GEORGE-HACK,0
	CALL QUEUE,GEORGE-HACK,30 >STACK
	PUT STACK,0,1
	RTRUE
?L17:	SET 'GEORGE-WAIT,0
	FCLEAR GEORGE-DOOR,OPENBIT
	EQUAL? HERE,LIBRARY,CORRIDOR-4,CORRIDOR-3 \FALSE
	PRINTR "You hear George's door close."
?L16:	EQUAL? GL,GEORGE-ROOM \?L35
	EQUAL? HERE,GL \?L36
	PRINTI """I have business to attend to. Would you mind leaving?"""
	CRLF
	SET 'GEORGE-WAIT,1
	RETURN GEORGE-WAIT
?L36:	CALL QUEUE,I-GEORGE-HACK-2,5 >STACK
	PUT STACK,0,1
	SET 'GEORGE-READY,1
	EQUAL? HERE,CORRIDOR-4,CORRIDOR-3 \?L41
	FSET? GEORGE-DOOR,OPENBIT \?L41
	FCLEAR GEORGE-DOOR,OPENBIT
	SET 'TMP,1
	PRINTI "You hear George's door close."
	CRLF
?L41:	FCLEAR GEORGE-DOOR,OPENBIT
	RETURN TMP
?L35:	EQUAL? HERE,GL \?L46
	ZERO? GEORGE-FOLLOW \?L47
	SET 'GEORGE-FOLLOW,1
	RFALSE
?L47:	RANDOM 100 >STACK
	GRTR? 50,STACK \?L49
	PRINTI """Please stop following me around like this. Can I have no privacy? I'm simply trying to take care of something personal."""
	CRLF
	CALL PRINT-ID,STR?100 >STACK
	RSTACK
?L49:	PRINTI """Stop following me. My business is private."""
	CRLF
	CALL PRINT-ID,STR?101 >STACK
	RSTACK
?L46:	EQUAL? GL,CORRIDOR-4 \?L55
	GETP HERE,P?CORRIDOR >STACK
	BAND STACK,1 >STACK
	EQUAL? STACK,1 \FALSE
	PRINTI "George glances in your direction, then enters his room."
	CRLF
	MOVE GEORGE,GEORGE-ROOM
	RTRUE
?L55:	EQUAL? GL,CORRIDOR-3,CORRIDOR-2 \FALSE
	EQUAL? HERE,CORRIDOR-1,STAIR-TOP \FALSE
	PRINTR "George glances back at you briefly, then continues on his way."

	.FUNCT I-GEORGE-HACK-2
	ZERO? GEORGE-READY /?L1
	GETP HERE,P?CORRIDOR >STACK
	BAND STACK,1 >STACK
	EQUAL? STACK,1 /?L5
	EQUAL? HERE,LIBRARY \?L3
?L5:	RANDOM 9 >STACK
	CALL QUEUE,I-GEORGE-HACK-2,STACK
	EQUAL? HERE,CORRIDOR-2,CORRIDOR-1,STAIR-TOP \?L6
	RANDOM 100 >STACK
	GRTR? 30,STACK \?L8
	PRINTR "A door opens down the hall. George steps out, spots you, and looks briefly toward the window. After a moment he steps back into his room and shuts the door."
?L8:	PRINTR "You faintly hear a door open and then close near the end of the hall."
?L6:	EQUAL? HERE,CORRIDOR-4,LIBRARY \?L15
	PRINTI "You hear George's door open and "
	RANDOM 100 >STACK
	GRTR? 30,STACK \?L18
	PRINTR "you catch a brief glimpse of his head darting back into the doorway. You watch as the door closes again."
?L18:	PRINTR "close again immediately."
?L15:	FSET? GEORGE-DOOR,OPENBIT \?L25
	FCLEAR GEORGE-DOOR,OPENBIT
	PRINTR "George walks up to his door and slams it in your face."
?L25:	EQUAL? HERE,CORRIDOR-3 \FALSE
	PRINTR "George opens his door and peeks out. He is startled by your presence, excuses himself, and closes the door sharply in your face before you can utter a word."
?L3:	CALL QUEUE,I-GEORGE-HACK,0
	MOVE GEORGE,LIBRARY
	FSET GEORGE-DOOR,OPENBIT
	CALL QUEUE,I-GEORGE-HACK-2,0
	CALL QUEUE,I-GEORGE-HACK-3,-1 >STACK
	PUT STACK,0,1
	EQUAL? HERE,UPSTAIRS-CLOSET \?L33
	PRINTR "You hear George's door open and you see his head poke out briefly, scanning the hallway. He apparently didn't see you, and darts across the hall to the library."
?L33:	EQUAL? HERE,LIBRARY-BALCONY \FALSE
	PRINTR "You see George through the doorway, looking down the hallway, then darting into the library."
?L1:	RANDOM 9 >STACK
	CALL QUEUE,I-GEORGE-HACK-2,STACK
	RFALSE

	.FUNCT I-GEORGE-HACK-3,FLG=0
	ZERO? GEORGE-SEARCH \?L1
	EQUAL? HERE,LIBRARY-BALCONY \?L3
	PRINTI "George walks purposefully toward the bookshelves. He looks around, but you react before he can see you. When you peek out again, George is fiddling with the shelves. His right arm reaches into the shelf and, to your amazement, the unit of bookshelves on the left rotates away from the wall, revealing a darkened room behind. George enters it, trembling with barely controlled fear and excitement."
	CRLF
	SET 'FLG,1
	SET 'BOOKS-MOVED,1
	SET 'GEORGE-MOVES-BOOKS,1
	MOVE GEORGE,HIDDEN-CLOSET
	JUMP ?L35
?L3:	EQUAL? HERE,LIBRARY \?L7
	PRINTI "George hears you walk through the balcony doors and recoils in horror. He runs across the hall to his own bedroom, slamming his door shut."
	CRLF
	SET 'FLG,1
	SET 'GEORGE-READY,0
	SET 'GEORGE-WAIT,0
	FCLEAR GEORGE-DOOR,OPENBIT
	MOVE GEORGE,GEORGE-ROOM
	CALL QUEUE,I-GEORGE-HACK-3,0
	CALL QUEUE,I-GEORGE-HACK-2,10
	JUMP ?L35
?L7:	MOVE GEORGE,HIDDEN-CLOSET
	SET 'BOOKS-MOVED,1
	JUMP ?L35
?L1:	EQUAL? GEORGE-SEARCH,1 \?L11
	EQUAL? HERE,LIBRARY,LIBRARY-BALCONY \?L35
	PRINTI "A dim light in the hidden closet comes on. In the faint light, you can see George motioning with his right hand. All at once, the shelf swings shut!"
	CRLF
	SET 'FLG,1
	JUMP ?L35
?L11:	LESS? GEORGE-SEARCH,10 \?L17
	FSET? HIDDEN-DOOR-L,OPENBIT \?L35
	PRINTI "As the bookshelf swings open, you see George carefully dialing a combination into a large wall safe. He turns in panic and, with an exclamation, knocks you down and bolts out of the library."
	CRLF
	SET 'FLG,1
	SET 'SAFE-SEEN,1
	SET 'GEORGE-SEARCH,0
	CALL QUEUE,I-GEORGE-HACK-3,0
	MOVE GEORGE,CORRIDOR-1
	CALL ESTABLISH-GOAL,GEORGE,EAST-LAWN,1
	JUMP ?L35
?L17:	LESS? GEORGE-SEARCH,16 \?L23
	FSET? HIDDEN-DOOR-L,OPENBIT \?L35
	FSET SAFE,OPENBIT
	SET 'SAFE-SEEN,1
	PRINTI "As the shelf swings open, George spins to face you. His expression, first seemingly wild with happiness, changes to one of panic and horror. He jerks around, trying feebly to conceal a piece of paper in his hands. He jumps toward you, then recoils in fear. Finally, sobbing, he crumples to the floor, clutching the paper beneath him. A large combination safe, imbedded in a wall, is lying open. You enter the hidden closet.[RWD_ID: actions:1941, VAL: 1]"
	CRLF
	SET 'FLG,1
	CALL QUEUE,I-GEORGE-HACK-3,0
	MOVE NEW-WILL,GEORGE
	CALL GOTO,HIDDEN-CLOSET
	CALL QUEUE,I-GEORGE-LEAVE-CLOSET,10 >STACK
	PUT STACK,0,1
	SET 'HERE,HIDDEN-CLOSET
	SET 'NEW-WILL-SEEN,1
	JUMP ?L35
?L23:	EQUAL? GEORGE-SEARCH,16 \?L35
	FCLEAR SAFE,OPENBIT
	EQUAL? HERE,LIBRARY \?L30
	PRINTI "Suddenly, the bookshelves swing out, forming an opening to a dark area behind. George starts to emerge but stops suddenly as he notices you! With jack-rabbit reflexes, he darts back inside. Before you can act, the shelves close again."
	CRLF
	SET 'FLG,1
	MOVE GEORGE,NORTH-LAWN
	MOVE SOGGY-WILL,LAKE
	REMOVE NEW-WILL
	CALL QUEUE,I-GEORGE-HACK-3,0
	SET 'GEORGE-RUN,PRESENT-TIME
	JUMP ?L35
?L30:	MOVE GEORGE,LIBRARY
	CALL QUEUE,I-GEORGE-HACK-3,0
	CALL UNPRIORITIZE,GEORGE
	CALL ESTABLISH-GOAL,GEORGE,NORTH-LAWN,1
	EQUAL? HERE,LIBRARY-BALCONY \?L35
	PRINTI "Suddenly, the shelf swings out, and George emerges. He walks over to a special place in the shelves and reaches behind some books. The bookshelves silently assume their normal position."
	CRLF
	SET 'FLG,1
?L35:	INC 'GEORGE-SEARCH
	RETURN FLG

	.FUNCT I-GEORGE-LEAVE-CLOSET
	IN? GEORGE,HIDDEN-CLOSET \FALSE
	CALL ESTABLISH-GOAL,GEORGE,GEORGE-ROOM
	RFALSE

	.FUNCT I-CALL,MRL
	LOC MRS-ROBNER >MRL
	ZERO? CALL-RING /?L10
	EQUAL? MRL,LIVING-ROOM \?L3
	SET 'CALL-RING,0
	EQUAL? HERE,LIVING-ROOM \?L5
	PRINTI "Mrs. Robner picks up the phone. ""Oh, hi. Look, I can't talk now. I'll call you later, okay? Bye, then."" She hangs up the phone."
	CRLF
	CALL ROBNER-CALL-MOVE
	RTRUE
?L5:	CALL ROBNER-CALL-MOVE
	RFALSE
?L3:	PRINTI "The phone rings again."
	CRLF
	CALL GLOBAL-IN?,TELEPHONE,HERE >STACK
	ZERO? STACK /TRUE
	CALL THIS-IS-IT,TELEPHONE
	RTRUE
?L10:	ZERO? CALL-IN-PROGRESS /?L17
	IGRTR? 'CALL-IN-PROGRESS,15 \?L19
	SET 'CALL-IN-PROGRESS,0
	CALL QUEUE,I-CALL,0
	CALL UNPRIORITIZE,MRS-ROBNER
	RFALSE
?L19:	FSET? MASTER-BEDROOM-DOOR,OPENBIT /?L22
	EQUAL? HERE,MASTER-BEDROOM \FALSE
?L22:	PRINTI "Mrs. Robner speaks quietly into the phone and hangs up."
	CRLF
	SET 'CALL-IN-PROGRESS,0
	CALL QUEUE,I-CALL,0
	CALL UNPRIORITIZE,MRS-ROBNER
	RTRUE
?L17:	ZERO? CALL-WAITING /?L26
	EQUAL? HERE,MRL,MASTER-BATH,BEDROOM-BALCONY \?L27
	IGRTR? 'CALL-WAITING,3 /?L29
	PRINTR "Mrs. Robner glares at you, holding the phone in one hand. ""Would you mind terribly?"", she asks."
?L29:	ZERO? CALL-MOVE /?L33
	PRINTI """I can't understand why you won't let me use the phone. Can't I talk to my best friend? Hummph...I suppose it can wait, since you are being so...uh...unhelpful."" She puts down the receiver, rises from her bed, and starts to leave."
	CRLF
	SET 'CALL-MOVE,0
	SET 'CALL-WAITING,0
	CALL QUEUE,I-CALL,0
	CALL UNPRIORITIZE,MRS-ROBNER >STACK
	RSTACK
?L33:	PRINTI """I give up. What IS your problem, anyway?,"" Mrs. Robner asks, in a barely controllable rage. ""I'll call you back,"" she says, and slams down the receiver."
	CRLF
	SET 'CALL-MOVE,0
	CALL QUEUE,I-CALL,0
	CALL UNPRIORITIZE,MRS-ROBNER >STACK
	RSTACK
?L27:	CALL ESTABLISH-CALL
	RFALSE
?L26:	ZERO? CALL-MOVE /?L40
	EQUAL? MRL,MASTER-BEDROOM \FALSE
	EQUAL? HERE,BEDROOM-BALCONY,MASTER-BATH,MASTER-BEDROOM \?L43
	EQUAL? HERE,MASTER-BEDROOM /?L45
	PRINTI "Mrs. Robner enters her bedroom and spots you."
	CRLF
?L45:	PRINTI """I'd like to make a private phone call, if you have no objection,"" she says. She motions toward the door."
	CRLF
	SET 'CALL-WAITING,1
	RETURN CALL-WAITING
?L43:	CALL ESTABLISH-CALL
	RFALSE
?L40:	EQUAL? HERE,LIBRARY,LIVING-ROOM,MASTER-BEDROOM \?L54
	PRINTI "The telephone rings."
	CRLF
	CALL THIS-IS-IT,TELEPHONE
	CALL ESTABLISH-GOAL,MRS-ROBNER,LIVING-ROOM,1
	SET 'CALL-RING,1
	CALL QUEUE,I-CALL,-1 >STACK
	RSTACK
?L54:	EQUAL? HERE,MRL \?L57
	PRINTI "You can hear a telephone ringing in a nearby room. Mrs. Robner says ""Pardon me"" and starts for the door."
	CRLF
	SET 'CALL-RING,1
	CALL QUEUE,I-CALL,-1
	CALL ESTABLISH-GOAL,MRS-ROBNER,LIVING-ROOM,1 >STACK
	RSTACK
?L57:	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C /?L61
	PRINTI "You hear a phone ringing in a nearby room."
	CRLF
	SET 'CALL-RING,1
	CALL QUEUE,I-CALL,-1
	CALL ESTABLISH-GOAL,MRS-ROBNER,LIVING-ROOM,1 >STACK
	RSTACK
?L61:	RANDOM 100 >STACK
	GRTR? 50,STACK \FALSE
	PRINTI "You notice a very faint ringing sound coming from the house."
	CRLF
	CALL ROBNER-CALL-MOVE
	RTRUE

	.FUNCT THIS-IS-IT,OBJ
	SET 'P-IT-OBJECT,OBJ
	SET 'P-IT-LOC,HERE
	RETURN P-IT-LOC

	.FUNCT ESTABLISH-CALL,COR
	SET 'CALL-MOVE,0
	SET 'CALL-IN-PROGRESS,1
	FCLEAR MASTER-BEDROOM-DOOR,OPENBIT
	EQUAL? HERE,CORRIDOR-1 \?L1
	PRINTR "Mrs. Robner shuts the door to the master bedroom."
?L1:	EQUAL? HERE,CORRIDOR-2,STAIR-TOP \FALSE
	PRINTR "You hear the master bedroom door shut."

	.FUNCT MASTER-BEDROOM-DOOR-F
	EQUAL? PRSA,V?LISTEN \?L1
	ZERO? CALL-IN-PROGRESS /?L1
	PRINTR "You can hear the muffled voice of Mrs. Robner through the door."
?L1:	EQUAL? PRSA,V?KNOCK \FALSE
	ZERO? CALL-IN-PROGRESS /?L6
	PRINTR "Mrs. Robner's calls out. ""Wait just one minute!"""
?L6:	CALL DOOR-F >STACK
	RSTACK

	.FUNCT DOOR-F
	EQUAL? PRSA,V?LISTEN \?L1
	PRINTR "You can't hear anything through the door."
?L1:	EQUAL? PRSA,V?KNOCK \FALSE
	EQUAL? PRSO,FRONT-DOOR \?L6
	ZERO? WELCOMED \?L6
	LESS? PRESENT-TIME,700 \?L6
	EQUAL? HERE,FRONT-PATH \?L6
	PRINTI "You hear footsteps inside the house. Mrs. Robner, dressed in black, opens the door and greets you."
	CRLF
	CALL WELCOME >STACK
	RSTACK
?L6:	CALL DOOR-ROOM >STACK
	CALL INHABITED?,STACK >STACK
	ZERO? STACK /?L10
	PRINTR "A muffled voice says, ""Come in!"""
?L10:	PRINTR "There is no answer at the door."

	.FUNCT WELCOME
	PRINTI """Hello,"" she says, ""I'm Mrs. Robner. Please come in. I'm afraid I really can't help you much. This is surely a terrible waste of time, not to mention upsetting, having all these police marching around the house. This has been a trying time, as I suppose you can understand. As I told Mr. Coates and the other detective, you may look around but you must be out by 8 o'clock at the latest. Oh, I almost forgot...Mr. Coates will be reading my husband's will at noon in the living room. You may attend if you wish."""
	SET 'WELCOMED,1
	REMOVE MRS-ROBNER
	EQUAL? HERE,FRONT-PATH \?L3
	CRLF
	PRINTI "Mrs. Robner leads you into the house and closes the door behind you."
	CRLF
	CRLF
	CALL GOTO,FOYER
?L3:	MOVE MRS-ROBNER,FOYER
	PRINTI """I'm going to make myself some breakfast now. I'll be around all day if you need anything. I'll do what I can to help. Good day!"""
	CRLF
	FCLEAR FRONT-DOOR,OPENBIT
	CALL ESTABLISH-GOAL,MRS-ROBNER,KITCHEN >STACK
	RSTACK

	.FUNCT INHABITED?,RM,F
	FIRST? RM >F \FALSE
?L1:	FSET? F,PERSON /TRUE
	NEXT? F >F /?L1
	RFALSE

	.FUNCT DOOR-ROOM
	EQUAL? PRSO,MASTER-BEDROOM-DOOR \?L1
	RETURN MASTER-BEDROOM
?L1:	EQUAL? PRSO,GEORGE-DOOR \?L3
	RETURN GEORGE-ROOM
?L3:	EQUAL? PRSO,DUNBAR-DOOR \?L4
	RETURN DUNBAR-ROOM
?L4:	EQUAL? PRSO,ROURKE-DOOR \FALSE
	RETURN ROURKE-ROOM

	.FUNCT ROBNER-CALL-MOVE
	LOC MRS-ROBNER >ROBNER-OLD-LOC
	CALL ESTABLISH-GOAL,MRS-ROBNER,MASTER-BEDROOM,1
	SET 'CALL-MOVE,1
	CALL QUEUE,I-CALL,-1 >STACK
	RSTACK

	.FUNCT TELEPHONE-F
	EQUAL? HERE,LIBRARY,MASTER-BEDROOM,LIVING-ROOM /?L1
	PRINTR "There's no telephone here."
?L1:	EQUAL? PRSA,V?FIND \?L5
	PRINTR "You are the detective, after all."
?L5:	EQUAL? PRSA,V?REPLY,V?LISTEN,V?TAKE \FALSE
	ZERO? CALL-RING /?L9
	PRINTI "You take the phone and hear an unfamiliar man's voice say ""Hello?  Is Leslie there?""  You start to reply, but Mrs. Robner"
	EQUAL? HERE,LIVING-ROOM \?L13
	PRINTI " enters and takes the phone from you. ""Thank you, inspector,"" she says, and then into the telephone: ""Hello? Oh, hi. I can't really talk now. I'll call you back soon, OK? Bye."" She hangs up and starts toward the door."
	CRLF
	JUMP ?L17
?L13:	PRINTI " picks up the phone from another extension and hears you. ""I've got it, inspector,"" she says. ""Hello? Oh, it's you. I can't talk now. I'll call you back soon. Bye!"" You hear two clicks and the line goes dead."
	CRLF
?L17:	SET 'CALL-RING,0
	MOVE MRS-ROBNER,LIVING-ROOM
	CALL ROBNER-CALL-MOVE >STACK
	RSTACK
?L9:	ZERO? CALL-IN-PROGRESS /?L20
	PRINTI "You can hear Mrs. Robner and a man whose voice you don't recognize. Robner: ""...much too early to consider it.""
Man's Voice: ""But we couldn't have planned it better. You're free.""
Robner: ""Yes, but it will...Wait a second...I think...""
""Click."" You realize that the call has been disconnected."
	CRLF
	SET 'CALL-OVERHEARD,1
	SET 'CALL-IN-PROGRESS,0
	CALL QUEUE,I-CALL,0
	CALL UNPRIORITIZE,MRS-ROBNER >STACK
	RSTACK
?L20:	PRINTR "All you hear is a dial tone."

	.FUNCT ENVELOPE-F
	EQUAL? PRSA,V?OPEN \?L1
	LOC MRS-ROBNER >STACK
	EQUAL? STACK,HERE \?L3
	PRINTI "Mrs. Robner grabs the envelope from you. ""That,"" she says, ""is none of your business!"""
	CRLF
	CALL PRINT-ID,STR?102
	MOVE ENVELOPE,MRS-ROBNER
	RTRUE
?L3:	SET 'ENVELOPE-OPENED,1
	IN? ENVELOPE,WINNER /FALSE
	CALL ITAKE,0 >STACK
	ZERO? STACK /FALSE
	PRINTI "(Taken)"
	CRLF
	CALL PRINT-ID,STR?103
	RFALSE
?L1:	EQUAL? PRSA,V?CLOSE \FALSE
	ZERO? ENVELOPE-OPENED /FALSE
	PRINTI "You close the envelope carefully, but it still looks like it has been opened."
	CRLF
	FCLEAR ENVELOPE,OPENBIT
	RTRUE

	.FUNCT IN-MOTION?,PERSON?1,GT
	GETP PERSON?1,P?CHARACTER >STACK
	GET GOAL-TABLES,STACK >GT
	GET GT,GOAL-ENABLE >STACK
	ZERO? STACK /FALSE
	GET GT,GOAL-S >STACK
	ZERO? STACK /FALSE
	GET GT,GOAL-F >STACK
	LOC PERSON?1 >STACK
	EQUAL? STACK,STACK /FALSE
	RTRUE

	.FUNCT MRS-ROBNER-F,RARG=0
	ZERO? RARG \?L1
	EQUAL? PRSA,V?GIVE \?L1
	EQUAL? PRSO,ENVELOPE \?L1
	CALL PERFORM,V?SHOW,MRS-ROBNER,ENVELOPE
	RTRUE
?L1:	EQUAL? RARG,M-OBJDESC \?L4
	CALL IN-MOTION?,MRS-ROBNER >STACK
	ZERO? STACK /?L6
	ZERO? CALL-MOVE /?L31
	PRINTI "Mrs. Robner appears to be in a hurry."
	CRLF
	JUMP ?L31
?L6:	ZERO? CALL-WAITING /?L13
	PRINTI "Mrs. Robner is staring at you."
	CRLF
	JUMP ?L31
?L13:	IN? MRS-ROBNER,KITCHEN \?L16
	PRINTI "Mrs. Robner is preparing a meal."
	CRLF
	JUMP ?L31
?L16:	IN? MRS-ROBNER,DINING-ROOM \?L19
	PRINTI "Mrs. Robner is eating breakfast here."
	CRLF
	JUMP ?L31
?L19:	IN? MRS-ROBNER,LIVING-ROOM \?L22
	ZERO? POST-WILL \TRUE
	PRINTI "Mrs. Robner is sitting here, knitting."
	CRLF
	JUMP ?L31
?L22:	IN? MRS-ROBNER,MASTER-BEDROOM \?L28
	PRINTI "Mrs. Robner is sitting on her bed."
	CRLF
	JUMP ?L31
?L28:	PRINTI "Mrs. Robner is here."
	CRLF
?L31:	CALL CARRY-CHECK,MRS-ROBNER >STACK
	RSTACK
?L4:	EQUAL? PRSA,V?GOODBYE,V?HELLO \?L34
	PRINTI "Mrs. Robner says a curt """
	EQUAL? PRSA,V?HELLO \?L37
	PRINTI "Hello"
	JUMP ?L41
?L37:	PRINTI "Bye"
?L41:	PRINTR """."
?L34:	EQUAL? WINNER,MRS-ROBNER \?L46
	EQUAL? PRSA,V?FIND /FALSE
	EQUAL? PRSA,V?OPEN \?L49
	EQUAL? PRSO,ENVELOPE \?L49
	ZERO? ENVELOPE-OPENED /?L50
	PRINTR """You seem to have taken care of that already."""
?L50:	PRINTI """I believe there are laws protecting the privacy of mail. I will not open the envelope for you or anyone else."""
	CRLF
	CALL PRINT-ID,STR?104 >STACK
	RSTACK
?L49:	CALL COM-CHECK,MRS-ROBNER >STACK
	ZERO? STACK \TRUE
	CALL PICK-ONE,WHY-ME >STACK
	PRINT STACK
	CRLF
	RTRUE
?L46:	EQUAL? PRSA,V?ARREST \?L61
	ZERO? ENVELOPE-OPENED \?L62
	ZERO? CALL-OVERHEARD /?L61
?L62:	FSET? LAB-REPORT,TOUCHBIT /?L63
	CALL MURDER-NOT-PROVEN,MRS-ROBNER
	RTRUE
?L63:	PRINTI "Sergeant Duffy enters and leads Mrs. Robner away.

"
	CALL END-HEADER,STR?105
	PRINTI "I am sorry to inform you that the grand jury investigating the murder charge against Mrs. Robner declined to indict her, citing a lack of evidence linking her with the execution of the crime. Please try to be more cautious when making arrests in the future.

"
	CRLF
	CALL PRINT-ID,STR?106
	CALL CASE-OVER >STACK
	RSTACK
?L61:	EQUAL? PRSA,V?ASK-ABOUT \?L70
	EQUAL? PRSO,MRS-ROBNER \?L70
	CALL GRAB-ATTENTION,MRS-ROBNER >STACK
	ZERO? STACK /TRUE
	EQUAL? PRSI,GLOBAL-HIDDEN-CLOSET \?L73
	ZERO? HC-ROBNER /?L74
	PRINTR """I'm quite shocked about it. I really had no idea!"""
?L74:	PRINTR """I don't know what you're talking about, Inspector. I know of no such closet."""
?L73:	EQUAL? PRSI,GLOBAL-ALLERGONE,ALLERGONE,ALLERGONE-BOTTLE \?L81
	PRINTR """I have some allergies, Inspector. Simply dreadful in the fall and spring. That's what the Allergone is for. I don't use them much this time of year, though."""
?L81:	EQUAL? PRSI,GLOBAL-SNEEZO,SNEEZO,SNEEZO-BOTTLE \?L84
	PRINTR """Sneezo is a wonderful cold remedy. Whenever I get a cold, I just take a few, and I usually feel much better before long."""
?L84:	EQUAL? PRSI,GLOBAL-CALL \?L87
	ZERO? CALL-OVERHEARD /?L92
	ZERO? MR-ENVELOPE /?L88
	PRINTR """I guess you know it was Steven. I admit we were lovers, and we planned to marry if I could get a divorce from Marshall. He refused to consider it, the divorce I mean, even though he had no time for me anymore. He was married to the company, and he refused to see my side of things. Steven was suggesting that now we could marry. I told him I thought the timing was poor, or at least I would have if you hadn't eavesdropped."""
?L88:	ZERO? CALL-OVERHEARD /?L92
	PRINTR """I was talking to a good friend of mine. We were discussing some plans we made; of course they had to be changed, under the circumstances. They are none of your business. They don't concern my husband's suicide at all, I assure you."""
?L92:	PRINTR """It was just a friend of mine, offering his condolences."""
?L87:	EQUAL? PRSI,GLOBAL-STEVEN \?L98
	ZERO? MR-ENVELOPE \?L99
	PRINTR """I don't know who you mean. I have no friend named Steven."""
?L99:	ZERO? CALL-OVERHEARD /?L103
	ZERO? MR-ENVELOPE /FALSE
	PRINTR """I might as well tell you. Steven and I were lovers and we were going to be married if I could divorce Marshall. I asked Marshall about it, but he became angry and refused. I didn't know what to do. Don't look at me that way. I had nothing to do with my husband's death. Driving him to it with talk of divorce? You didn't know Marshall, that's for sure! I should've told the police earlier, I suppose, but it's really none of your business."""
?L103:	ZERO? MR-ENVELOPE /FALSE
	PRINTR """Steven is a close personal friend. We have known each other for many years, and I visit his home frequently. Marshall knew of our friendship and didn't begrudge it in the slightest. My husband and I had a very trusting relationship. You may find the idea of trust difficult to understand, I suppose."""
?L98:	EQUAL? PRSI,GLOBAL-MR-ROBNER \?L110
	PRINTR """I loved my husband, no matter what you may think. I am very sorry to have lost him."" The speech is almost a set piece, and not too convincing."
?L110:	EQUAL? PRSI,GEORGE,GLOBAL-GEORGE \?L113
	CALL DISCRETION,MRS-ROBNER,GEORGE
	PRINTR """A child. He may be a man in age, but he still hasn't really grown up. He'll find himself someday, but in the meantime he can be a trial. I guess Marshall and I were too lenient. We probably still are, but he is our son, after all. We can't throw him out on the street."""
?L113:	EQUAL? PRSI,BAXTER,GLOBAL-BAXTER \?L116
	PRINTR """Baxter has been my husband's partner for a long time, but they're not close friends. Baxter has always had the head for making money, and Marshall had the creative spark for new products. The two of them were perfect for each other in the early days. Of course, things haven't been going well lately. I guess none of that matters much now."""
?L116:	EQUAL? PRSI,CORPSE,DUNBAR,GLOBAL-DUNBAR \?L119
	CALL DISCRETION,MRS-ROBNER,DUNBAR
	PRINTR """I've always thought she was a bit too smug in her relationships around here. A bit above herself, if you see my meaning. After all, she's really just a glorified secretary. She acts as though she's part of the family, and she does get along well with almost everyone here. I swear, though, Marshall spent more time with her than me, lately. Um...not that I'm trying to imply that anything went on between them. Quite the contrary."""
?L119:	EQUAL? PRSI,ROURKE,GLOBAL-ROURKE \?L122
	CALL DISCRETION,MRS-ROBNER,ROURKE
	PRINTR """She's an excellent housekeeper and sometimes even helps with the cooking For all her good qualities, though, she's too much of a snoop and a gossip. She tires to keep track of everyone around here. It's unnerving sometimes. But, as servants go these days, she's quite extraordinary."""
?L122:	EQUAL? PRSI,GARDENER,GLOBAL-GARDENER \?L125
	PRINTR """I don't pay much attention to him. He's worked out well; the grounds are in excellent condition. You must take a look at his roses while you're here. They're really spectacular."""
?L125:	EQUAL? PRSI,GLOBAL-OLD-WILL \?L128
	GRTR? WILL-TIME,0 \?L129
	PRINTR """It's what I expected, really."""
?L129:	PRINTR """Marshall takes care of that sort of thing. The will, I suppose, leaves the estate to George and me, but I can't be sure."""
?L128:	EQUAL? PRSI,NEW-WILL \?L136
	PRINTR """What do you know? Marshall changed the will, after all. Where did you ever find this? What? George was trying to destroy it? I'm shocked. You don't think George had anything to do..."" She stops short."
?L136:	EQUAL? PRSI,GLOBAL-NEW-WILL \?L139
	PRINTR """If there is a new will, I certainly don't know where it is."""
?L139:	EQUAL? PRSI,GLOBAL-FOCUS \?L142
	PRINTR """Oh, you mean the ""scandal""? Focus Corporation was a subsidiary of Robner Corp. some years ago. There was a big to-do about misuse of funds or some such thing, but Marshall kept it pretty quiet. He told me that the people responsible were forced out of the company, but that charges weren't pressed to avoid bad publicity. I didn't realize anyone remembered that."""
?L142:	EQUAL? PRSI,GLOBAL-SAFE \?L145
	PRINTR """I don't know of a safe in the house, although it's perfectly believable that Marshall has one hidden somewhere. It would appeal to his childish side, I think."""
?L145:	PRINTR """I don't know much about that."""
?L70:	EQUAL? PRSA,V?SHOW,V?CONFRONT \FALSE
	CALL GRAB-ATTENTION,MRS-ROBNER >STACK
	ZERO? STACK /TRUE
	EQUAL? PRSI,LAB-REPORT \?L154
	PRINTR "Mrs. Robner reads the report with shocked disbelief. ""I...I don't know what to say. Who would want to kill Marshall? He was so well liked and..."" She breaks down, sobbing."
?L154:	EQUAL? PRSI,NEW-WILL \?L157
	PRINTR "Mrs. Robner reads the will. ""That's that, then,"" she says. ""I guess Marshall was pushed too far."""
?L157:	EQUAL? PRSI,ENVELOPE,LETTER \FALSE
	ZERO? ENVELOPE-OPENED \?L161
	PRINTI """Thank you, Inspector. The envelope is for me."" She takes the envelope from you and examines it briefly."
	CRLF
	CALL PRINT-ID,STR?107
	MOVE ENVELOPE,MRS-ROBNER
	RTRUE
?L161:	SET 'MR-ENVELOPE,1
	PRINTI """You have certainly stooped to a new low, Inspector. Opening people's mail. I think there are laws against that sort of thing, but I guess you wouldn't know."
	ZERO? CALL-OVERHEARD /?L168
	PRINTR " I suppose you also know that Steven is my lover and that we were planning to marry. Don't look so melodramatic: I didn't kill my husband. You think my talk of divorce may have driven him to it? Why don't you leave me alone!"""
?L168:	PRINTR " In any case, what of it? It's from a friend of mine, an old friend from school. We get together now and then to discuss old times. I don't suppose there is a law against that?"""

	.FUNCT BOOKSHELVES-F
	EQUAL? PRSA,V?TAKE \?L5
	EQUAL? PRSI,BOOKSHELVES \?L1
	PRINTR "That would make an ungodly pile of books on the floor and take most of the day."
?L1:	EQUAL? PRSA,V?TAKE \?L5
	PRINTR "You have better things to do than taking books from the shelves."
?L5:	EQUAL? PRSA,V?READ \?L8
	PRINTR "Reading, while educational, will not help you solve this case."
?L8:	EQUAL? PRSA,V?LOOK-BEHIND \?L11
	PRINTR "It would take all day to look behind all of the books."
?L11:	EQUAL? PRSA,V?SEARCH,V?EXAMINE \FALSE
	PRINTI "The shelves contain many books and manuscripts covering a wide range of subjects. They are meticulously arranged."
	CRLF
	ZERO? GEORGE-MOVES-BOOKS \?L19
	ZERO? BOOKS-MOVED /TRUE
	EQUAL? P-ADVERB,W?CAREFULLY \TRUE
?L19:	PRINTI "One book is out of place, however, leaving a gap in one row. On closer inspection, a small black button can be seen at the back of this gap.[RWD_ID: actions:2504, VAL: 1]"
	CRLF
	SET 'BUTTON-REVEALED,1
	FCLEAR LIBRARY-BUTTON,INVISIBLE
	RTRUE

	.FUNCT LIBRARY-BUTTON-F
	EQUAL? PRSA,V?PUSH \FALSE
	FSET? HIDDEN-DOOR-L,OPENBIT \?L3
	PRINTI "The bookshelf on the left quietly swings shut."
	CRLF
	FCLEAR HIDDEN-DOOR-L,OPENBIT
	RTRUE
?L3:	PRINTI "The leftmost shelf quietly swings out against the balcony window."
	CRLF
	FSET HIDDEN-DOOR-L,OPENBIT
	RTRUE

	.FUNCT CSCP
	EQUAL? PRSA,V?MOVE,V?RUB,V?TAKE \?L1
	PRINTI "These items are very rare and delicate, and were used only by Mr. Robner himself. You shouldn't even be touching them."
	CRLF
	CALL PRINT-ID,STR?108 >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?EXAMINE \?L5
	PRINTI "Each one is hand-painted and depicts a scene from Greek mythology."
	CRLF
	SET 'CHINA-EXAMINED,1
	RETURN CHINA-EXAMINED
?L5:	EQUAL? PRSA,V?MUNG \FALSE
	RANDOM 100 >STACK
	GRTR? 75,STACK \?L9
	PRINTI "As you reach for the "
	PRINTD PRSO
	PRINTI ", you think of the pension awaiting you upon retirement. ""Is it worth it?"" you think, to be booted off the force for an impulse of anger and stupidity. Fortunately, you calm your temper."
	CRLF
	CALL PRINT-ID,STR?109 >STACK
	RSTACK
?L9:	PRINTI "With a sweep of your hand, you smash all of them! Mrs. Rourke runs into the room, screaming."
	CRLF
	CALL PRINT-ID,STR?110
	CALL GONE-CRAZY >STACK
	RSTACK

	.FUNCT GONE-CRAZY
	PRINTI "Your mind becomes confused amidst strange screaming, yelling, and the pangs of your conscience. ""How could I have done it?"" you ask yourself, as you hear the distant sound of police sirens. Sergeant Duffy and two other officers enter and grab you rather unceremoniously. They take you to a waiting car, where, forlorn and disgusted, you begin to ponder prison life. ""Perhaps,"" you think, ""I shouldn't have done that."""
	CRLF
	CALL PRINT-ID,STR?111
	CALL CASE-OVER >STACK
	RSTACK

	.FUNCT CUPS-F
	EQUAL? PRSA,V?MUNG,V?EXAMINE /?L3
	EQUAL? PRSA,V?MOVE,V?RUB,V?TAKE \?L1
?L3:	CALL CSCP >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?COUNT \FALSE
	PRINTR "There are six hand-painted cups."

	.FUNCT SAUCERS-F
	EQUAL? PRSA,V?MUNG,V?EXAMINE /?L3
	EQUAL? PRSA,V?MOVE,V?RUB,V?TAKE \?L1
?L3:	CALL CSCP >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?COUNT \FALSE
	PRINTR "There are seven hand-painted saucers."

	.FUNCT CHINA-F
	EQUAL? PRSA,V?MUNG,V?EXAMINE /?L3
	EQUAL? PRSA,V?MOVE,V?RUB,V?TAKE \?L1
?L3:	CALL CSCP >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?COUNT \FALSE
	PRINTR "There are eight large and small plates, seven saucers, and six cups."

	.FUNCT PLATES-F
	EQUAL? PRSA,V?MUNG,V?EXAMINE /?L3
	EQUAL? PRSA,V?MOVE,V?RUB,V?TAKE \?L1
?L3:	CALL CSCP >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?COUNT \FALSE
	PRINTR "There are eight of both the large and the small plates."

	.FUNCT LADDER-F
	EQUAL? PRSA,V?PUT \?L1
	EQUAL? PRSI,HOLE \?L1
	PRINTI "The ladder fits perfectly in the holes! You slowly release the ladder and it rests on the railing of the balcony above."
	CRLF
	SET 'LADDER-FLAG,1
	MOVE LADDER,HERE
	SET 'LADDER-POSITIONED,1
	FSET LADDER,NDESCBIT
	RTRUE
?L1:	EQUAL? PRSA,V?CLIMB-UP \?L5
	ZERO? LADDER-FLAG \?L5
	ZERO? LADDER-FLAG-2 \?L5
	PRINTR "Climbing a ladder while it is horizontal is, at best, a contradiction in terms."
?L5:	EQUAL? PRSA,V?LEAN \?L8
	EQUAL? PRSI,HOUSE,BALCONY \?L8
	EQUAL? HERE,IN-ROSES \?L9
	SET 'LADDER-FLAG,1
	SET 'LADDER-FLAG-2,0
	SET 'LADDER-POSITIONED,1
	MOVE LADDER,HERE
	PRINTI "The ladder is now leaning against the railing of a balcony above."
	CRLF
	JUMP ?L16
?L9:	EQUAL? HERE,IN-ORCHARD \?L13
	SET 'LADDER-FLAG,0
	SET 'LADDER-FLAG-2,1
	MOVE LADDER,HERE
	PRINTI "The ladder, firmly planted in the soil of the orchard, is now leaning against the balcony above."
	CRLF
	JUMP ?L16
?L13:	PRINTR "There is no good spot to lean it against here."
?L16:	FSET LADDER,NDESCBIT
	RTRUE
?L8:	EQUAL? PRSA,V?MOVE,V?TAKE \?L19
	FCLEAR LADDER,NDESCBIT
	SET 'LADDER-FLAG,0
	SET 'LADDER-FLAG-2,0
	RFALSE
?L19:	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "The ladder is a typical gardening ladder, about fifteen feet long and caked with dirt and dried mud."

	.FUNCT CUP-F
	EQUAL? PRSA,V?LOOK-INSIDE,V?EXAMINE \?L1
	PRINTR "The cup is painted with a scene from Greek mythology and has a brown discoloration at the bottom."
?L1:	EQUAL? PRSA,V?SMELL \?L5
	PRINTR "The cup smells faintly of tea."
?L5:	EQUAL? PRSA,V?FINGERPRINT \?L8
	PRINTR "There don't seem to be any fingerprints on the cup."
?L8:	EQUAL? PRSA,V?ANALYZE \FALSE
	EQUAL? CUP,PRSO \FALSE
	CALL DO-ANALYZE >STACK
	RSTACK

	.FUNCT DO-FINGERPRINT,AN=0
	ZERO? FINGERPRINT-OBJ /?L1
	PRINTR "Sergeant Duffy is already at the lab running a previous errand. You will have to wait for him to return."
?L1:	ZERO? AN \?L24
	PRINTI "You look at the "
	PRINTD PRSO
	PRINTI " closely. It appears to have good fingerprints on it, so you call for Sergeant Duffy."
	CRLF
	ZERO? AN /?L11
?L24:	ZERO? PRSI /?L11
	SET 'ANALYSIS-GOAL,PRSI
	JUMP ?L13
?L11:	SET 'ANALYSIS-GOAL,0
?L13:	SET 'FINGERPRINT-OBJ,PRSO
	SET 'ANALYSIS-OBJ,AN
	EQUAL? PRSO,LADDER \?L14
	GRTR? PRESENT-TIME,720 \?L16
	PRINTI "Sergeant Duffy arrives and shakes his head sadly. ""I'm sorry, sir, but the Ladder Analysis Department closes at noon."" He leaves."
	CRLF
	SET 'FINGERPRINT-OBJ,0
	RFALSE
?L16:	SET 'LADDER-FLAG,0
	SET 'LADDER-FLAG-2,0
	FCLEAR LADDER,NDESCBIT
?L14:	RANDOM 15 >STACK
	ADD 15,STACK >STACK
	CALL QUEUE,I-FINGERPRINT,STACK >STACK
	PUT STACK,0,1
	REMOVE PRSO
	FSET PRSO,TOUCHBIT
	PRINTI "Sergeant Duffy walks up as quietly as a mouse. He takes the "
	PRINTD PRSO
	PRINTR " from you. ""I'll return soon with the results,"" he says, and leaves as silently as he entered."

	.FUNCT DO-ANALYZE
	CALL DO-FINGERPRINT,1 >STACK
	RSTACK

	.FUNCT I-FINGERPRINT
	PRINTI "Sergeant Duffy "
	EQUAL? FINGERPRINT-OBJ,LADDER \?L3
	PRINTI "comes onto the scene. "
	JUMP ?L13
?L3:	RANDOM 100 >STACK
	GRTR? 30,STACK \?L7
	PRINTI "appears before you, holding the "
	PRINTD FINGERPRINT-OBJ
	PRINTI " carefully in his hands. His quiet efficiency and youthful vigor impress you quite a bit. "
	JUMP ?L13
?L7:	RANDOM 100 >STACK
	GRTR? 50,STACK \?L10
	PRINTI "seems to arrive from nowhere, holding the "
	PRINTD FINGERPRINT-OBJ
	PRINTI " in his hands. "
	JUMP ?L13
?L10:	PRINTI "returns with the "
	PRINTD FINGERPRINT-OBJ
	PRINTI ". For a moment you muse on his almost magical entrances. "
?L13:	ZERO? ANALYSIS-OBJ \?L16
	PRINTI """The fingerprints,"" he begins, ""belong to "
	EQUAL? FINGERPRINT-OBJ,CUP \?L20
	PRINTI "Mr. Robner"
	JUMP ?L50
?L20:	EQUAL? FINGERPRINT-OBJ,SAUCER,SUGAR-BOWL \?L50
	PRINTI "Mr. Robner and Ms. Dunbar"
	JUMP ?L50
?L16:	ZERO? ANALYSIS-GOAL /?L28
	EQUAL? FINGERPRINT-OBJ,FRAGMENT \?L29
	EQUAL? ANALYSIS-GOAL,LOBLO,LOBLO-BOTTLE,GLOBAL-LOBLO \?L29
	PRINTI """The fragment did contain LoBlo. Here is the full report."" He hands you a slip of paper, and departs."
	CRLF
	MOVE LAB-REPORT,PLAYER
	FSET LAB-REPORT,TOUCHBIT
	MOVE FINGERPRINT-OBJ,PLAYER
	SET 'FINGERPRINT-OBJ,0
	RTRUE
?L29:	PRINTI """The "
	PRINTD FINGERPRINT-OBJ
	PRINTI " analysis yielded nothing useful"
	JUMP ?L50
?L28:	EQUAL? FINGERPRINT-OBJ,FRAGMENT \?L36
	PRINTI """The fragment,"" he begins, ""contains traces of tea and sugar."
	PRINTI " In addition, there seems to be some other chemical present that is not a common medication. It could take weeks to determine exactly what it is. It is definitely not Amitraxin (Ebullion), though. There are no clear fingerprints"
	JUMP ?L50
?L36:	EQUAL? FINGERPRINT-OBJ,CUP \?L41
	PRINTI """The cup,"" he begins, ""contains a trace of tea. The fingerprints are those of Mr. Robner"
	JUMP ?L50
?L41:	EQUAL? FINGERPRINT-OBJ,SAUCER \?L44
	PRINTI """The saucer,"" he begins, ""contains traces of tea and sugar. The fingerprints are those of Mr. Robner and Ms. Dunbar"
	JUMP ?L50
?L44:	EQUAL? FINGERPRINT-OBJ,SUGAR-BOWL \?L47
	PRINTI """The bowl,"" he begins, ""has the fingerprints of Mr. Robner and Ms. Dunbar. The bowl contains common table sugar only."
	JUMP ?L50
?L47:	PRINTI """I am sorry,"" he begins, "" but the lab found nothing of interest."
?L50:	EQUAL? FINGERPRINT-OBJ,LADDER \?L53
	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C /?L53
	PRINTI " In the interests of civility, I have left the ladder outside the house."" He leaves."
	CRLF
	MOVE LADDER,FRONT-PATH
	JUMP ?L57
?L53:	PRINTI """. With that, he leaves, handing you the "
	PRINTD FINGERPRINT-OBJ
	PRINTI " as he whisks away."
	CRLF
	MOVE FINGERPRINT-OBJ,PLAYER
?L57:	SET 'FINGERPRINT-OBJ,0
	RTRUE

	.FUNCT ANALYSIS-PRINT,OBJ
	EQUAL? OBJ,GLOBAL-LOBLO,LOBLO,LOBLO-BOTTLE \?L1
	PRINTI "LoBlo"
	JUMP ?L17
?L1:	EQUAL? OBJ,ASPIRIN,ASPIRIN-BOTTLE \?L5
	PRINTI "aspirin"
	JUMP ?L17
?L5:	EQUAL? OBJ,EBULLION,EBULLION-BOTTLE,GLOBAL-EBULLION \?L8
	PRINTI "Ebullion"
	JUMP ?L17
?L8:	EQUAL? OBJ,DUM-KOF,DUM-KOF-BOTTLE \?L11
	PRINTI "Dum-Kof"
	JUMP ?L17
?L11:	EQUAL? OBJ,ALLERGONE,ALLERGONE-BOTTLE,GLOBAL-ALLERGONE \?L14
	PRINTI "Allergone"
	JUMP ?L17
?L14:	PRINTD OBJ
?L17:	PRINTI """. "
	RTRUE

	.FUNCT SAUCER-F
	EQUAL? PRSA,V?EXAMINE \?L1
	PRINTR "The saucer is hand-painted with a mythological scene. It has a couple of small areas of brown discoloration."
?L1:	EQUAL? PRSA,V?SMELL \?L5
	PRINTR "There is a faint smell of tea."
?L5:	EQUAL? PRSA,V?FINGERPRINT \?L8
	CALL DO-FINGERPRINT >STACK
	RSTACK
?L8:	EQUAL? PRSA,V?ANALYZE \FALSE
	CALL DO-ANALYZE >STACK
	RSTACK

	.FUNCT SHOWER-F
	EQUAL? PRSA,V?THROUGH,V?TAKE \FALSE
	PRINTI "Being unusually grubby, even for a police detective, this is one of your better ideas so far on this case. However, your attire isn't suitable, and you probably have better things to do."
	CRLF
	CALL PRINT-ID,STR?112 >STACK
	RSTACK

	.FUNCT TOILET-F,RARG=100
	EQUAL? RARG,100 \FALSE
	EQUAL? PRSA,V?LOOK-INSIDE,V?EXAMINE \?L3
	PRINTR "You have stooped to a new low, snooping around toilet bowls. Wait! Something catches your eye--was it the Tidy-Bowl man? Is he the murderer? Naw..."
?L3:	EQUAL? PRSA,V?FLUSH \FALSE
	PRINTR "Whhoooossshhhhh!"

	.FUNCT SINK-F
	EQUAL? PRSA,V?LAMP-ON \FALSE
	PRINTR "You turn the handle and lo! Water starts to run. Impressed, you turn the handle again, and the water stops running! Bravo!"

	.FUNCT RANDOM-PSEUDO
	PRINTR "You can't do anything with that."

	.FUNCT WINDOW-F
	EQUAL? PRSA,V?MUNG \?L1
	PRINTI "Vandalism is not the answer! Think of your position. How would it look for a famous police inspector to be arrested?"
	CRLF
	CALL PRINT-ID,STR?113 >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?BRUSH \?L5
	PRINTR "You think you're clever, don't you? The window is so dirty that it isn't easily cleaned."
?L5:	EQUAL? PRSA,V?LOOK-INSIDE \FALSE
	PRINTR "The window is dirty and impossible to see through clearly."

	.FUNCT WINDOW-KNOCK,RM
	CALL INHABITED?,RM >STACK
	ZERO? STACK /FALSE
	PRINTR "Someone looks up at you disgustedly."

	.FUNCT KITCHEN-WINDOW-F
	EQUAL? PRSA,V?BRUSH,V?MUNG \?L1
	CALL WINDOW-F >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?OPEN \?L3
	PRINTR "The window can't be opened."
?L3:	EQUAL? PRSA,V?KNOCK \?L6
	EQUAL? HERE,KITCHEN \?L7
	PUSH ORCHARD
	JUMP ?L9
?L7:	PUSH KITCHEN
?L9:	CALL WINDOW-KNOCK,STACK >STACK
	RSTACK
?L6:	EQUAL? PRSA,V?LOOK-INSIDE \FALSE
	EQUAL? HERE,KITCHEN \?L11
	PRINTR "You can barely see through the thick leaves of the grape arbor, but a lawn and lake can be seen in the distance."
?L11:	PRINTI "You can see the kitchen beyond the tangle of trees and branches."
	CALL WINDOW-SHOP,KITCHEN,STR?114 >STACK
	RSTACK

	.FUNCT POPULATION,RM,PR=0,CNT=0,OBJ
	FIRST? RM >OBJ /?L1
	RETURN CNT
?L1:	FSET? OBJ,PERSON \?L8
	INC 'CNT
	ZERO? PR /?L8
	CALL DESCRIBE-PERSON,OBJ,STR?115
?L8:	NEXT? OBJ >OBJ /?L1
	RETURN CNT

	.FUNCT SHED-WINDOW-F
	EQUAL? PRSA,V?BRUSH,V?MUNG \?L1
	CALL WINDOW-F >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?OPEN \?L3
	PRINTI "The window can't be opened."
	CRLF
	CALL PRINT-ID,STR?116 >STACK
	RSTACK
?L3:	EQUAL? PRSA,V?LISTEN \?L6
	GRTR? SECRET-MEETING,0 \?L6
	PRINTR "You can't make out any of the words."
?L6:	EQUAL? PRSA,V?LOOK-INSIDE \FALSE
	CALL PRINT-ID,STR?117
	EQUAL? HERE,SHED-ROOM \?L10
	PRINTI "Although the window is grimy, you can make out the lawn outside. "
	CALL WINDOW-SHOP,EAST-LAWN,STR?118 >STACK
	RSTACK
?L10:	EQUAL? SECRET-MEETING,4 \?L14
	PRINTR "Mr. Baxter seems furious and about to strike Ms. Dunbar, then calms himself. Ms. Dunbar starts to cry and is embraced by Mr. Baxter."
?L14:	GRTR? SECRET-MEETING,2 \?L17
	PRINTR "Mr. Baxter and Ms. Dunbar are inside. Although you can't hear them, it's clear from their gestures that a serious argument is occurring. Dunbar appears very upset and breaks into tears. Baxter remains composed, but tense and  perhaps angry -- you can't be sure."
?L17:	GRTR? SECRET-MEETING,0 \?L20
	PRINTR "Through the grimy window you see Mr. Baxter and Ms. Dunbar talking. Dunbar is doing most of the talking, barely restraining tears. Baxter is listening, nodding grimly, and occassionally saying a few words. Unfortunately, you can't make any of them out."
?L20:	PRINTI "You can vaguely make out the inside of the shed through the grime. "
	CALL WINDOW-SHOP,SHED-ROOM,STR?119 >STACK
	RSTACK

	.FUNCT DINING-ROOM-WINDOW-F
	EQUAL? PRSA,V?MUNG \?L1
	CALL WINDOW-F >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?OPEN \?L3
	PRINTR "The window can't be opened."
?L3:	EQUAL? PRSA,V?LOOK-INSIDE \FALSE
	EQUAL? HERE,ROSE-GARDEN \?L7
	PRINTI "You can see the dining room through the window."
	CALL WINDOW-SHOP,DINING-ROOM,STR?120
	RTRUE
?L7:	EQUAL? HERE,IN-ROSES \?L11
	PRINTI "You can see the dining room pretty clearly through the window."
	CRLF
	CALL POPULATION,DINING-ROOM,1
	RTRUE
?L11:	PRINTR "Through the window, the rose garden can be seen, and, off to the north, a wide lawn ending on a blue lake."

	.FUNCT WINDOW-SHOP,RM,STR,P
	CALL POPULATION,RM >P
	ZERO? P \?L1
	CRLF
	RTRUE
?L1:	PRINTI " You can vaguely see "
	EQUAL? P,1 \?L6
	PRINTI "someone"
	JUMP ?L10
?L6:	PRINTN P
	PRINTI " people"
?L10:	PRINTI " inside the "
	PRINT STR
	PRINTR "."

	.FUNCT DESCRIBE-PERSON,PERSON?1,STR=0
	PRINTD PERSON?1
	PRINTI " is "
	ZERO? STR \?L3
	PUSH STR?121
	JUMP ?L5
?L3:	PUSH STR
?L5:	PRINT STACK
	PRINTR "."

	.FUNCT MASTER-BEDROOM-DRESSER-F
	EQUAL? PRSA,V?EXAMINE \?L1
	PRINTR "The dresser is a beautiful piece of cabinetry."
?L1:	EQUAL? PRSA,V?OPEN,V?SEARCH,V?LOOK-INSIDE \FALSE
	PRINTR "You open all of the drawers, but find only a variety of stockings, undergarments, and handkerchiefs."

	.FUNCT BED-F,RARG=100
	EQUAL? RARG,100 \FALSE
	EQUAL? PRSA,V?LOOK-UNDER \FALSE
	PRINTR "No doubt you are looking for the bogeyman, but you are out of luck."

	.FUNCT SUGAR-BOWL-F
	EQUAL? PRSA,V?TASTE \?L1
	PRINTR "The powder tastes like sugar."
?L1:	EQUAL? PRSA,V?SMELL \?L5
	PRINTI "There is no high from sniffing this powder."
	CRLF
	CALL PRINT-ID,STR?122 >STACK
	RSTACK
?L5:	EQUAL? PRSA,V?EAT \?L8
	PRINTI "You eat some, but it is cloyingly sweet, so you stop."
	CRLF
	CALL PRINT-ID,STR?123 >STACK
	RSTACK
?L8:	EQUAL? PRSA,V?FINGERPRINT \?L11
	CALL DO-FINGERPRINT >STACK
	RSTACK
?L11:	EQUAL? PRSA,V?ANALYZE \FALSE
	CALL DO-ANALYZE >STACK
	RSTACK

	.FUNCT TOOLS-F
	EQUAL? PRSA,V?TAKE \FALSE
	PRINTR "The tools are standard gardening tools, in excellent condition. You have no use for them, unless you are looking for a new profession."

	.FUNCT DUNBAR-F,RARG=0
	EQUAL? RARG,M-OBJDESC \?L1
	CALL IN-MOTION?,DUNBAR >STACK
	ZERO? STACK \TRUE
	IN? BAXTER,SHED \?L5
	ZERO? SECRET-MEETING \TRUE
?L5:	ZERO? DUNBAR-BAXTER-MEET \TRUE
	IN? DUNBAR,DUNBAR-BATH \?L7
	PRINTI "Ms. Dunbar is here, brushing her hair."
	JUMP ?L21
?L7:	IN? DUNBAR,DUNBAR-ROOM \?L10
	PRINTI "Ms. Dunbar is lying on her bed."
	JUMP ?L21
?L10:	IN? DUNBAR,LIVING-ROOM \?L13
	ZERO? POST-WILL /?L14
	PRINTI "Ms. Dunbar is standing in the corner, looking pensive."
	JUMP ?L21
?L14:	PRINTI "Ms. Dunbar is sitting on the sofa here."
	JUMP ?L21
?L13:	PRINTI "Ms. Dunbar is here."
?L21:	CRLF
	CALL CARRY-CHECK,DUNBAR
	RTRUE
?L1:	EQUAL? WINNER,DUNBAR \?L24
	EQUAL? PRSA,V?FIND /FALSE
	CALL COM-CHECK,DUNBAR >STACK
	ZERO? STACK \TRUE
	EQUAL? PRSA,V?GOODBYE,V?HELLO \?L28
	PRINTR "Ms. Dunbar nods at you."
?L28:	CALL PICK-ONE,WHY-ME >STACK
	PRINT STACK
	CRLF
	RTRUE
?L24:	EQUAL? PRSA,V?SHOW,V?ASK-ABOUT,V?HELLO \?L34
	CALL GRAB-ATTENTION,DUNBAR >STACK
	ZERO? STACK /TRUE
?L34:	EQUAL? PRSA,V?HELLO \?L36
	PRINTR "Ms. Dunbar nods at you."
?L36:	EQUAL? PRSA,V?ASK-ABOUT \?L40
	EQUAL? PRSO,DUNBAR \?L40
	EQUAL? PRSI,GLOBAL-CONCERT \?L41
	ZERO? STUB-D \?L45
	ZERO? STUB-DX /?L43
?L45:	PRINTR """It was an excellent concert, Inspector, but I don't see why you're asking about it."""
?L43:	PRINTR """I don't know what you are talking about. I don't go in for concerts much, you know."""
?L41:	EQUAL? PRSI,STUB \?L51
	ZERO? STUB-BX /?L52
	PRINTR """Why, it's just as Mr. Baxter said."""
?L52:	SET 'STUB-D,1
	IN? BAXTER,HERE \?L57
	SET 'STUB-DX,1
?L57:	ZERO? STUB-B /?L60
	SET 'CONTRADICTION,1
?L60:	PRINTR """Oh, I...well, I guess I should tell you. You see, Mr. Baxter and I, we go together to concerts, only occasionally, you understand. We went that night, the night Marshall died. Then he took me home and that's it. I should have said something before, but I just didn't think it was important, and, well, I didn't think that the others should know we were seeing each other socially. Our...nobody knows about it, you know. Please don't say anything![RWD_ID: actions:3053, VAL: 1]"""
?L51:	EQUAL? PRSI,BAXTER,GLOBAL-BAXTER \?L65
	PRINTR """Mr. Baxter? I see him often when he comes here on business, but I don't really know him that well. We keep to business when he comes around, and I hardly ever talk with him otherwise. He is, of course, an excellent executive, and poor Mr. Robner had every confidence in him."""
?L65:	EQUAL? PRSI,LOBLO,GLOBAL-LOBLO,LOBLO-BOTTLE \?L68
	ZERO? LOBLO-FLAG /?L69
	PRINTR "Ms. Dunbar is taken aback. ""I...I don't really know what to say. I take the tablets for my blood pressure. I have for a few months now. I know what you're thinking. I can't understand. Someone must have taken my pills and poisoned Mr. Robner. That's it. It's probably George. He knew about my pills. He's always snooping around. He used to talk about how half the money would be his someday."""
?L69:	PRINTR "Ms. Dunbar seems a bit surprised. ""You found those in my bathroom, didn't you? I've been taking them for months for my blood pressure. Are they important?"" she asks."
?L68:	EQUAL? PRSI,GEORGE,GLOBAL-GEORGE \?L76
	CALL DISCRETION,DUNBAR,GEORGE
	PRINTR """Nobody likes George much. He's always alone when he's here, and that's only when he can't get more money to waste. I think he's just been waiting for the day when his father's money would be his. I can't say I miss him when he's not here: A thoroughly obnoxious child."""
?L76:	EQUAL? PRSI,MRS-ROBNER,GLOBAL-MRS-ROBNER \?L79
	PRINTR """She's a lovely person. She and Marshall were always an odd couple: he was so quiet and reserved, and she's so lively and sociable. She's changed a lot over the last few years. She used to enjoy her life here, but lately she's been restless and irritable, and now with Marshall's death, I'm worried about what may become of her."""
?L79:	EQUAL? PRSI,ROURKE,GLOBAL-ROURKE \?L82
	PRINTR """Mrs. Rourke is a very good servant. Always helpful, and always nearby when needed."""
?L82:	EQUAL? PRSI,GARDENER,GLOBAL-GARDENER \?L85
	PRINTR """He seems nice, if you can talk to him. You usually can't, really."" She laughs briefly. ""Don't ever disturb his roses, or you'll learn the meaning of temper."" She giggles again."
?L85:	EQUAL? PRSI,GLOBAL-OLD-WILL \?L88
	PRINTR """I really don't know too much about Marshall's personal business."""
?L88:	EQUAL? PRSI,GLOBAL-NEW-WILL \?L91
	GRTR? WILL-TIME,0 \?L92
	PRINTR """I don't know anything about it. I suppose Marshall could have written a new will, but I probably would have seen signs of it around the library."""
?L92:	PRINTR """As far as I know, there was no new will written, although Marshall did threaten to disinherit George. I guess he could have written one without my knowledge. I'm not always with him, you know."""
?L91:	EQUAL? PRSI,NEW-WILL \?L99
	PRINTR "Ms. Dunbar reads the will carefully, nodding slowly. ""I guess I'm not surprised that Marshall disinherited George. He's been asking for it."""
?L99:	EQUAL? PRSI,GLOBAL-MR-ROBNER \?L102
	PRINTR "Ms. Dunbar looks down at the ground and sniffles softly. ""I've known him for years. He's been tremendously nervous and depressed lately about business. I don't think all was well in his personal life either. George has always been a problem for him. He even mentioned suicide once, although I never took it seriously. It shows you can never tell."" She wipes her eyes with her hands."
?L102:	EQUAL? PRSI,GLOBAL-FOCUS \?L105
	PRINTR """Focus? There was once a subsidiary of Robner Corp. with that name. I can't recall much about it, though."""
?L105:	EQUAL? PRSI,GLOBAL-SAFE \?L108
	PRINTR """A safe? I don't think there's one in the house, although there's one at the office."""
?L108:	PRINTR """I'm sorry, but I can't help you with that."""
?L40:	EQUAL? PRSA,V?CONFRONT,V?SHOW \?L114
	EQUAL? PRSI,STUB \?L115
	CALL PERFORM,V?ASK-ABOUT,DUNBAR,STUB
	RTRUE
?L115:	EQUAL? PRSI,LOBLO \?L117
	PRINTR "She glances at the pills. ""They're my pills. You must have taken them from my bathroom. Well, what am I supposed to say?"" She looks away."
?L117:	EQUAL? PRSI,LAB-REPORT \FALSE
	PRINTI "She seems stunned but recovers quickly. ""He didn't commit suicide, then?"" she says. ""But LoBlo, that's a pill I take for my blood pressure."" She pauses. ""I can tell what you're thinking, but I didn't, couldn't have done it. Why should I? Someone must have taken them, maybe George. He knew I used them.[RWD_ID: actions:3147, VAL: 1]"""
	CRLF
	RANDOM 15 >STACK
	ADD 5,STACK >STACK
	CALL QUEUE,I-DUNBAR-ACTIVATE,STACK >STACK
	PUT STACK,0,1
	SET 'LOBLO-FLAG,1
	RETURN LOBLO-FLAG
?L114:	EQUAL? PRSA,V?ACCUSE \?L124
	ZERO? LOBLO-FLAG /?L125
	PRINTI """No! I didn't do it! I've worked for Mr. Robner for years. What possible motive could I have?"" With that, Ms. Dunbar begins to cry and move about the room quite nervously."
	CRLF
	CALL DUNBAR-SEQUENCE >STACK
	RSTACK
?L125:	PRINTR """What?"" she cries. ""Murder?"" She regains her composure and asks, ""I thought he committed suicide, with his medicine."""
?L124:	EQUAL? PRSA,V?ARREST \FALSE
	FSET? LAB-REPORT,TOUCHBIT /?L133
	CALL MURDER-NOT-PROVEN,DUNBAR
	RTRUE
?L133:	PRINTI "Sergeant Duffy enters the room solemnly. He places handcuffs on Ms. Dunbar and leads her off. She is sobbing hysterically.

"
	CALL END-HEADER,STR?79
	ZERO? MEETING-INTERRUPTED /?L138
	PRINTI "What a tragedy! Ms. Dunbar, released on bail during her trial for the murder of Mr. Robner, was found dead this morning, the victim of an apparent suicide. Her death is all the more distressing as the district attorney was trying to arrange some plea-bargaining deal with her in exchange for information implicating an unnamed accomplice. I am sorry to be the one to let you know. Thanks for your hard work on the Robner case.

"
	JUMP ?L142
?L138:	PRINTI "I wanted to let you know the disposition of the Robner case. Ms. Dunbar was acquitted today, the jury citing a lack of motive and only circumstantial evidence. I am extremely sorry.

"
?L142:	CALL CASE-OVER >STACK
	RSTACK

	.FUNCT I-DUNBAR-ACTIVATE
	ZERO? DUNBAR-ACCUSED \FALSE
	CALL DUNBAR-SEQUENCE
	RFALSE

	.FUNCT ROURKE-F,RARG=0
	EQUAL? RARG,M-OBJDESC \?L1
	CALL IN-MOTION?,ROURKE >STACK
	ZERO? STACK \TRUE
	IN? ROURKE,KITCHEN \?L5
	PRINTI "Mrs. Rourke is here, cleaning the kitchen."
	CRLF
	JUMP ?L17
?L5:	IN? ROURKE,DINING-ROOM \?L8
	PRINTI "Mrs. Rourke is cleaning the table here."
	CRLF
	JUMP ?L17
?L8:	IN? ROURKE,LIVING-ROOM \?L11
	PRINTI "Mrs. Rourke is dusting the room."
	CRLF
	JUMP ?L17
?L11:	IN? ROURKE,ROURKE-ROOM \?L14
	PRINTI "Mrs. Rourke is resting here."
	CRLF
	JUMP ?L17
?L14:	PRINTI "Mrs. Rourke is here, tidying up."
	CRLF
?L17:	CALL CARRY-CHECK,ROURKE
	RTRUE
?L1:	EQUAL? WINNER,ROURKE \?L20
	EQUAL? PRSA,V?FIND /FALSE
	CALL COM-CHECK,ROURKE >STACK
	ZERO? STACK \TRUE
	EQUAL? PRSA,V?GOODBYE,V?HELLO \?L24
	PRINTR "Mrs. Rourke looks up from her work and nods."
?L24:	CALL PICK-ONE,WHY-ME >STACK
	PRINT STACK
	CRLF
	RTRUE
?L20:	EQUAL? PRSA,V?SHOW,V?ASK-ABOUT,V?HELLO \?L30
	CALL GRAB-ATTENTION,ROURKE >STACK
	ZERO? STACK /TRUE
?L30:	EQUAL? PRSA,V?GOODBYE,V?HELLO \?L32
	PRINTR "Mrs. Rourke looks up from her work and nods."
?L32:	EQUAL? PRSA,V?ASK-ABOUT \?L36
	EQUAL? PRSO,ROURKE \?L36
	EQUAL? PRSI,ENVELOPE \?L37
	IN? ENVELOPE,ROURKE \?L37
	PRINTR """It's a letter just arrived for Mrs. Robner. I was going to bring it to her."""
?L37:	EQUAL? PRSI,BAXTER,GLOBAL-BAXTER \?L41
	CALL DISCRETION,ROURKE,BAXTER
	PRINTR """Baxter! Hmmmph. Stuffiest person I ever met! I don't mind telling you I've never liked him much. So serious, businesslike. Thinks he's hot stuff, I imagine. I really shouldn't be telling you this, though, I suppose. ""Rourke,"" they tell me, ""stop your gossiping."" Not that I'm a gossip, mind you, but I do have my opinions."""
?L41:	EQUAL? PRSI,GEORGE,GLOBAL-GEORGE \?L44
	CALL DISCRETION,ROURKE,GEORGE
	PRINTR """George is something, I tell you. The black sheep of the family, is what I'd say. Never met nobody with less respect for money. You'd think it grew on trees; not that it don't around here. Well, there I go, shooting off my mouth again."""
?L44:	EQUAL? PRSI,CORPSE,DUNBAR,GLOBAL-DUNBAR \?L47
	PRINTR """Ms. Dunbar is nice; the best of the lot, I think. She's always been real friendly to me, and helps out when I have a problem. Mr. Robner, he really liked her too. I don't think Mrs. Robner did, though. He's been so busy lately with the business and Ms. Dunbar that I don't think the Mrs. hardly saw him much. Kind of jealous, maybe, of the two of them, I mean."""
?L47:	EQUAL? PRSI,MRS-ROBNER,GLOBAL-MRS-ROBNER \?L50
	CALL DISCRETION,ROURKE,MRS-ROBNER
	PRINTR """Now she's a strange sort. Real lively when she moved here, but I don't think she ever liked the life here. Her people are from Boston, one of those old families, and she never got used to Mr. Robner's ways. She goes out a lot, and sometimes she doesn't even come back at night. Not that I'm spying on her. But I know about these things. She has callers here, a number of men. One in particular comes more than others. A widower, I think, a real live wire. Not what it's any of my business, but I think someone with a sharp tongue could do her a lot of damage if she doesn't watch herself."""
?L50:	EQUAL? PRSI,GLOBAL-STEVEN \?L53
	CALL DISCRETION,ROURKE,MRS-ROBNER
	PRINTR """Ah, that's it! He's the one who's been coming around, taking Mrs. Robner out. I don't like the look of it. I mean, I think it looks kind of funny, what with she's a married woman. Mr. Robner takes no notice, of course, always busy. Oh, well. I shouldn't be telling you this. Now that Mr. Robner's dead, I don't suppose it matters, but what do you think people were saying! I tell you, gossip is fierce around here!"""
?L53:	EQUAL? PRSI,GARDENER,GLOBAL-GARDENER \?L56
	PRINTR """Oh, don't let him frighten you. Let him alone and don't bother his roses. Gets positively livid about that. Got the green thumb, that's for sure."""
?L56:	EQUAL? PRSI,GLOBAL-MR-ROBNER \?L59
	PRINTR """A fine man, but his head was always in the clouds. Just the opposite of Mrs. Robner. Her feet were always on the ground. He's been so worried, it makes me sick. I don't understand these business things, but he said something about them taking his business away from him just two nights ago. I guess the pressure was too much. He was a fine man, full of good works, though charity does begin at home, as the saying goes. Not that I have anything to complain about. He always treated me right."""
?L59:	PRINTI """I don't know nothing about no "
	PRINTD PRSI
	PRINTR """."
?L36:	EQUAL? PRSA,V?CONFRONT,V?SHOW \FALSE
	EQUAL? PRSI,LAB-REPORT \?L66
	PRINTR """Well, if that don't beat all! A murder here, right under my nose! You've got your work cut out for you, Inspector, all right. There's some pretty strange people around here, and I wouldn't put it past hardly any of 'em to do it. What do you know!"""
?L66:	PRINTR "Mrs. Rourke seems uninterested in it."

	.FUNCT DISCRETION,P1,P2
	IN? P2,HERE \FALSE
	PRINTD P1
	PRINTI " looks briefly toward "
	PRINTD P2
	PRINTR " and then speaks in a low whisper."

	.FUNCT CARRY-CHECK,PERSON?1
	FIRST? PERSON?1 >STACK \TRUE
	CALL PRINT-CONT,PERSON?1,1,0
	RTRUE

	.FUNCT DUM-KOF-F
	EQUAL? PRSA,V?DRINK \?L1
	PRINTI "You drink the remaining cough syrup. Yuk! That was awful!"
	CRLF
	CALL PRINT-ID,STR?124
	REMOVE DUM-KOF
	RTRUE
?L1:	EQUAL? PRSA,V?TASTE \FALSE
	PRINTI "Yuk! It tastes like cough medicine!"
	CRLF
	CALL PRINT-ID,STR?125 >STACK
	RSTACK

	.FUNCT LOBLO-F
	EQUAL? PRSA,V?TASTE \?L1
	PRINTR "The pills are virtually tasteless."
?L1:	EQUAL? PRSA,V?SMELL \?L5
	PRINTI "The pills are odorless."
	CRLF
	CALL PRINT-ID,STR?126 >STACK
	RSTACK
?L5:	EQUAL? PRSA,V?EAT \?L8
	PRINTR "Nervous? Blood Pressure high? See a doctor."
?L8:	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "These are small, yellow pills."

	.FUNCT SNEEZO-F
	EQUAL? PRSA,V?TASTE \?L1
	PRINTR "The pills are virtually tasteless."
?L1:	EQUAL? PRSA,V?SMELL \?L5
	PRINTR "The pills are odorless."
?L5:	EQUAL? PRSA,V?EAT \?L8
	PRINTI "You must realize that you aren't sick."
	CRLF
	CALL PRINT-ID,STR?127 >STACK
	RSTACK
?L8:	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "These are small, white pills."

	.FUNCT MEDICINE-BOTTLE-F
	EQUAL? PRSA,V?COUNT \FALSE
	PRINTR "It's hard to tell with the bottle closed."

	.FUNCT ALLERGONE-F
	EQUAL? PRSA,V?TASTE \?L1
	PRINTR "The pills are bitter on the tongue."
?L1:	EQUAL? PRSA,V?SMELL \?L5
	PRINTR "The pills are odorless."
?L5:	EQUAL? PRSA,V?EAT \?L8
	PRINTI "The only allergy you seem to have is to work."
	CRLF
	CALL PRINT-ID,STR?128 >STACK
	RSTACK
?L8:	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "These are tiny red pills."

	.FUNCT EBULLION-F
	EQUAL? PRSA,V?TASTE \?L1
	PRINTR "The pills are quite bitter."
?L1:	EQUAL? PRSA,V?SMELL \?L5
	PRINTR "The pills have a faint pungent aroma."
?L5:	EQUAL? PRSA,V?EAT \?L8
	PRINTI "Are you depressed? Given your performance on this case, that isn't surprising. In any event, you shouldn't take other people's medicine!"
	CRLF
	CALL PRINT-ID,STR?129 >STACK
	RSTACK
?L8:	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "These are little white pills."

	.FUNCT DUNBAR-SEQUENCE,BL
	LOC BAXTER >BL
	ZERO? DUNBAR-ACCUSED \FALSE
	IN? DUNBAR,BL /?L4
	CALL ESTABLISH-GOAL,DUNBAR,BL,1
?L4:	SET 'DUNBAR-ACCUSED,1
	SET 'D-S-BAXTER-LOC,BL
	CALL QUEUE,I-DUNBAR-SEQ,-1 >STACK
	PUT STACK,0,1
	RTRUE

	.FUNCT I-DUNBAR-SEQ,BL
	LOC BAXTER >BL
	EQUAL? BL,D-S-BAXTER-LOC /?L1
	CALL DUNBAR-SEQUENCE
	RFALSE
?L1:	LOC DUNBAR >STACK
	EQUAL? STACK,BL \FALSE
	GET GOAL-TABLES,BAXTER-C >STACK
	PUT STACK,GOAL-ENABLE,0
	EQUAL? HERE,BL \?L4
	PRINTR "Ms. Dunbar glances at Baxter and then at you."
?L4:	SET 'DUNBAR-BAXTER-MEET,1
	GET GOAL-TABLES,BAXTER-C >STACK
	PUT STACK,GOAL-ENABLE,1
	CALL QUEUE,I-DUNBAR-SEQ,0
	CALL QUEUE,I-DUNBAR-SEQ-2,5 >STACK
	PUT STACK,0,1
	RFALSE

	.FUNCT I-DUNBAR-SEQ-2
	SET 'DUNBAR-BAXTER-MEET,0
	CALL ESTABLISH-GOAL,DUNBAR,SHED-ROOM,1
	CALL QUEUE,I-DUNBAR-SEQ-D,-1 >STACK
	PUT STACK,0,1
	CALL QUEUE,I-DUNBAR-SEQ-3,10 >STACK
	PUT STACK,0,1
	RFALSE

	.FUNCT I-DUNBAR-SEQ-3
	CALL ESTABLISH-GOAL,BAXTER,NORTH-LAWN,1
	CALL QUEUE,I-DUNBAR-SEQ-B,-1 >STACK
	PUT STACK,0,1
	RFALSE

	.FUNCT I-DUNBAR-SEQ-D,GT
	GET GOAL-TABLES,DUNBAR-C >GT
	LOC DUNBAR >STACK
	EQUAL? STACK,SHED-ROOM \?L1
	LOC BAXTER >STACK
	EQUAL? STACK,SHED-ROOM \?L3
	CALL QUEUE,I-DUNBAR-SEQ-4,-1 >STACK
	PUT STACK,0,1
	CALL QUEUE,I-DUNBAR-SEQ-D,0
	RFALSE
?L3:	EQUAL? HERE,SHED-ROOM \FALSE
	RANDOM 100 >STACK
	GRTR? 50,STACK \?L6
	PRINTR "Dunbar paces around the shed nervously. If she was looking for something, she would have found it by now."
?L6:	PRINTR "Ms. Dunbar seems to be looking around for something."
?L1:	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L14
	CALL FOLLOWED?,DUNBAR >STACK
	ZERO? STACK /?L14
	GET GT,GOAL-ENABLE >STACK
	ZERO? STACK /?L15
	PUT GT,GOAL-ENABLE,0
	JUMP ?L23
?L15:	RANDOM 100 >STACK
	GRTR? 28,STACK \?L17
	PRINTR "Ms. Dunbar eyes you nervously."
?L17:	RANDOM 100 >STACK
	GRTR? 50,STACK \?L20
	PRINTR "Ms. Dunbar stares off toward the south."
?L20:	PRINTR "Ms. Dunbar seems to be deep in thought."
?L23:	ZERO? STUB-DROPPED \?L26
	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L26
	PRINTI "Ms. Dunbar spots you and stops. She reaches into her pocket and pulls out a cigarette. As she does so, what appears to be a ticket stub falls out of her pocket and floats to the ground. She checks her pocket again, apparently for a match, but finds none and puts the cigarette back in her pocket."
	CRLF
	LOC DUNBAR >STACK
	MOVE STUB,STACK
	SET 'STUB-DROPPED,1
	RETURN STUB-DROPPED
?L26:	RANDOM 100 >STACK
	GRTR? 15,STACK \?L30
	PRINTI "Ms. Dunbar glances around as she walks. She takes a quick glance in your direction, but it doesn't seem like she noticed you."
	CRLF
	PUT GT,GOAL-ENABLE,1
	RTRUE
?L30:	RANDOM 100 >STACK
	GRTR? 50,STACK \?L33
	PRINTR "Ms. Dunbar looks around as she walks and does a brief double-take when she looks in your direction. She slows down and stops."
?L33:	PRINTR "Ms. Dunbar, who has been looking from side to side as she goes, comes to a stop. She spins around, looking in all directions."
?L14:	PUT GT,GOAL-ENABLE,1
	RFALSE

	.FUNCT I-DUNBAR-SEQ-B
	LOC BAXTER >STACK
	EQUAL? STACK,NORTH-LAWN /?L3
	GETP HERE,P?LINE >STACK
	EQUAL? STACK,TOP-OF-THE-LINE-C \FALSE
?L3:	CALL QUEUE,I-DUNBAR-SEQ-B,0
	CALL ESTABLISH-GOAL,BAXTER,SHED-ROOM,1
	CALL QUEUE,I-DUNBAR-SEQ-B-2,-1 >STACK
	PUT STACK,0,1
	RFALSE

	.FUNCT I-DUNBAR-SEQ-B-2,GT
	GET GOAL-TABLES,BAXTER-C >GT
	LOC BAXTER >STACK
	EQUAL? STACK,SHED-ROOM \?L1
	CALL QUEUE,I-DUNBAR-SEQ-B-2,0
	RFALSE
?L1:	CALL FOLLOWED?,BAXTER >STACK
	ZERO? STACK /?L3
	GET GT,GOAL-ENABLE >STACK
	ZERO? STACK /?L4
	PUT GT,GOAL-ENABLE,0
	RFALSE
?L4:	RANDOM 100 >STACK
	GRTR? 50,STACK \?L6
	PRINTR "Baxter draws a deep breath and looks about contentedly."
?L6:	PRINTR "Baxter stares out over the lake."
?L3:	PUT GT,GOAL-ENABLE,1
	RFALSE

	.FUNCT I-DUNBAR-SEQ-4
	EQUAL? HERE,SHED-ROOM \?L1
	LESS? SECRET-MEETING,2 /?L5
	GRTR? SECRET-MEETING,5 \?L3
?L5:	PRINTI "You seem to have walked in on some sort of get-together, although from the look on Ms. Dunbar's face, you are not the guest of honor. She is aghast, and she continually looks back and forth between Mr. Baxter and yourself."
	CRLF
	JUMP ?L8
?L3:	PRINTI "As you enter the shed, Mr. Baxter and Ms. Dunbar, who were in the midst of a quiet but heated argument, stop at once. Ms. Dunbar is quite upset and clutches Mr. Baxter. Baxter, who has retained his composure throughout, attempts to comfort Dunbar. She pushes him away and runs out of the shed."
	CRLF
	MOVE DUNBAR,EAST-LAWN
	GET WHERE-TABLES,DUNBAR-C >STACK
	PUT STACK,0,PRESENT-TIME
	GET WHERE-TABLES,0 >STACK
	PUT STACK,DUNBAR-C,PRESENT-TIME
?L8:	CALL HEAD-FOR-CLIMAX
	RTRUE
?L1:	LOC BAXTER >STACK
	EQUAL? STACK,SHED-ROOM \FALSE
	IGRTR? 'SECRET-MEETING,5 \FALSE
	CALL HEAD-FOR-CLIMAX
	RFALSE

	.FUNCT FOLLOWED?,PERSON?1,L
	LOC PERSON?1 >L
	EQUAL? L,HERE /TRUE
	EQUAL? HERE,GUEST-ROOM /FALSE
	GETP HERE,P?CORRIDOR >STACK
	GETP L,P?CORRIDOR >STACK
	BAND STACK,STACK >STACK
	ZERO? STACK /FALSE
	RTRUE

	.FUNCT HEAD-FOR-CLIMAX
	EQUAL? HERE,EAST-LAWN,EAST-SIDE,EAST-OF-DOOR \?L1
	PRINTI "Baxter and Dunbar both leave the shed, heading off in different directions."
	CRLF
	JUMP ?L5
?L1:	EQUAL? HERE,BEHIND-SHED \?L5
	PRINTI "The voices stop and you hear sets of footsteps leaving the shed."
	CRLF
?L5:	CALL ESTABLISH-GOAL,DUNBAR,DUNBAR-ROOM,1
	CALL ESTABLISH-GOAL,BAXTER,NORTH-LAWN,1
	CALL QUEUE,I-BAXTER-SEQ,-1 >STACK
	PUT STACK,0,1
	CALL QUEUE,I-DUNBAR-SEQ-4,0
	SET 'MEETING-INTERRUPTED,SECRET-MEETING
	SET 'SECRET-MEETING,0
	RETURN SECRET-MEETING

	.FUNCT I-BAXTER-SEQ
	EQUAL? BAXTER-SEQ-LOC,MASTER-BEDROOM \?L1
	GETP HERE,P?CORRIDOR >STACK
	BAND STACK,1 >STACK
	EQUAL? STACK,1 /FALSE
	EQUAL? HERE,STAIRS,STAIR-BOTTOM,DUNBAR-ROOM /FALSE
	SET 'BAXTER-SEQ-LOC,BEDROOM-BALCONY
	MOVE BAXTER,BEDROOM-BALCONY
	REMOVE DUNBAR
	SET 'DUNBAR-DEAD,1
	CALL INT,I-DUNBAR >STACK
	PUT STACK,0,0
	MOVE PISTOL,DUNBAR-ROOM
	MOVE SUICIDE-NOTE,DUNBAR-ROOM
	MOVE CORPSE,DUNBAR-ROOM
	CALL QUEUE,I-BAXTER-SEQ,0
	CALL QUEUE,I-BAXTER-ESCAPE,-1 >STACK
	PUT STACK,0,1
	GETP HERE,P?LINE >STACK
	EQUAL? STACK,TOP-OF-THE-LINE-C \?L5
	SET 'SHOT-FIRED,1
	PRINTI "You hear a pistol shot close by."
	CRLF
	JUMP ?L12
?L5:	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L9
	PRINTI "You hear what sounds like a pistol shot from inside the house."
	CRLF
	JUMP ?L12
?L9:	PRINTI "From upstairs, you hear a single explosion like a pistol shot."
	CRLF
?L12:	CALL SHOT-FIRED-F
	RTRUE
?L1:	EQUAL? BAXTER-SEQ-LOC,BEDROOM-BALCONY \?L16
	EQUAL? HERE,MASTER-BEDROOM /FALSE
	LOC MRS-ROBNER >STACK
	EQUAL? STACK,MASTER-BEDROOM /FALSE
	MOVE BAXTER,MASTER-BEDROOM
	SET 'BAXTER-SEQ-LOC,MASTER-BEDROOM
	RFALSE
?L16:	EQUAL? BAXTER-SEQ-LOC,NORTH-LAWN \?L20
	IN? DUNBAR,DUNBAR-ROOM \FALSE
	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C /FALSE
	EQUAL? HERE,BEDROOM-BALCONY /FALSE
	SET 'LADDER-FLAG-2,1
	SET 'LADDER-FLAG,0
	MOVE LADDER,ORCHARD
	FCLEAR LADDER,NDESCBIT
	FSET LADDER,TOUCHBIT
	MOVE BAXTER,BEDROOM-BALCONY
	SET 'BAXTER-SEQ-LOC,BEDROOM-BALCONY
	RFALSE
?L20:	IN? BAXTER,NORTH-LAWN \FALSE
	SET 'BAXTER-SEQ-LOC,NORTH-LAWN
	RFALSE

	.FUNCT I-BAXTER-ESCAPE,FLG=0
	ZERO? SHOT-FIRED /?L10
	SET 'SHOT-FIRED,0
	EQUAL? HERE,CORRIDOR-4,CORRIDOR-3 \?L3
	PRINTI "As you enter the hallway, you catch a glimpse of someone running across the eastern end of the hallway from south to north."
	CRLF
	SET 'FLG,1
	JUMP ?L10
?L3:	EQUAL? HERE,MASTER-BEDROOM \?L7
	PRINTI "As you walk into the bedroom, you see Baxter running past you to the balcony. He doesn't seem to have noticed you."
	CRLF
	SET 'FLG,1
	SET 'BAXTER-SEEN,1
	JUMP ?L10
?L7:	GETP HERE,P?CORRIDOR >STACK
	BAND STACK,1 >STACK
	EQUAL? STACK,1 \?L10
	PRINTI "As you enter the hallway, you see Baxter running from Dunbar's room across the hall to the master bedroom."
	CRLF
	SET 'FLG,1
	SET 'BAXTER-SEEN,1
?L10:	SET 'BAXTER-SEQ-LOC,BEDROOM-BALCONY
	EQUAL? HERE,ORCHARD,EAST-LAWN,NORTH-LAWN \?L15
	RETURN FLG
?L15:	MOVE BAXTER,IN-ORCHARD
	SET 'LADDER-FLAG-2,0
	CALL ESTABLISH-GOAL,BAXTER,DUNBAR-ROOM,1
	CALL QUEUE,I-BAXTER-ESCAPE,0
	SET 'BAXTER-SEQ-LOC,0
	RETURN FLG

	.FUNCT I-BAXTER-END-1
	CALL UNPRIORITIZE,BAXTER
	RFALSE

	.FUNCT SHOT-FIRED-F
	CALL ESTABLISH-GOAL,MRS-ROBNER,DUNBAR-ROOM,1
	CALL ESTABLISH-GOAL,ROURKE,CORRIDOR-1,1
	CALL ESTABLISH-GOAL,GEORGE,DUNBAR-ROOM,1
	CALL QUEUE,I-SHOT,-1 >STACK
	PUT STACK,0,1
	RTRUE

	.FUNCT I-SHOT,FLG=0
	IN? MRS-ROBNER,DUNBAR-ROOM \?L1
	EQUAL? HERE,DUNBAR-ROOM \?L3
	PRINTI "Mrs. Robner, standing quietly by the body, starts sobbing and leaves the room."
	CRLF
?L3:	CALL UNPRIORITIZE,MRS-ROBNER
	MOVE MRS-ROBNER,CORRIDOR-1
	SET 'FLG,1
	JUMP ?L14
?L1:	IN? GEORGE,DUNBAR-ROOM \?L8
	EQUAL? HERE,DUNBAR-ROOM \?L9
	PRINTI "George says something like ""My God"" under his breath."
	CRLF
?L9:	CALL UNPRIORITIZE,GEORGE
	JUMP ?L14
?L8:	IN? ROURKE,CORRIDOR-1 \?L14
	EQUAL? HERE,CORRIDOR-1 \?L15
	PRINTI "Mrs. Rourke peeks in the door and looks sick. ""I'm leaving this house,"" she says, and pops out again."
	CRLF
?L15:	MOVE ROURKE,STAIR-TOP
	CALL ESTABLISH-GOAL,ROURKE,ROURKE-ROOM,1
	SET 'FLG,1
?L14:	IGRTR? 'SHOT-COUNT,20 \?L21
	CALL QUEUE,I-SHOT,0
?L21:	RETURN FLG

	.FUNCT PISTOL-F
	EQUAL? PRSA,V?EXAMINE \FALSE
	FSET? PISTOL,TOUCHBIT \?L3
	PRINTR "The pistol is bloody and has clearly been used recently."
?L3:	PRINTR "The pistol has bloodstains on it. It has recently been fired."

	.FUNCT CORPSE-F
	EQUAL? PRSA,V?EXAMINE \?L1
	PRINTR "The corpse is most gruesome. Ms. Dunbar was apparently shot in the head at close range, leaving a most distasteful mess."
?L1:	EQUAL? PRSA,V?RUB \FALSE
	PRINTI "The body is still quite warm."
	RTRUE

	.FUNCT GLOBAL-PEN-F
	EQUAL? PRSA,V?FIND \?L1
	EQUAL? HERE,DUNBAR-ROOM \?L3
	PRINTR "It doesn't seem to be around here."
?L3:	PRINTR "There isn't one here."
?L1:	EQUAL? PRSA,V?ASK-ABOUT,V?ASK-FOR /FALSE
	PRINTR "There is no pen to be seen here."

	.FUNCT PEN-F
	EQUAL? PRSA,V?WRITE \FALSE
	PRINTR "The pen makes a mark in a fine blue line."

	.FUNCT I-SHOW-HOLE
	IGRTR? 'SHOW-WAIT,4 \?L1
	SET 'NO-SHOW,1
	CALL QUEUE,I-SHOW-HOLE,0
	RFALSE
?L1:	EQUAL? HERE,IN-ROSES \FALSE
	EQUAL? SHOW-WAIT,1 /?L4
	PRINTI "McNabb gives you a sideways glance. ""What kept you?"" he asks."
	CRLF
?L4:	CALL SHOW-HOLE
	CALL QUEUE,I-SHOW-HOLE,0 >STACK
	RSTACK

	.FUNCT TODAY-F
	EQUAL? PRSA,V?WHAT \FALSE
	PRINTR "Today is Friday, July 10."

	.FUNCT GLOBAL-WARRANT-F
	EQUAL? PRSA,V?FIND,V?TAKE \FALSE
	PRINTR "Knowing the courts, it would take weeks to get one."

	.FUNCT CORRIDOR-WINDOW-F
	EQUAL? PRSA,V?LOOK-INSIDE \FALSE
	PRINTR "You can see the west lawn through the window."

	.FUNCT I-BAXTER-ARRIVE
	MOVE BAXTER,SOUTH-LAWN
	EQUAL? HERE,SOUTH-LAWN \?L1
	PRINTR "A limosine pulls up the drive. Mr. Baxter exits and the limo pulls away. Baxter takes a deep breath and looks around."
?L1:	EQUAL? HERE,FRONT-PATH,EAST-LAWN,WEST-LAWN /?L6
	EQUAL? HERE,EAST-OF-DOOR,WEST-OF-DOOR \FALSE
?L6:	PRINTR "A car pulls up the drive to the south, and Mr. Baxter steps out onto the lawn."

	.FUNCT I-COATES-ARRIVE
	MOVE COATES,SOUTH-LAWN
	CALL ESTABLISH-GOAL,COATES,LIVING-ROOM,1
	EQUAL? HERE,SOUTH-LAWN \?L1
	PRINTR "A large automobile pulls up the drive. Mr. Coates, the lawyer, steps out of the car. ""Oh, hello! You must be the Inspector. I'll be reading the will at noon, you know. Don't be late!"" he says."
?L1:	EQUAL? HERE,FRONT-PATH,EAST-LAWN,WEST-LAWN /?L6
	EQUAL? HERE,EAST-OF-DOOR,WEST-OF-DOOR \FALSE
?L6:	PRINTR "A car pulls up the drive to the south, and Mr. Coates steps out onto the lawn."

	.FUNCT TRASH-F
	EQUAL? PRSA,V?EXAMINE,V?READ,V?TAKE \FALSE
	FSET TRASH,TOUCHBIT
	FSET TRASH-BASKET,TOUCHBIT
	RFALSE

	.FUNCT GLOBAL-DUFFY-F
	EQUAL? PRSA,V?FIND \FALSE
	PRINTR "Like a lurking grue in the dark places of the earth, Sergeant Duffy is always near the scene of a crime. If you want something analyzed, he will arrive in an instant to take the evidence to the lab. When the results are available, he rushes them back to you. If you wish to arrest someone, Duffy will be there with the handcuffs. A more dedicated civil servant cannot be found."

	.FUNCT L-RAILING-F
	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "The railing is made of a sturdy metal and helps prevent nasty falls. There is a small area of paint scraped off the outside edge."

	.FUNCT B-RAILING-F
	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "This sturdy railing protects people on the balcony from being impaled upon the exotic plants below. The railing itself is uniformly painted."

	.FUNCT L-BALCONY-F
	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "The balcony itself is made of wood, except the railing which is metal. The balcony is in good repair, but a few spots of dried mud soil the floor."

	.FUNCT B-BALCONY-F
	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "The balcony is wooden, excepting the metal railing surrounding it. It is in good repair and is quite clean."

	.FUNCT GLOBAL-ROOM-F,TIM
	EQUAL? PRSA,V?THROUGH \?L1
	CALL V-WALK-AROUND >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?KNOCK \?L3
	EQUAL? HERE,UPSTAIRS-CLOSET \?L4
	PRINTR "The wall to the north here sounds unusually hollow."
?L4:	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L8
	PRINTR "You're acting very strangely!"
?L8:	PRINTR "Knocking on the walls reveals nothing unusual."
?L3:	EQUAL? PRSA,V?LOOK-INSIDE \?L14
	EQUAL? HERE,CORRIDOR-2 \?L14
	PRINTR "From here, it looks quite ordinary."
?L14:	EQUAL? PRSA,V?EXAMINE,V?SEARCH \FALSE
	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L18
	SET 'TIM,10
	JUMP ?L21
?L18:	GETP HERE,P?CORRIDOR >STACK
	ZERO? STACK /?L20
	SET 'TIM,3
	JUMP ?L21
?L20:	GETP HERE,P?SIZE >STACK
	ADD 2,STACK >TIM
?L21:	PRINTI "An exhaustive search of even a single room would take hours. A more productive approach would be to examine or search various items of interest within the room. A cursory search would take on the order of "
	PRINTN TIM
	PRINTI " minutes, but it wouldn't reveal much. Would you like to do it anyway? (Y/N)"
	CALL YES? >STACK
	ZERO? STACK /?L24
	CALL INT-WAIT,TIM >STACK
	ZERO? STACK /?L26
	PRINTR "Your brief search revealed nothing that was not obvious before."
?L26:	PRINTR "You didn't get a chance to finish looking over the room."
?L24:	PRINTR "Ok."

	.FUNCT COATES-F,RARG=0
	EQUAL? RARG,M-OBJDESC \?L1
	CALL IN-MOTION?,COATES >STACK
	ZERO? STACK \?L5
	PRINTI "Mr. Coates is here."
	CRLF
?L5:	CALL CARRY-CHECK,COATES >STACK
	RSTACK
?L1:	EQUAL? WINNER,COATES \?L8
	EQUAL? PRSA,V?FIND /FALSE
	CALL COM-CHECK,COATES >STACK
	ZERO? STACK \TRUE
	CALL PICK-ONE,WHY-ME >STACK
	PRINT STACK
	CRLF
	RTRUE
?L8:	EQUAL? PRSA,V?PHONE \?L15
	PRINTD PRSO
	GRTR? PRESENT-TIME,710 \?L18
	PRINTR "'s office phone rings. His secretary answers and informs you that he will be out for the rest of the day."
?L18:	GRTR? PRESENT-TIME,650 \?L22
	PRINTR "'s secretary answers and informs you that Mr. Coates is on his way to the Robner estate."
?L22:	PRINTR "'s secretary informs you that Mr. Coates is in a very important meeting and can't be disturbed. She reminds you that he will be at the Robner estate before noon."
?L15:	EQUAL? PRSA,V?ASK-ABOUT \FALSE
	EQUAL? PRSO,COATES \FALSE
	EQUAL? PRSI,GLOBAL-OLD-WILL,GLOBAL-NEW-WILL /?L31
	EQUAL? PRSI,GLOBAL-FOCUS,GLOBAL-OMNIDYNE \?L29
?L31:	PRINTR """I am not at liberty to discuss Mr. Robner's legal matters. That is privileged information between attorney and client."""
?L29:	PRINTR """I am sorry, but I can't help you there."""

	.FUNCT LETTER-F
	EQUAL? PRSA,V?TAKE \FALSE
	FSET ENVELOPE,TOUCHBIT
	RFALSE

	.FUNCT OBJECT-PAIR-F
	EQUAL? PRSA,V?ARREST \FALSE
	LESS? PRESENT-TIME,600 \?L3
	PRINTR "It is rather early in the case to be making hasty judgments."
?L3:	GET P-PRSO,1 >STACK
	EQUAL? STACK,BAXTER,GLOBAL-BAXTER \?L9
	GET P-PRSO,2 >STACK
	EQUAL? STACK,DUNBAR,GLOBAL-DUNBAR /?L8
?L9:	GET P-PRSO,1 >STACK
	EQUAL? STACK,DUNBAR,GLOBAL-DUNBAR \?L7
	GET P-PRSO,2 >STACK
	EQUAL? STACK,BAXTER,GLOBAL-BAXTER \?L7
?L8:	ZERO? CORPSE-SEEN /?L10
	PRINTI "Ms. Dunbar is dead!"
	CRLF
	JUMP ?L32
?L10:	ZERO? DUNBAR-DEAD /?L14
	PRINTI "Sergeant Duffy rushes into view. ""Ms. Dunbar is dead! She has shot herself in her room! Come quickly!"" He dashes off."
	CRLF
	JUMP ?L32
?L14:	FSET? BAXTER-PAPERS,TOUCHBIT \?L17
	FSET? LAB-REPORT,TOUCHBIT \?L17
	ZERO? NOTE-READ /?L17
	ZERO? STUB-D /?L17
	CRLF
	CALL END-HEADER,STR?130
	PRINTI "Congratulations on your superb handling of the Robner case. As you have probably heard, a jury convicted Mr. Baxter and Ms. Dunbar today of the murder of Mr. Robner. Thanks to you, the murderers will be behind bars, possibly for the rest of their lives. Thanks for a job brilliantly done. Which reminds me of another fascinating case I would like to assign you to...

Coming soon: Another INTERLOGIC Mystery from Infocom
[RWD_ID: actions:3927, VAL: 3] "
	CRLF
	CALL EPILOGUE
	JUMP ?L32
?L17:	LESS? PRESENT-TIME,700 \?L20
	PRINTI "You realize the arrest would be a trifle premature, since you're not even sure that a murder was committed."
	CRLF
	JUMP ?L32
?L20:	FSET? LAB-REPORT,TOUCHBIT /?L23
	CRLF
	CALL END-HEADER,STR?131
	PRINTI "The District Attorney has decided not to seek an indictment in the Robner case. He points out that it has never been proven that a murder was committed, despite the deep suspicions to the contrary. Thanks for your help on this case. It's too bad we couldn't find out more about the circumstances surrounding the death of Mr. Robner.

"
	JUMP ?L32
?L23:	FSET? BAXTER-PAPERS,TOUCHBIT /?L26
	CRLF
	CALL END-HEADER,STR?132
	PRINTI "A grand jury looking into the death of Mr. Robner has decided not to indict the accused. They felt that the lack of motive as well as the contorted hypothesis involving the actual mechanism of the murder of Mr. Robner was not convincing. Personally, I think you're on the right track, but I must admit that the evidence is meager. Thank you for helping in the case.

"
	JUMP ?L32
?L26:	ZERO? NOTE-READ \?L29
	CRLF
	CALL END-HEADER,STR?133
	PRINTI "The jury in the Robner case has declined to convict Mr. Baxter and Ms. Dunbar. Appearances indicate that the verdict was difficult, and that several jury members were convinced that the two were guilty. However, no evidence was presented directly relating the Focus case with the murder of Mr. Robner. This left the question of motive unresolved. I appreciate your efforts in the case and am sorry to report this outcome to you.

"
	JUMP ?L32
?L29:	CRLF
	CALL END-HEADER,STR?134
	PRINTI "The jury in the Robner case has declined to convict Mr. Baxter and Ms. Dunbar. Although most of the jury was convinced of their guilt, it seems that one or two felt there was some reasonable doubt about the proposed conspiracy. Their main concern was the lack of evidence that Baxter was near the grounds on the night of the murder. His alibi of having been to the symphony was confirmed by several people. Although this doesn't mean that he didn't go back to the Robner estate later, it nevertheless was not convincing. Thank you for your excellent efforts. It is sad to think that we may have let the murderers slip between our fingers.

"
?L32:	CALL CASE-OVER >STACK
	RSTACK
?L7:	GET P-PRSO,1 >STACK
	EQUAL? STACK,BAXTER,GLOBAL-BAXTER \?L37
	GET P-PRSO,2 >STACK
	EQUAL? STACK,GEORGE,GLOBAL-GEORGE /?L36
?L37:	GET P-PRSO,1 >STACK
	EQUAL? STACK,GEORGE,GLOBAL-GEORGE \?L35
	GET P-PRSO,2 >STACK
	EQUAL? STACK,BAXTER,GLOBAL-BAXTER \?L35
?L36:	FSET? LAB-REPORT,TOUCHBIT /?L38
	PRINTR "You realize that there is no evidence that a murder has been committed and decide not to go ahead with the arrest."
?L38:	ZERO? NEW-WILL-SEEN \?L43
	ZERO? GEORGE-RUN /?L42
?L43:	FSET? BAXTER-PAPERS,TOUCHBIT \?L42
	ZERO? NOTE-READ /?L42
	CRLF
	CALL END-HEADER,STR?135
	PRINTI " The district attorney, after extensive interrogation of George Robner and Mr. Baxter, has declined to seek an indictment against them. He agrees that there has been foul play in the death of Mr. Robner and that both suspects have motives for the crime. However, no coherent theory could be proposed which involved the two of them conspiring to murder Mr. Robner. On the other hand, it seems unlikely that either of them alone could have committed the crime. I am sorry that your work has gone for naught.

"
	CALL CASE-OVER >STACK
	RSTACK
?L42:	CRLF
	CALL END-HEADER,STR?136
	PRINTI "The district attorney has declined to indict George Robner and Mr. Baxter in the death of Marshall Robner, noting that there is no link between the accused, except hatred, and that all of the evidence is circumstantial. I wish you luck on your future cases.

"
	CALL CASE-OVER >STACK
	RSTACK
?L35:	PRINTR "You realize that this arrest is quite farfetched and would result only in your humiliation."

	.FUNCT EPILOGUE
	CRLF
	PRINTI "You have solved the case! If you would like, you may see the author's summary of the story. We would advise you to come up with your own first! Would you like to see the author's summary? (Y/N)[EVENT: GAME OVER]"
	CALL PRINT-ID,STR?137
	CALL YES? >STACK
	ZERO? STACK /?L3
	CRLF
	PRINTI "Mr. Robner's work was his life, as pointed out by a number of the principals. George knew that his father had lost control of the company, and a story in the newspaper indicated that Baxter intended to sell the company to a multi-national conglomerate, presumably to advance his career. Baxter admitted to the merger plans, but indicated that Mr. Robner was in complete agreement. This is contrary to what George and Mrs. Robner said. The note pad found in the library was Robner's last, desperate attempt to save the company, in which Robner threatened to expose Baxter's involvement in the Focus scandal. Baxter denied getting the note, but it was not in the trash. The papers detailing Baxter's criminality in the scandal were kept locked in a safe in a hidden closet near the library. Only George and Marshall Robner knew the whereabouts of the safe.
  Baxter planned to murder his partner, aided by the fact that Robner was known to be depressed, even suicidal. He enlisted the help of his lover, Dunbar, one of whose medicines was found to interact fatally with the pills Robner was taking. The relationship of Baxter and Dunbar was kept quiet, although Mrs. Rourke had an inkling of it. After the concert in Hartford which both Baxter and Dunbar attended, they returned to the Robner estate. Dunbar placed some LoBlo in Robner's tea. After Robner died, Baxter used the ladder from the shed to enter the library and exchange the incriminating cup for a clean one (counting the china in the kitchen reveals that a cup is missing). Coming down the ladder, Baxter presumably dropped the cup and inadvertently left one piece on the ground in the rose garden, near the ladder holes that McNabb found while tending his roses.

"
?L3:	QUIT

	.FUNCT COM-CHECK,PERSON?1
	EQUAL? PRSA,V?WHAT \?L1
	SET 'WINNER,PLAYER
	CALL PERFORM,V?ASK-ABOUT,PERSON?1,PRSO
	RTRUE
?L1:	EQUAL? PRSA,V?EXAMINE \?L3
	SET 'WINNER,PLAYER
	CALL PERFORM,V?SHOW,PERSON?1,PRSO
	RTRUE
?L3:	EQUAL? PRSA,V?TELL-ME \?L4
	EQUAL? PRSO,PLAYER \?L4
	SET 'WINNER,PLAYER
	CALL PERFORM,V?ASK-ABOUT,PERSON?1,PRSI
	RTRUE
?L4:	EQUAL? PRSA,V?SHOW \?L5
	EQUAL? PRSO,PLAYER \?L5
	PRINTR """I'm sure you can find it, Inspector."""
?L5:	EQUAL? PRSA,V?FOLLOW \FALSE
	EQUAL? PRSO,PLAYER \FALSE
	PRINTR """I would rather not."""

	.FUNCT PORTRAITS-F
	EQUAL? PRSA,V?EXAMINE \?L1
	PRINTR "There are five portraits: two on each side of and one above the bay window. The fading portraits are of members of the Phillips family, among the oldest in New England."
?L1:	EQUAL? PRSA,V?TAKE \FALSE
	CALL NO-TOUCH
	CALL PRINT-ID,STR?138 >STACK
	RSTACK

	.FUNCT LR-CABINETS-F
	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "The cabinets are beautifully handworked walnut and mahogany."

	.FUNCT SEURAT-F
	EQUAL? PRSA,V?EXAMINE \?L1
	PRINTR "The painting by Seurat is a cheerful design which suits the bright decor of the dining room. It must be worth a fortune."
?L1:	EQUAL? PRSA,V?TAKE \FALSE
	CALL NO-TOUCH
	CALL PRINT-ID,STR?139 >STACK
	RSTACK

	.FUNCT PAINTINGS-F
	EQUAL? PRSA,V?EXAMINE \?L1
	PRINTR "The paintings are by various artists. They are brightly colored (but not overly loud) works of cheerful outdoor scenes and still-lifes. They give the room a light and pleasant feel."
?L1:	EQUAL? PRSA,V?TAKE \FALSE
	CALL NO-TOUCH
	CALL PRINT-ID,STR?140 >STACK
	RSTACK

	.FUNCT APPLIANCE-F
	EQUAL? PRSA,V?USE,V?TAKE \FALSE
	PRINTI "The appliances here are useful in preparing meals, cleaning dishes, and the like. It is unlikely that Mrs. Rourke would like you using them."
	CRLF
	CALL PRINT-ID,STR?141 >STACK
	RSTACK

	.FUNCT K-CABINETS-F
	RFALSE

	.FUNCT SILVERWARE-F
	EQUAL? PRSA,V?TAKE \?L1
	PRINTI "Although the set would make a fine addition to your home, you resist the temptation. You would never get away with it anyway, as Mrs. Robner will no doubt count the silverware upon your departure."
	CRLF
	CALL PRINT-ID,STR?142 >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?COUNT \?L5
	PRINTR "There are 16 complete sets of silver."
?L5:	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "The silver is of the finest quality and design."

	.FUNCT GLASSES-F
	EQUAL? PRSA,V?COUNT \?L1
	PRINTR "There are at least two dozen."
?L1:	EQUAL? PRSA,V?TAKE \FALSE
	CALL NO-TOUCH
	CALL PRINT-ID,STR?143 >STACK
	RSTACK

	.FUNCT NO-TOUCH
	PRINTR "You would be an impolite guest to fool with these things without cause."

	.FUNCT FOODS-F
	EQUAL? PRSA,V?EAT \FALSE
	PRINTI "Although manners are not taught at the Academy, surely your mother must have given you some sense of proper behavior."
	CRLF
	CALL PRINT-ID,STR?144 >STACK
	RSTACK

	.FUNCT FRUIT-TREES-F
	EQUAL? PRSA,V?TAKE,V?EAT,V?PICK \FALSE
	PRINTI "The fruits are not abundant, and those within reach are far from ripe."
	CRLF
	CALL PRINT-ID,STR?145 >STACK
	RSTACK

	.FUNCT BERRY-BUSH-F
	EQUAL? PRSA,V?TAKE,V?EAT,V?PICK \FALSE
	PRINTR "You pick a few berries and pop them into your mouth. Delicious!"

	.FUNCT BATHROOM-MIRROR-F
	EQUAL? PRSA,V?MUNG \?L1
	PRINTI "Don't you know it's bad luck to break mirrors?"
	CRLF
	CALL PRINT-ID,STR?146 >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?LOOK-INSIDE \FALSE
	PRINTR "A weary Police Inspector looks back at you, with a look that seems to be saying ""Look what the cat dragged in."""

	.FUNCT TREE-TOPS-F
	PRINTR "You can't reach the tree tops from here."

	.FUNCT LIQUOR-F
	EQUAL? PRSA,V?DRINK \FALSE
	ZERO? DRUNK-FLAG /?L3
	PRINTI "It's one thing to take a bracer on occasion, but you must resist the temptation to indulge too often."
	CRLF
	CALL PRINT-ID,STR?147 >STACK
	RSTACK
?L3:	PRINTI "You take a small swig of the golden fluid, which burns as it goes down."
	CRLF
	SET 'DRUNK-FLAG,1
	RETURN DRUNK-FLAG

	.FUNCT STEREO-F
	EQUAL? PRSA,V?LAMP-ON \?L1
	PRINTI "The stereo is now on."
	CRLF
	SET 'STEREO-ON,1
	RETURN STEREO-ON
?L1:	EQUAL? PRSA,V?LAMP-OFF \?L5
	ZERO? TUNE-ON /?L6
	IN? GEORGE,HERE \?L6
	PRINTI "George turns toward you in disgust as you turn off the "
	PRINT TUNE-ON
	PRINTI "."
	CRLF
	JUMP ?L10
?L6:	PRINTI "The stereo is now off."
	CRLF
?L10:	SET 'STEREO-ON,0
	SET 'TUNE-ON,0
	CALL QUEUE,I-TUNE-OFF,0
	RTRUE
?L5:	EQUAL? PRSA,V?TURN-UP \?L13
	ZERO? TUNE-ON /?L14
	PRINTI "The "
	PRINT TUNE-ON
	PRINTI " is already quite loud. Any louder would probably disturb the rest of the house."
	CRLF
	CALL PRINT-ID,STR?148 >STACK
	RSTACK
?L14:	PRINTR "It's not on!"
?L13:	EQUAL? PRSA,V?TURN-DOWN \?L21
	ZERO? TUNE-ON /?L22
	IN? GEORGE,HERE \?L24
	PRINTI "George stops you from turning down the volume. He is practically addicted to the "
	PRINT TUNE-ON
	PRINTR "."
?L24:	PRINTR "You can't."
?L22:	PRINTR "It's not on!"
?L21:	EQUAL? PRSA,V?LISTEN \FALSE
	ZERO? TUNE-ON /?L35
	PRINTR "You can hardly avoid it."
?L35:	PRINTR "Nothing's playing."

	.FUNCT RECORDS-F
	EQUAL? PRSA,V?LISTEN,V?PLAY \?L1
	PRINTI "You pick a record at random and start it playing. It is a "
	CALL PICK-ONE,RECORD-TABLE >TUNE-ON
	PRINT TUNE-ON
	PRINTI "."
	CRLF
	CALL QUEUE,I-TUNE-OFF,20 >STACK
	PUT STACK,0,1
	RTRUE
?L1:	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "This is a large collection, with many different types of music represented. George is evidently not very particular when it comes to music."

	.FUNCT TAPES-F
	EQUAL? PRSA,V?LISTEN,V?PLAY \?L1
	PRINTI "You pick one at random and start it up. What you hear is a "
	CALL PICK-ONE,TAPE-TABLE >TUNE-ON
	CALL QUEUE,I-TUNE-OFF,30 >STACK
	PUT STACK,0,1
	PRINT TUNE-ON
	PRINTR "."
?L1:	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "George's collection of tapes is large and quite odd in its variety of music."

	.FUNCT I-TUNE-OFF,TBL
	EQUAL? HERE,GEORGE-ROOM \?L1
	PRINTI "The "
	PRINT TUNE-ON
	PRINTI " has ended (and not soon enough)."
	CRLF
	IN? GEORGE,HERE \TRUE
	PRINTI "George walks over to his stereo and returns the music to its proper place. He then chooses a "
	RANDOM 100 >STACK
	GRTR? 50,STACK \?L9
	PRINTI "record"
	SET 'TBL,RECORD-TABLE
	JUMP ?L13
?L9:	PRINTI "tape"
	SET 'TBL,TAPE-TABLE
?L13:	PRINTI " from his large collection and starts it up. Dear Lord! It's a "
	CALL PICK-ONE,TBL >TUNE-ON
	PRINT TUNE-ON
	PRINTI "."
	CRLF
	CALL QUEUE,I-TUNE-OFF,25 >STACK
	PUT STACK,0,1
	RTRUE
?L1:	IN? GEORGE,GEORGE-ROOM \FALSE
	CALL PICK-ONE,TAPE-TABLE >TUNE-ON
	CALL QUEUE,I-TUNE-OFF,35 >STACK
	PUT STACK,0,1
	RFALSE

	.FUNCT CLOSET-STUFF-F
	EQUAL? PRSA,V?USE,V?MOVE,V?TAKE \?L1
	PRINTI "You have no need for them."
	CRLF
	CALL PRINT-ID,STR?149 >STACK
	RSTACK
?L1:	EQUAL? PRSA,V?EXAMINE,V?SEARCH \FALSE
	PRINTI "You go through the"
	CALL PRSO-PRINT
	PRINTR " and find nothing of interest."

	.FUNCT LIBRARY-CARPET-F
	EQUAL? PRSA,V?LOOK-UNDER \?L1
	PRINTR "The carpeting is wall-to-wall so you can't look under it."
?L1:	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTI "The carpet is an expensive affair, and quite clean, except for a few small areas of dried mud in the vicinity of the desk. There are no other stains or markings that you can see."
	CRLF
	FCLEAR MUD-SPOT,INVISIBLE
	RTRUE

	.FUNCT GLOBAL-MURDER-F,STR
	EQUAL? PRSA,V?ASK-ABOUT \FALSE
	EQUAL? PRSI,GLOBAL-MURDER \?L3
	GETP PRSO,P?CHARACTER >STACK
	GET MURDER-TABLE,STACK >STR
	ZERO? STR /FALSE
	PRINT STR
	CRLF
	RTRUE
?L3:	PRINTR """I told everything I know about it to the other detectives."""

	.FUNCT GUEST-WINDOW-F
	EQUAL? PRSA,V?LOOK-INSIDE \?L1
	PRINTI "From here you have a good view of the east lawn, a shed, and the lake in the background."
	CRLF
	PUTP GUEST-ROOM,P?CORRIDOR,512
	CALL CORRIDOR-LOOK
	CALL QUEUE,I-WINDOW-LOOK,2 >STACK
	PUT STACK,0,1
	RTRUE
?L1:	EQUAL? PRSA,V?OPEN \FALSE
	PRINTR "This window cannot be opened."

	.FUNCT I-WINDOW-LOOK
	PUTP GUEST-ROOM,P?CORRIDOR,0
	RFALSE

	.FUNCT I-WILL-MISSED
	IN? MRS-ROBNER,HERE \?L1
	PRINTI "Mrs. Robner turns to you. ""I don't understand why you missed the will reading. You seem so interested in everything else that goes on around here."""
	CRLF
	CALL QUEUE,I-WILL-MISSED,0 >STACK
	RSTACK
?L1:	IN? COATES,HERE \FALSE
	PRINTI "Mr. Coates says, in passing, ""To tell you the truth, Inspector, my suspicions about this case are not quite allayed. I wish you had been at the will reading. Good day."""
	CRLF
	CALL QUEUE,I-WILL-MISSED,0 >STACK
	RSTACK

	.FUNCT S-SHELVES-F
	EQUAL? PRSA,V?EXAMINE \FALSE
	PRINTR "The shelves contain various garden tools."

	.FUNCT END-HEADER,STR
	PRINTI "Text of a letter from Police Commissioner Klutz dated "
	PRINT STR
	PRINTI ":

Dear Inspector,

    "
	RTRUE

	.FUNCT GLOBAL-HERE-F,FLG=0,F
	EQUAL? PRSA,V?ASK-ABOUT,V?WHAT \FALSE
	FIRST? HERE >F \?L5
?L6:	FSET? F,PERSON \?L8
	EQUAL? F,PLAYER /?L8
	SET 'FLG,1
	CALL DESCRIBE-OBJECT,F,1,0
?L8:	NEXT? F >F /?L6
?L5:	ZERO? FLG \TRUE
	PRINTR "There's nobody else here."

	.FUNCT BALCONY-DOOR-F
	EQUAL? PRSA,V?HIDE-BEHIND \?L1
	FSET? PRSO,OPENBIT /?L3
	PRINTI "You open the balcony door carefully."
	CRLF
	FSET PRSO,OPENBIT
?L3:	EQUAL? HERE,LIBRARY \?L8
	CALL GOTO,LIBRARY-BALCONY
	RTRUE
?L8:	EQUAL? HERE,LIBRARY-BALCONY \?L10
	CALL GOTO,LIBRARY
	RTRUE
?L10:	EQUAL? HERE,MASTER-BEDROOM \?L11
	CALL GOTO,BEDROOM-BALCONY
	RTRUE
?L11:	CALL GOTO,MASTER-BEDROOM
	RTRUE
?L1:	EQUAL? PRSA,V?LOOK-INSIDE \FALSE
	EQUAL? HERE,MASTER-BEDROOM,LIBRARY \?L14
	PRINTR "You can see the balcony, but not much beyond."
?L14:	EQUAL? HERE,LIBRARY-BALCONY \?L18
	PRINTR "You can see into the library from here."
?L18:	PRINTR "You can see the bedroom from here."

	.FUNCT GLOBAL-RED-HERRINGS-F
	IN? GEORGE,DINING-ROOM \?L1
	EQUAL? PRSA,V?MOVE,V?TAKE,V?EAT \?L3
	PRINTI "You reach for the juicy herrings, but George forces you away. He is a killer where herrings are concerned."
	CRLF
	CALL PRINT-ID,STR?150 >STACK
	RSTACK
?L3:	EQUAL? PRSA,V?FIND \FALSE
	PRINTR "There are more in this room than elsewhere."
?L1:	EQUAL? PRSA,V?FIND \?L11
	PRINTR "They're all around you."
?L11:	EQUAL? PRSA,V?WHAT \FALSE
	PRINTR "That would be telling."

	.FUNCT LIBRARY-DESK-F
	EQUAL? PRSA,V?LOOK-INSIDE \FALSE
	PRINTR "There's nothing of interest in the desk."

	.FUNCT RECURSIVE-BOOK-F
	EQUAL? PRSA,V?ASK-FOR \?L1
	EQUAL? PRSO,BAXTER \?L1
	FCLEAR PRSI,NDESCBIT
	RFALSE
?L1:	EQUAL? PRSA,V?TAKE \?L3
	IN? RECURSIVE-BOOK,BAXTER \?L3
	FCLEAR PRSO,NDESCBIT
	RFALSE
?L3:	EQUAL? PRSA,V?EXAMINE \?L4
	PRINTR "This is a novelization of DEADLINE, a classic work of computer fiction."
?L4:	EQUAL? PRSA,V?OPEN,V?READ \FALSE
	PRINTR "The book is a novelization of DEADLINE. You start to read it, and it seems oddly familiar, as if you had lived it."

	.FUNCT GLOBAL-ENDING-F
	IN? RECURSIVE-BOOK,PLAYER \?L1
	EQUAL? PRSA,V?TURN,V?WHAT,V?READ \FALSE
	PRINTI "You thumb to the last page and start to read the ending, in which the protagonist reads the plot of the story and kills himself in disgust. Disgustedly, you reach into your pocket, remove a gun, and end your life."
	CRLF
	CALL PRINT-ID,STR?151
	QUIT
?L1:	EQUAL? PRSA,V?WHAT \?L8
	PRINTR "That's up to you!"
?L8:	PRINTR "You don't have the book that tells the ending."

	.FUNCT CASE-OVER
	CRLF
	CRLF
	PRINTI "[EVENT: GAME OVER]The case has ended. Would you like to start your investigation over from scratch? (Y/N)"
	CALL YES? >STACK
	ZERO? STACK /?L3
	RESTART
?L3:	QUIT

	.FUNCT SAFE-F
	EQUAL? PRSA,V?OPEN \?L1
	FSET? SAFE,OPENBIT /?L1
	PRINTR "The safe is locked."
?L1:	EQUAL? PRSA,V?LOCK,V?CLOSE \?L5
	FSET? SAFE,OPENBIT \?L5
	PRINTI "The safe closes and locks."
	CRLF
	FCLEAR SAFE,OPENBIT
	RTRUE
?L5:	EQUAL? PRSA,V?LOCK \?L8
	PRINTR "It already is."
?L8:	EQUAL? PRSA,V?UNLOCK \?L11
	PRINTR "You don't know the combination."
?L11:	EQUAL? PRSA,V?EXAMINE,V?LOOK-INSIDE \FALSE
	FCLEAR BAXTER-PAPERS,INVISIBLE
	RFALSE

	.FUNCT SUICIDE-NOTE-F
	EQUAL? PRSA,V?ANALYZE \FALSE
	PRINTR "The handwriting is very shaky and would be impossible to compare with samples on file. The blood makes the finding of fingerprints impossible."

	.FUNCT GLOBAL-MR-ROBNER-F
	EQUAL? PRSA,V?FOLLOW \?L1
	PRINTR "Is this what they call a death wish?"
?L1:	EQUAL? PRSA,V?CALL \FALSE
	PRINTR "You are, for the moment, not with him."

	.FUNCT RANDOM-MEAL-F
	EQUAL? PRSA,V?FIND,V?EAT \?L1
	PRINTR "Although rather hungry, you realize that the case is too important for you to be eating meals."
?L1:	PRINTR "What a strange notion!"

	.FUNCT GLOBAL-HOUSE-F
	EQUAL? PRSA,V?WALK-AROUND \FALSE
	PRINTR "Use directions to move around inside the house."

	.FUNCT GRAPE-ARBOR-F
	EQUAL? PRSA,V?EAT \FALSE
	PRINTI "You pick a few grapes and eat them. Mmmm!"
	CRLF
	CALL PRINT-ID,STR?152 >STACK
	RSTACK

	.FUNCT GLOBAL-CALL-F
	EQUAL? PRSA,V?LISTEN \FALSE
	ZERO? SECRET-MEETING /?L1
	EQUAL? HERE,BEHIND-SHED,EAST-LAWN \?L1
	PRINTR "The voices from within the shed are too quiet to make out."
?L1:	EQUAL? PRSA,V?LISTEN \FALSE
	ZERO? CALL-IN-PROGRESS /?L5
	EQUAL? HERE,CORRIDOR-1 \?L5
	PRINTR "You can't make out the conversation through the door."
?L5:	EQUAL? PRSA,V?LISTEN \FALSE
	PRINTR "You can't hear any conversation."

	.FUNCT GLOBAL-FINGERPRINTS-F
	EQUAL? PRSA,V?TAKE \FALSE
	EQUAL? PRSO,GLOBAL-FINGERPRINTS \FALSE
	ZERO? PRSI \?L3
	PRINTR "You must specify what to take the fingerprints from."
?L3:	CALL PERFORM,V?FINGERPRINT,PRSI
	RTRUE

	.FUNCT GLOBAL-LADDER-F
	EQUAL? HERE,LIBRARY-BALCONY \?L4
	ZERO? LADDER-FLAG \?L3
?L4:	EQUAL? HERE,BEDROOM-BALCONY \FALSE
	ZERO? LADDER-FLAG-2 /FALSE
?L3:	EQUAL? PRSA,V?TAKE \?L5
	PRINTR "It's too difficult from here."
?L5:	EQUAL? PRSA,V?RUB /FALSE
	EQUAL? PRSA,V?EXAMINE \?L10
	PRINTR "The top of the ladder is visible, but the rest is hard to see."
?L10:	PRINTR "You can't do that from here."

	.FUNCT UNPRIORITIZE,PERSON?1,GT
	GETP PERSON?1,P?CHARACTER >STACK
	GET GOAL-TABLES,STACK >GT
	PUT GT,GOAL-PRIORITY,0
	GET GT,GOAL-QUEUED >STACK
	ZERO? STACK /FALSE
	GET GT,GOAL-QUEUED >STACK
	CALL ESTABLISH-GOAL,PERSON?1,STACK
	PUT GT,GOAL-QUEUED,0
	RTRUE

	.FUNCT ESTABLISH-GOAL,PERSON?1,GOAL,PRIORITY=0,HERE?1,HL,GL,GT
	LOC PERSON?1 >HERE?1
	GETP PERSON?1,P?CHARACTER >STACK
	GET GOAL-TABLES,STACK >GT
	ZERO? PRIORITY /?L1
	PUT GT,GOAL-ENABLE,1
	PUT GT,GOAL-PRIORITY,1
	PUT GT,GOAL-QUEUED,HERE?1
?L1:	GETP HERE?1,P?LINE >HL
	GETP GOAL,P?LINE >GL
	EQUAL? HL,GL \?L4
	PUT GT,GOAL-I,0
	JUMP ?L11
?L4:	EQUAL? HL,TOP-OF-THE-LINE-C \?L6
	PUT GT,GOAL-I,STAIR-TOP
	JUMP ?L11
?L6:	EQUAL? HL,OUTSIDE-LINE-C \?L7
	PUT GT,GOAL-I,FRONT-PATH
	JUMP ?L11
?L7:	EQUAL? HL,FOOD-LINE-C \?L8
	PUT GT,GOAL-I,CORNER
	JUMP ?L11
?L8:	EQUAL? GL,TOP-OF-THE-LINE-C \?L9
	PUT GT,GOAL-I,STAIR-BOTTOM
	JUMP ?L11
?L9:	EQUAL? GL,FOOD-LINE-C \?L10
	PUT GT,GOAL-I,NFOYER
	JUMP ?L11
?L10:	PUT GT,GOAL-I,FOYER
?L11:	GETP GOAL,P?STATION >STACK
	PUT GT,GOAL-S,STACK
	PUT GT,GOAL-F,GOAL
	LOC PERSON?1 >STACK
	RSTACK

	.FUNCT FOLLOW-GOAL,PERSON?1,HERE?1,LINE,LN,RM,GT,GOAL,FLG,GOAL-FLAG=0,IGOAL=0,LOC,CNT=1,DIR
	LOC PERSON?1 >HERE?1
	GETP PERSON?1,P?CHARACTER >STACK
	GET GOAL-TABLES,STACK >GT
	GET GT,GOAL-F >STACK
	EQUAL? HERE?1,STACK \?L1
	CALL GOAL-REACHED,PERSON?1 >FLG
	PUT GT,GOAL-S,0
	RETURN FLG
?L1:	GET GT,GOAL-ENABLE >STACK
	ZERO? STACK /FALSE
	GETP HERE?1,P?STATION >LOC
	EQUAL? LOC,HERE?1 /?L5
	CALL MOVE-PERSON,PERSON?1,LOC >STACK
	RSTACK
?L5:	GET GT,GOAL-I >GOAL
	ZERO? GOAL /?L8
	SET 'IGOAL,1
	JUMP ?L10
?L8:	GET GT,GOAL-S >GOAL
?L10:	ZERO? GOAL /FALSE
	EQUAL? HERE?1,STAIRS \?L13
	GET GT,GOAL-F >STACK
	CALL TRANSFER,PERSON?1,HERE?1,STACK >STACK
	RSTACK
?L13:	EQUAL? HERE?1,GOAL \?L21
	ZERO? IGOAL /?L15
	GET GT,GOAL-F >STACK
	CALL TRANSFER,PERSON?1,GOAL,STACK >STACK
	RSTACK
?L15:	GET GT,GOAL-F >STACK
	EQUAL? HERE?1,STACK /?L17
	GET GT,GOAL-F >STACK
	CALL MOVE-PERSON,PERSON?1,STACK >FLG
	PUT GT,GOAL-S,0
	ZERO? FLG /?L18
	CALL GOAL-REACHED,PERSON?1
	RETURN FLG
?L18:	CALL GOAL-REACHED,PERSON?1 >FLG
	RETURN FLG
?L17:	PUT GT,GOAL-S,0
	CALL GOAL-REACHED,PERSON?1 >STACK
	RSTACK
?L21:	GETP GOAL,P?LINE >LN
	EQUAL? LN,TOP-OF-THE-LINE-C \?L23
	SET 'LINE,TOP-OF-THE-LINE
	JUMP ?L27
?L23:	EQUAL? LN,BOTTOM-LINE-C \?L25
	SET 'LINE,BOTTOM-LINE
	JUMP ?L27
?L25:	EQUAL? LN,FOOD-LINE-C \?L26
	SET 'LINE,FOOD-LINE
	JUMP ?L27
?L26:	SET 'LINE,OUTSIDE-LINE
?L27:	GET LINE,CNT >RM
	EQUAL? RM,HERE?1 \?L30
	ZERO? GOAL-FLAG /?L32
	SUB CNT,3 >STACK
	GET LINE,STACK >LOC
	JUMP ?L34
?L32:	ADD CNT,3 >STACK
	GET LINE,STACK >LOC
?L34:	CALL MOVE-PERSON,PERSON?1,LOC >STACK
	RSTACK
?L30:	EQUAL? RM,GOAL \?L35
	SET 'GOAL-FLAG,1
?L35:	ADD CNT,3 >CNT
	JUMP ?L27

	.FUNCT GOAL-REACHED,PERSON?1
	GETP PERSON?1,P?CHARACTER >STACK
	GET GOAL-TABLES,STACK >STACK
	GET STACK,GOAL-FUNCTION >STACK
	CALL STACK,G-REACHED >STACK
	RSTACK

	.FUNCT MOVE-PERSON,PERSON?1,WHERE,DIR,GT,OL,COR,PCOR,CHR,NC,WT,CNT=0,FLG=0,EX
	GETP PERSON?1,P?CHARACTER >CHR
	GET GOAL-TABLES,CHR >GT
	SET 'NC,CHR
	LOC PERSON?1 >OL
	CALL DIR-FROM,OL,WHERE >DIR
	GETPT OL,DIR >EX
	PTSIZE EX >STACK
	EQUAL? STACK,DEXIT \?L1
	GETB EX,DEXITOBJ >EX
	FSET? EX,OPENBIT /?L3
	FSET EX,OPENBIT
	JUMP ?L6
?L3:	SET 'EX,0
	JUMP ?L6
?L1:	SET 'EX,0
?L6:	PUT GT,GOAL-LDIR,DIR
	EQUAL? OL,HERE \?L7
	SET 'FLG,1
	PRINTD PERSON?1
	EQUAL? DIR,P?OUT \?L11
	PRINTI " walks out of the room."
	CRLF
	JUMP ?L107
?L11:	EQUAL? DIR,P?DOWN \?L15
	PRINTI " is going downstairs."
	CRLF
	JUMP ?L107
?L15:	EQUAL? DIR,P?UP \?L18
	PRINTI " is going upstairs."
	CRLF
	JUMP ?L107
?L18:	EQUAL? DIR,P?IN \?L21
	ZERO? EX /?L22
	PRINTI " opens the "
	PRINTD EX
	PRINTI " and"
?L22:	PRINTI " goes into another room."
	JUMP ?L107
?L21:	ZERO? EX /?L30
	PRINTI " opens the "
	PRINTD EX
	PRINTI " and"
?L30:	PRINTI " heads off to "
	CALL DIR-PRINT,DIR
	PRINTI "."
	CRLF
	JUMP ?L107
?L7:	EQUAL? WHERE,HERE \?L39
	SET 'FLG,1
	PRINTD PERSON?1
	GET GT,GOAL-F >STACK
	EQUAL? HERE,STACK /?L42
	PRINTI " is walking past you."
	CRLF
	JUMP ?L107
?L42:	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L46
	PRINTI " stops here."
	CRLF
	JUMP ?L107
?L46:	PRINTI " steps into the room."
	CRLF
	JUMP ?L107
?L39:	GETP HERE,P?CORRIDOR >COR
	ZERO? COR /?L107
	GETP OL,P?CORRIDOR >PCOR
	ZERO? PCOR /?L53
	BAND COR,PCOR >STACK
	ZERO? STACK /?L53
	SET 'FLG,1
	EQUAL? WHERE,STAIRS \?L55
	PRINTD PERSON?1
	PRINTI " steps onto the stairs."
	CRLF
	JUMP ?L107
?L55:	GETP WHERE,P?CORRIDOR >STACK
	ZERO? STACK \?L59
	PRINTD PERSON?1
	PRINTI ", off to "
	CALL COR-DIR,HERE,OL >STACK
	CALL DIR-PRINT,STACK
	PRINTI ","
	ZERO? EX /?L64
	PRINTI " opens a door and"
?L64:	GETP HERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C \?L69
	PRINTI " leaves your view"
	JUMP ?L76
?L69:	EQUAL? WHERE,SHED-ROOM \?L73
	PRINTI " darts into the shed"
	JUMP ?L76
?L73:	PRINTI " ducks into a room"
?L76:	PRINTI " to "
	CALL DIR-FROM,OL,WHERE >STACK
	CALL DIR-PRINT,STACK
	PRINTI "."
	CRLF
	JUMP ?L107
?L59:	GETP WHERE,P?CORRIDOR >STACK
	BAND COR,STACK >STACK
	ZERO? STACK \?L83
	PRINTD PERSON?1
	PRINTI ", off to "
	CALL COR-DIR,HERE,OL >STACK
	CALL DIR-PRINT,STACK
	PRINTI ", disappears from sight "
	CALL DIR-FROM,OL,WHERE >PCOR
	EQUAL? PCOR,P?UP \?L88
	PRINTI "up the stairs"
	JUMP ?L95
?L88:	EQUAL? PCOR,P?DOWN \?L92
	PRINTI "down the stairs"
	JUMP ?L95
?L92:	PRINTI "to "
	CALL DIR-PRINT,PCOR
?L95:	PRINTI "."
	CRLF
	JUMP ?L107
?L83:	PRINTD PERSON?1
	PRINTI " is to "
	CALL COR-DIR,HERE,WHERE >STACK
	CALL DIR-PRINT,STACK
	PRINTI ", heading toward "
	CALL DIR-FROM,OL,WHERE >STACK
	CALL DIR-PRINT,STACK
	PRINTI "."
	CRLF
	JUMP ?L107
?L53:	GETP WHERE,P?CORRIDOR >PCOR
	ZERO? PCOR /?L107
	BAND COR,PCOR >STACK
	ZERO? STACK /?L107
	SET 'FLG,1
	PRINTI "To "
	CALL COR-DIR,HERE,WHERE >STACK
	CALL DIR-PRINT,STACK
	PRINTI " "
	PRINTD PERSON?1
	GETP WHERE,P?LINE >STACK
	EQUAL? STACK,OUTSIDE-LINE-C /?L114
	EQUAL? WHERE,STAIRS \?L112
?L114:	PRINTI " comes into view from "
	JUMP ?L117
?L112:	PRINTI " enters the hallway from "
?L117:	CALL DIR-FROM,WHERE,OL >STACK
	CALL DIR-PRINT,STACK
	PRINTI "."
	CRLF
?L107:	GET WHERE-TABLES,CHR >WT
?L124:	GRTR? CNT,CHARACTER-MAX /?L125
	GET CHARACTER-TABLE,CNT >CHR
	EQUAL? CHR,PERSON?1 /?L131
	ZERO? CNT \?L133
	ZERO? FLG \?L132
?L133:	GET CHARACTER-TABLE,CNT >STACK
	IN? STACK,OL \?L131
?L132:	PUT WT,CNT,PRESENT-TIME
	GET WHERE-TABLES,CNT >STACK
	PUT STACK,NC,PRESENT-TIME
?L131:	INC 'CNT
	JUMP ?L124
?L125:	MOVE PERSON?1,WHERE
	RETURN FLG

	.FUNCT DIR-FROM,HERE?1,THERE,P,L,TX,O
	SET 'P,0
?L1:	NEXTP HERE?1,P >P
	ZERO? P /FALSE
	EQUAL? P,P?IN,P?OUT /?L1
	LESS? P,P?OUT /?L1
	GETPT HERE?1,P >TX
	PTSIZE TX >L
	EQUAL? L,DEXIT,UEXIT,CEXIT \?L1
	GETB TX,REXIT >STACK
	EQUAL? STACK,THERE \?L1
	RETURN P

	.FUNCT COR-DIR,HERE?1,THERE,COR,RM,PAST=0,CNT=2
	GETP HERE?1,P?CORRIDOR >STACK
	GETP THERE,P?CORRIDOR >STACK
	BAND STACK,STACK >STACK
	CALL GET-COR,STACK >COR
?L1:	GET COR,CNT >RM
	EQUAL? RM,HERE?1 \?L3
	SET 'PAST,1
	JUMP ?L2
?L3:	EQUAL? RM,THERE /?L2
	INC 'CNT
	JUMP ?L1
?L2:	GET COR,PAST >STACK
	RSTACK

	.FUNCT GET-COR,NUM
	EQUAL? NUM,1 \?L1
	RETURN COR-1
?L1:	EQUAL? NUM,2 \?L3
	RETURN COR-2
?L3:	EQUAL? NUM,4 \?L4
	RETURN COR-4
?L4:	EQUAL? NUM,8 \?L5
	RETURN COR-8
?L5:	EQUAL? NUM,16 \?L6
	RETURN COR-16
?L6:	EQUAL? NUM,32 \?L7
	RETURN COR-32
?L7:	EQUAL? NUM,64 \?L8
	RETURN COR-64
?L8:	EQUAL? NUM,128 \?L9
	RETURN COR-128
?L9:	EQUAL? NUM,256 \?L10
	RETURN COR-256
?L10:	EQUAL? NUM,512 \?L11
	RETURN COR-512
?L11:	EQUAL? NUM,1024 \?L12
	RETURN COR-1024
?L12:	RETURN COR-2048

	.FUNCT TRANSFER,PERSON?1,IGOAL,FGOAL,V,FLG=0,?TMP
	EQUAL? IGOAL,STAIR-TOP \?L1
	EQUAL? HERE,STAIR-BOTTOM,NFOYER,ROURKE-ROOM /?L5
	EQUAL? HERE,LIVING-ROOM,FOYER,CORNER \?L3
?L5:	PRINTI "You can hear footsteps on the staircase."
	CRLF
	SET 'FLG,1
?L3:	CALL MOVE-PERSON,PERSON?1,STAIRS >?TMP
	ZERO? ?TMP /?L10
	RETURN ?TMP
?L10:	RETURN FLG
?L1:	EQUAL? IGOAL,STAIR-BOTTOM \?L11
	EQUAL? HERE,STAIR-TOP,CORRIDOR-1 /?L14
	EQUAL? HERE,CORRIDOR-2,CORRIDOR-3 \?L12
?L14:	PRINTI "You can hear footsteps on the staircase."
	CRLF
	SET 'FLG,1
?L12:	CALL MOVE-PERSON,PERSON?1,STAIRS >?TMP
	ZERO? ?TMP /?L19
	RETURN ?TMP
?L19:	RETURN FLG
?L11:	EQUAL? IGOAL,STAIRS \?L21
	GETP FGOAL,P?LINE >STACK
	ZERO? STACK \?L23
	CALL MOVE-PERSON,PERSON?1,STAIR-TOP >V
	JUMP ?L29
?L23:	CALL MOVE-PERSON,PERSON?1,STAIR-BOTTOM >V
	JUMP ?L29
?L21:	EQUAL? IGOAL,FRONT-PATH \?L26
	FSET FRONT-DOOR,OPENBIT
	CALL MOVE-PERSON,PERSON?1,FOYER >V
	JUMP ?L29
?L26:	EQUAL? IGOAL,FOYER \?L27
	FSET FRONT-DOOR,OPENBIT
	CALL MOVE-PERSON,PERSON?1,FRONT-PATH >V
	JUMP ?L29
?L27:	EQUAL? IGOAL,NFOYER \?L28
	CALL MOVE-PERSON,PERSON?1,CORNER >V
	JUMP ?L29
?L28:	CALL MOVE-PERSON,PERSON?1,NFOYER >V
?L29:	CALL ESTABLISH-GOAL,PERSON?1,FGOAL
	RETURN V

	.FUNCT DIR-PRINT,DIR,CNT=0
?L1:	GET DIR-STRINGS,CNT >STACK
	EQUAL? STACK,DIR \?L3
	EQUAL? DIR,P?UP,P?DOWN /?L5
	PRINTI "the "
?L5:	ADD CNT,1 >STACK
	GET DIR-STRINGS,STACK >STACK
	PRINT STACK
	RTRUE
?L3:	INC 'CNT
	JUMP ?L1

	.FUNCT START-MOVEMENT
	CALL QUEUE,I-GARDENER,1 >STACK
	PUT STACK,0,1
	CALL QUEUE,I-BAXTER,1 >STACK
	PUT STACK,0,1
	CALL QUEUE,I-DUNBAR,1 >STACK
	PUT STACK,0,1
	CALL QUEUE,I-GEORGE,1 >STACK
	PUT STACK,0,1
	CALL QUEUE,I-MRS-ROBNER,1 >STACK
	PUT STACK,0,1
	CALL QUEUE,I-ROURKE,1 >STACK
	PUT STACK,0,1
	CALL QUEUE,I-FOLLOW,-1 >STACK
	PUT STACK,0,1
	CALL QUEUE,I-ATTENTION,-1 >STACK
	PUT STACK,0,1
	RTRUE

	.FUNCT I-G-I-G
	SET 'G-I-G,PRESENT-TIME
	EQUAL? HERE,ROSE-GARDEN \FALSE
	ZERO? HOLE-SHOWN \FALSE
	SET 'HOLE-TELL,1
	PRINTR "All of a sudden, Mr. McNabb starts talking to himself quite loudly about his poor roses being ruined. He walks up to you and says ""You canna believe the holes someone's made. Crushed my roses. It'll take me plenty a time to set it right. I just canna believe it!""  He shakes his head dejectedly."

	.FUNCT I-GARDENER,GARG=0,GL
	LOC GARDENER >GL
	ZERO? GARG \?L1
	CALL IMOVEMENT,GARDENER,I-GARDENER >STACK
	RSTACK
?L1:	EQUAL? GARG,G-REACHED \FALSE
	EQUAL? GL,ROSE-GARDEN \?L4
	RANDOM 10 >STACK
	ADD 2,STACK >STACK
	CALL QUEUE,I-G-I-G,STACK >STACK
	PUT STACK,0,1
	RFALSE
?L4:	EQUAL? GL,ORCHARD \?L6
	IN? LADDER,ORCHARD /FALSE
	FCLEAR LADDER,NDESCBIT
	SET 'LADDER-FLAG,0
	SET 'LADDER-FLAG-2,0
	FSET LADDER,TOUCHBIT
	IN? LADDER,WINNER \?L9
	MOVE LADDER,ORCHARD
	PRINTR "McNabb comes over to you and takes the ladder. He walks off toward the orchard."
?L9:	IN? LADDER,HERE \?L13
	MOVE LADDER,ORCHARD
	PRINTR "McNabb picks up the ladder and walks away toward the orchard."
?L13:	EQUAL? HERE,ORCHARD \?L16
	MOVE LADDER,ORCHARD
	PRINTR "McNabb places the ladder he was carrying on the ground."
?L16:	MOVE LADDER,ORCHARD
	RFALSE
?L6:	EQUAL? GL,IN-ROSES \FALSE
	CALL UNPRIORITIZE,GARDENER
	EQUAL? HERE,GL \?L22
	CALL GRAB-ATTENTION,GARDENER
	CALL SHOW-HOLE
	RTRUE
?L22:	CALL QUEUE,I-SHOW-HOLE,-1 >STACK
	PUT STACK,0,1
	RFALSE

	.FUNCT I-BAXTER,GARG=0,BL
	LOC BAXTER >BL
	ZERO? GARG \?L1
	CALL IMOVEMENT,BAXTER,I-BAXTER >STACK
	RSTACK
?L1:	EQUAL? GARG,G-REACHED \FALSE
	EQUAL? BL,LIVING-ROOM \?L3
	IN? RECURSIVE-BOOK,LIVING-ROOM \FALSE
	MOVE RECURSIVE-BOOK,BAXTER
	FSET RECURSIVE-BOOK,NDESCBIT
	RFALSE
?L3:	EQUAL? GARG,G-REACHED \FALSE
	EQUAL? BL,DUNBAR-ROOM \?L7
	EQUAL? HERE,DUNBAR-ROOM \?L7
	PRINTI "Baxter looks at the body of Ms. Dunbar, lying on the floor, and falls to his knees. He starts to sob. ""I knew she would do this,"" he says, sobbing, ""but I couldn't stop her. She killed Marshall. She just told me a few minutes ago. She said that he was going to fire her, just like that, after all of these years. She was so hysterical, I couldn't understand everything she said, something about having stolen some money. I don't know.""  With that, he breaks down again."
	CRLF
	CALL QUEUE,I-BAXTER-END-1,10 >STACK
	PUT STACK,0,1
	RTRUE
?L7:	EQUAL? GARG,G-REACHED \FALSE
	EQUAL? BL,SHED-ROOM \?L10
	EQUAL? HERE,BEHIND-SHED \FALSE
	PRINTR "The sound of quick footsteps precedes someone into the shed. You can make out two voices in rapid conversation. The voices are muffled, however, and cannot be made out."
?L10:	EQUAL? GARG,G-REACHED \FALSE
	EQUAL? BL,SOUTH-LAWN \FALSE
	EQUAL? HERE,SOUTH-LAWN \?L17
	REMOVE BAXTER
	PRINTR "A limousine comes up the drive and picks up Mr. Baxter."
?L17:	EQUAL? HERE,FRONT-PATH,EAST-OF-DOOR,WEST-OF-DOOR \?L21
	REMOVE BAXTER
	PRINTR "To the south, you observe a limousine picking up Mr. Baxter."
?L21:	REMOVE BAXTER
	RFALSE

	.FUNCT I-DUNBAR,GARG=0,DL
	LOC DUNBAR >DL
	ZERO? GARG \?L1
	CALL IMOVEMENT,DUNBAR,I-DUNBAR >STACK
	RSTACK
?L1:	EQUAL? GARG,G-REACHED \FALSE
	EQUAL? DL,SHED-ROOM \FALSE
	EQUAL? HERE,BEHIND-SHED \FALSE
	PRINTR "You hear soft footsteps approaching. Someone has entered the shed!"

	.FUNCT I-GEORGE,GARG=0,GL
	LOC GEORGE >GL
	EQUAL? GARG,G-REACHED \?L9
	EQUAL? GL,EAST-LAWN \?L1
	CALL UNPRIORITIZE,GEORGE
	RFALSE
?L1:	EQUAL? GARG,G-REACHED \?L9
	EQUAL? GL,GEORGE-ROOM \?L3
	SET 'STEREO-ON,1
	CALL PICK-ONE,RECORD-TABLE >TUNE-ON
	CALL QUEUE,I-TUNE-OFF,25 >STACK
	PUT STACK,0,1
	EQUAL? HERE,GL \FALSE
	PRINTI "George walks over to his stereo and puts on a record. He turns to you. ""I naturally assume that you would like to hear a "
	PRINT TUNE-ON
	PRINTR "."" he says, barely concealing his clear distaste for you and your profession."
?L3:	EQUAL? GARG,G-REACHED \?L9
	EQUAL? GL,NORTH-LAWN \?L9
	REMOVE NEW-WILL
	MOVE SOGGY-WILL,LAKE
	SET 'GEORGE-RUN,0
	CALL UNPRIORITIZE,GEORGE
	EQUAL? HERE,NORTH-LAWN \FALSE
	PRINTR "You catch, out of the corner of one eye, George motioning with his arm toward the lake."
?L9:	ZERO? GARG \FALSE
	CALL IMOVEMENT,GEORGE,I-GEORGE >STACK
	RSTACK

	.FUNCT I-ROURKE,GARG=0
	EQUAL? GARG,G-REACHED \?L1
	IN? ROURKE,ROURKE-ROOM \?L1
	CALL UNPRIORITIZE,ROURKE
	RFALSE
?L1:	ZERO? GARG \FALSE
	CALL IMOVEMENT,ROURKE,I-ROURKE >STACK
	RSTACK

	.FUNCT I-MRS-ROBNER,GARG=0,ML
	LOC MRS-ROBNER >ML
	EQUAL? GARG,G-REACHED \?L1
	EQUAL? ML,MASTER-BEDROOM \?L1
	ZERO? HC-ROBNER \FALSE
	FSET? HIDDEN-DOOR-B,OPENBIT \FALSE
	SET 'HC-ROBNER,1
	EQUAL? HERE,HIDDEN-CLOSET,MASTER-BEDROOM \FALSE
	PRINTR "Mrs. Robner stares in complete surprise at the hidden closet. ""I had no idea that such a place existed!""  She sits down on her bed."
?L1:	ZERO? GARG \FALSE
	CALL IMOVEMENT,MRS-ROBNER,I-MRS-ROBNER >STACK
	RSTACK

	.FUNCT IMOVEMENT,PERSON?1,INT?1,TB,VAR,DIS,TIM,ID,RM,GT
	GETP PERSON?1,P?CHARACTER >ID
	GET MOVEMENT-GOALS,ID >TB
	GET GOAL-TABLES,ID >GT
	GET TB,MG-ROOM >RM
	ZERO? RM /?L5
	GET GT,GOAL-PRIORITY >STACK
	ZERO? STACK /?L3
	PUT GT,GOAL-QUEUED,RM
	JUMP ?L5
?L3:	CALL ESTABLISH-GOAL,PERSON?1,RM
?L5:	GET TB,MG-TIME >TIM
	ZERO? TIM /FALSE
	GET TB,MG-VARIATION >VAR
	MUL VAR,2 >STACK
	RANDOM STACK >DIS
	SUB DIS,VAR >STACK
	ADD TIM,STACK >STACK
	CALL QUEUE,INT?1,STACK
	ADD TB,MG-LENGTH >STACK
	PUT MOVEMENT-GOALS,ID,STACK
	GET TB,MG-NEXT >STACK
	ZERO? STACK /FALSE
	SUB VAR,DIS >STACK
	GET TB,MG-NEXT >STACK
	ADD STACK,STACK >STACK
	PUT TB,MG-NEXT,STACK
	RFALSE

	.FUNCT I-FOLLOW,FLG=0,CNT=0,GT
?L1:	IGRTR? 'CNT,CHARACTER-MAX \?L3
	RETURN FLG
?L3:	GET GOAL-TABLES,CNT >GT
	GET GT,GOAL-S >STACK
	ZERO? STACK /?L1
	GET GT,GOAL-ENABLE >STACK
	ZERO? STACK \?L6
	GET GT,ATTENTION >STACK
	ZERO? STACK \?L1
?L6:	PUT GT,GOAL-ENABLE,1
	GET CHARACTER-TABLE,CNT >STACK
	CALL FOLLOW-GOAL,STACK >STACK
	ZERO? STACK /?L1
	SET 'FLG,1
	JUMP ?L1

	.FUNCT I-ATTENTION,FLG=0,CNT=0,ATT
?L1:	IGRTR? 'CNT,CHARACTER-MAX \?L3
	RETURN FLG
?L3:	GET ATTENTION-TABLE,CNT >STACK
	SUB STACK,1 >ATT
	EQUAL? ATT,1 \?L5
	GET CHARACTER-TABLE,CNT >STACK
	IN? STACK,HERE \?L11
	GET CHARACTER-TABLE,CNT >STACK
	PRINTD STACK
	PRINTI " starts to move about distractedly."
	CRLF
	SET 'FLG,1
	JUMP ?L11
?L5:	ZERO? ATT \?L11
	GET GOAL-TABLES,CNT >STACK
	PUT STACK,GOAL-ENABLE,1
?L11:	PUT ATTENTION-TABLE,CNT,ATT
	JUMP ?L1

	.FUNCT GRAB-ATTENTION,PERSON?1,CHR,GT,ATT
	GETP PERSON?1,P?CHARACTER >CHR
	GET GOAL-TABLES,CHR >GT
	GET GT,GOAL-S >STACK
	ZERO? STACK /?L5
	GET GT,ATTENTION-SPAN >ATT
	PUT ATTENTION-TABLE,CHR,ATT
	ZERO? ATT \?L3
	PUT GT,GOAL-ENABLE,1
	RFALSE
?L3:	GET GT,GOAL-ENABLE >STACK
	ZERO? STACK /?L5
	PUT GT,GOAL-ENABLE,0
?L5:	SET 'QCONTEXT,PERSON?1
	SET 'QCONTEXT-ROOM,HERE
	RTRUE

	.FUNCT I-COATES,RARG=0
	EQUAL? RARG,G-REACHED \FALSE
	IN? COATES,SOUTH-LAWN \?L3
	REMOVE COATES
	SET 'POST-WILL,0
	EQUAL? HERE,SOUTH-LAWN,FRONT-PATH,EAST-OF-DOOR /?L7
	EQUAL? HERE,WEST-OF-DOOR,EAST-LAWN,WEST-LAWN \FALSE
?L7:	PRINTR "A car pulls up the drive. Coates enters the vehicle, motions to the driver, and the car starts up and leaves the grounds."
?L3:	IN? COATES,LIVING-ROOM \FALSE
	EQUAL? HERE,LIVING-ROOM \?L12
	PRINTI "Mr. Coates shakes your hand. ""I'm glad you're here, Inspector. We'll begin the reading soon."""
	CRLF
?L12:	CALL QUEUE,I-WILL-READING,0 >STACK
	PUT STACK,0,1
	CALL I-WILL-READING >STACK
	RSTACK

	.INSERT "deadline/deadline_str"
	.END
